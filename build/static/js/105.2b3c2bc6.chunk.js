"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[105],{350723:(e,n,t)=>{t.d(n,{Z:()=>o});var s=t(91554),i=t(270501),l=t(585281),a=t(346417);const o=function(e){let{open:n,title:t,taille:o}=e;return(0,a.jsx)(s.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+100},open:n,children:(0,a.jsx)(i.Z,{sx:{width:o||"7rem",display:"flex",padding:"10px",alignItems:"center",justifyContent:"center"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)(l.Z,{size:15,color:"primary"}),(0,a.jsx)("p",{style:{fontSize:"12px"},children:t||"Laading..."})]})})})}},588724:(e,n,t)=>{t.d(n,{Z:()=>l});var s=t(358446),i=t(346417);const l=e=>{let{texte:n,nombre:t}=e;const l={chart:{height:200,type:"radialBar"},series:[t],plotOptions:{radialBar:{hollow:{margin:15,size:"70%"},dataLabels:{showOn:"always",name:{offsetY:-10,show:!0,color:"#888",fontSize:"13px"},value:{color:"#111",fontSize:"30px",show:!0}}}},stroke:{lineCap:"round"},labels:[""+n]};return(0,i.jsx)("div",{id:"chart",children:(0,i.jsx)(s.Z,{options:l,series:l.series,type:"radialBar",height:200})})}},400915:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ye});var s=t(747313),i=t(809019),l=t(261113),a=t(585281),o=t(887392),r=t(594500),d=t(814328),c=t(270501),x=t(301955),m=t(416031),p=t.n(m),h=t(661395),u=t(258467),v=t(346417);function j(){const{client:e}=s.useContext(o.E),[n,t]=s.useState(),[a,r]=s.useState();s.useEffect((()=>{t(p().groupBy(e,"statut")),r(Object.keys(p().groupBy(e,"statut")))}),[e]);const d=(e,n)=>{let t=0;for(let l=0;l<n.length;l++)(60*((s=n[l]).time_delai-(0,h.h$)(s.fullDateSave,new Date).toFixed(0))<=0?"OUT SLA":"IN SLA")===e&&(t+=1);var s;let i=100*t/n.length;return isNaN(i)?"0%":i.toFixed(0)+"%"},m=(0,u.s0)();return(0,v.jsx)(i.ZP,{container:!0,children:a&&a.map((e=>(0,v.jsx)(i.ZP,{onClick:t=>((e,t)=>{e.preventDefault();const s=n[""+t][0];s&&"ticket"===s.type?m("/tech_value",{state:{statut:t,state:""}}):m("/n_tech_value",{state:{statut:s.statut,state:""}})})(t,e),item:!0,lg:4,xs:12,sm:12,md:6,children:(0,v.jsxs)(c.Z,{sx:{padding:"5px",margin:"3px"},elevation:2,children:[(0,v.jsx)(l.Z,{noWrap:!0,sx:{textAlign:"center"},children:(0,h.fm)(e)}),(0,v.jsx)(l.Z,{noWrap:!0,sx:{textAlign:"center",fontSize:"20px",fontWeight:"bolder"},children:n&&n[""+e].length}),(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:d("OUT SLA",n[""+e])})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:d("IN SLA",n[""+e])})]})]})]})},e)))})}const g=s.memo(j);var f=t(369099),Z=t(835662);function y(){var e,n,t,a,r,x;const{setClient:m,client:p}=s.useContext(o.E),{plainteSelect:u,setSelect:j}=s.useContext(d.U),[g,y]=s.useState(!1);return(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:8,xs:12,sm:4,md:4,children:(0,v.jsxs)(c.Z,{children:[(0,v.jsx)(i.ZP,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff"},children:(0,v.jsx)(l.Z,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:null===u||void 0===u?void 0:u.nomClient})}),(0,v.jsx)(i.ZP,{sx:{padding:"5px"},children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Ticket number"}),(0,v.jsx)(l.Z,{className:"values",children:u.idPlainte})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Type Complaint"}),(0,v.jsx)(l.Z,{className:"values",children:u.typePlainte})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"ID"}),(0,v.jsx)(l.Z,{className:"values",children:u.codeclient})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Contact"}),(0,v.jsx)(l.Z,{className:"values",children:null===u||void 0===u?void 0:u.contact})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"type of intervention"}),(0,v.jsx)(l.Z,{className:"values",children:u.plainteSelect})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Comment"}),(0,v.jsx)(l.Z,{className:"values",children:u.recommandation})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Shop"}),(0,v.jsx)(l.Z,{className:"values",children:null===u||void 0===u?void 0:u.shop})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"openBy"}),(0,v.jsx)(l.Z,{className:"values",children:null===u||void 0===u?void 0:u.submitedBy})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Status"}),(0,v.jsx)(l.Z,{className:"values",children:(0,h.fm)(null===u||void 0===u?void 0:u.statut)})]})]})})]})}),(0,v.jsx)(i.ZP,{item:!0,lg:4,children:(0,v.jsxs)(c.Z,{sx:{padding:"10px",marginLeft:"5px"},children:[null!==u&&void 0!==u&&u.adresse?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:"Adresses"}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px 0px"},children:["Commune : ",null===u||void 0===u||null===(e=u.adresse)||void 0===e?void 0:e.commune]}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"10px 0px"},children:["Quartier : ",null===u||void 0===u||null===(n=u.adresse)||void 0===n?void 0:n.quartier]}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px"},children:["Avenue : ",null===u||void 0===u||null===(t=u.adresse)||void 0===t?void 0:t.avenue]}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"10px 0px"},children:["SAT : ",null===u||void 0===u||null===(a=u.adresse)||void 0===a||null===(r=a.sat)||void 0===r?void 0:r.nom_SAT]}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px"},children:["Reference : ",null===u||void 0===u||null===(x=u.adresse)||void 0===x?void 0:x.reference]})]}):(0,v.jsx)("p",{children:"No address"}),(0,v.jsx)(f.Z,{disabled:g,onClick:e=>(async e=>{e.preventDefault(),y(!0);try{const e={ticket:u.idPlainte},n=await Z.Z.post(h.mA+"/create_ticket",e,h.vc);200===n.status?(m(p.map((e=>e._id===n.data._id?n.data:e))),j(5)):y(!1)}catch(n){console.log(n)}})(e),variant:"contained",color:"primary",fullWidth:!0,children:"Create"})]})})]})}const N=s.memo(y);var S=t(435045),C=t(445389),w=t(181171);const b=(0,w.Z)((0,v.jsx)("path",{d:"M20.19 4H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.81-2-1.81-2zm-2.46 9.3-8.86 2.36-1.66-2.88.93-.25 1.26.99 2.39-.64-2.4-4.16 1.4-.38 4.01 3.74 2.44-.65c.51-.14 1.04.17 1.18.68.13.51-.17 1.04-.69 1.19z"}),"AirplaneTicket"),P=(0,w.Z)((0,v.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll"),_=(0,w.Z)((0,v.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause"),k=(0,w.Z)((0,v.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 6h-1.7l-5 9H7c-.83 0-1.5-.67-1.5-1.5S6.17 15 7 15h1.7l5-9H17c.83 0 1.5.67 1.5 1.5S17.83 9 17 9z"}),"Escalator");var A=t(861689),D=t(624631),L=t(803105),z=t(350723),T=t(396180),W=t(952122),I=t(985038),O=t(609731),E=t(74834),M=t(857763);const R=function(e){let{func:n,sending:t}=e;const{setRaisonOngoing:i,raisonOngoing:l}=s.useContext(d.U),[a,o]=T.ZP.useMessage(),r=e=>{var t,s;e.preventDefault(),l?n("ongoing",e):(t="Pourquoi ongoing ?",s="error",a.open({content:t,duration:5,type:s}))};return(0,v.jsxs)("div",{style:{width:"20rem"},children:[o,(0,v.jsx)("div",{style:{marginTop:"10px"},children:(0,v.jsx)(D.Z,{value:l,onChange:e=>i(e.target.value),name:"ongoing",autoComplete:"off",fullWidth:!0,label:"Why Ongoing ?"})}),(0,v.jsx)("div",{style:{marginTop:"10px"},children:(0,v.jsx)(f.Z,{disabled:t,onClick:e=>r(e),fullWidth:!0,variant:"contained",color:"primary",children:"Ongoing"})})]})};function U(e){let{update:n}=e;const{adresse:t,codeclient:c,setCodeclient:x,shopSelect:m,setShopSelect:p,historique:u,setHistorique:j,initiale:g,raisonOngoing:y,plainteSelect:N,setPlainteSelect:w,setInitiale:U,otherItem:F,item:B,setItem:$,annuler:Y}=s.useContext(d.U),[G,V]=s.useState("");console.log(u);const{client:q,setClient:H}=s.useContext(o.E),J=(0,r.v9)((e=>{var n;return null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.user})),[Q,K]=s.useState();s.useEffect((()=>{J.plainte_callcenter&&K("callcenter"),J.plainteShop&&K("shop")}),[J]);const[X,ee]=s.useState(!1),ne=(0,r.v9)((e=>{var n;return null===(n=e.shop)||void 0===n?void 0:n.shop})),[te,se]=s.useState(!1),{recommandation:ie,nomClient:le,contact:ae}=g,[oe,re]=T.ZP.useMessage(),de=(e,n)=>{oe.open({type:n,content:""+e,duration:10})},ce=(0,r.v9)((e=>e.plainte.plainte.filter((e=>e.property===Q||"all"===e.property)))),xe=e=>{const{name:n,value:t}=e.target;U({...g,[n]:t})};s.useEffect((()=>{j(),p(""),U({recommandation:"",nomClient:"",contact:""})}),[]),s.useEffect((()=>{if(n){let e=ne.filter((e=>e.shop===n.shop));U({recommandation:null===n||void 0===n?void 0:n.recommandation,nomClient:null===n||void 0===n?void 0:n.nomClient,contact:null===n||void 0===n?void 0:n.contact}),x(null===n||void 0===n?void 0:n.codeclient),p(e[0])}}),[n]);const[me,pe]=s.useState(!1),[he,ue]=s.useState([]),[ve,je]=s.useState(!1),ge=async(e,n)=>{try{if(n.preventDefault(),null!==J&&void 0!==J&&J.plainteShop&&J.plainteShop!==(null===m||void 0===m?void 0:m.shop))de(`Ce client n'est pas de votre shop << ${null===J||void 0===J?void 0:J.plainteShop} >>`,"error");else if(null!==B&&void 0!==B&&B.adresse&&!t)de("Les nouvelles adresses du client sont obligatoire","error");else{je(!0);const n={codeclient:c,statut:e,delai:"IN SLA",shop:null===m||void 0===m?void 0:m.shop,typePlainte:null===N||void 0===N?void 0:N.title,plainteSelect:B.other?B.oneormany?he.join(";"):null===F||void 0===F?void 0:F.title:null===B||void 0===B?void 0:B.title,recommandation:g.recommandation,nomClient:le,contact:g.contact,raisonOngoing:y,adresse:t,open:"closed"!==e,operation:"escalade"===e?"backoffice":void 0},s={typePlainte:null===N||void 0===N?void 0:N.title,plainte:null===B||void 0===B?void 0:B.title,contact:g.contact,codeclient:c,adresse:t,nomClient:le,statut:e,shop:null===m||void 0===m?void 0:m.shop,commentaire:g.recommandation},i=null!==B&&void 0!==B&&B.ticket?s:n,l=null!==B&&void 0!==B&&B.ticket?"soumission_ticket":"appel",a=await Z.Z.post(`${h.mA}/${l}`,i,h.vc);201===a.status&&(de(a.data,"warning"),je(!1)),200===a.status&&(de("Done","success"),H([a.data,...q]),je(!1),Y())}}catch(s){je(!1),de("Error "+s,"error")}};s.useEffect((()=>{var e,n;u&&(null===u||void 0===u?void 0:u.info.length)>0&&(p(null===(e=u.info[0])||void 0===e?void 0:e.shop),U({...g,nomClient:null===(n=u.info[0])||void 0===n?void 0:n.nomClient}))}),[u]),s.useEffect((()=>{B&&(["GLVGG","WVW3J"].includes(B.id)&&V("Regularisation"),"RW38Z"===B.id&&V("Desangagement"),"L2N7T"===B.id&&V("Repossession"),"1GS1J"===B.id&&V("Downgrade"),"9NPC7"===B.id&&V("Upgrade"),"TRRIK"===B.id&&V("Information"),"CF5GL"===B.id&&V("Rafraichissement"))}),[B]);const fe=async e=>{try{je(!0);const n={typePlainte:null===N||void 0===N?void 0:N.title,contact:g.contact,plainte:null===B||void 0===B?void 0:B.title,codeclient:c,type:"Educate_the_customer"===e?"Education":"ticket",statut:e,nomClient:le,shop:null===m||void 0===m?void 0:m.shop,commentaire:g.recommandation},t=await Z.Z.post(h.mA+"/ticker_callcenter",n,h.vc);201===t.status&&(de(t.data,"warning"),je(!1)),200===t.status&&(de("Done","success"),H([...q,t.data]),je(!1),Y())}catch(n){de("Erro "+n,"warning"),je(!1)}},[Ze,ye]=s.useState("");return s.useEffect((()=>{N&&(()=>{if(N){let e=null===N||void 0===N?void 0:N.alltype.filter((e=>e.property===Q||"all"===e.property));ye([...e,{_id:"autre",title:"autre",idPlainte:"autre",id:"autre"}])}})()}),[N]),(0,v.jsxs)(v.Fragment,{children:[re,ve&&(0,v.jsx)(z.Z,{open:!0,title:"Please wait...",taille:"10rem"}),(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:10,sx:{paddingRight:"10px"},children:(0,v.jsx)(W.Z,{label:"Code client",setValue:x,value:c,showIcon:!0})}),(0,v.jsx)(i.ZP,{item:!0,lg:2,sx:{display:"flex",alignItems:"center"},children:(0,v.jsx)(A.Z,{title:"confirm the search",children:(0,v.jsx)(f.Z,{onClick:e=>(async e=>{e.preventDefault(),se(!0);try{const e=await Z.Z.get(`${h.mA}/infoclient/${c}`,h.vc);200===e.status&&(j(e.data),se(!1))}catch(n){console.log(n)}})(e),variant:"contained",color:"primary",children:te?(0,v.jsx)(a.Z,{size:20,color:"inherit"}):(0,v.jsx)(S.Z,{fontSize:"small"})})})})]}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:(0,v.jsx)(D.Z,{onChange:e=>xe(e),value:le,style:{marginTop:"10px"},name:"nomClient",autoComplete:"off",fullWidth:!0,label:"customer name"})}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:ne&&(0,v.jsx)(L.Z,{value:m,setValue:p,options:ne,title:"Shop",propr:"shop"})}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:(0,v.jsx)(D.Z,{onChange:e=>xe(e),value:ae,style:{marginTop:"10px"},name:"contact",autoComplete:"off",fullWidth:!0,label:"Contact"})}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:ce&&(0,v.jsx)(L.Z,{value:N,setValue:w,options:ce,title:"Plainte",propr:"title"})}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:Ze&&(0,v.jsx)(L.Z,{value:B,setValue:$,options:Ze,title:"Probleme",propr:"title"})}),B&&B.other&&(null===B||void 0===B?void 0:B.tableother.length)>0&&(0,v.jsx)(E.Z,{data:B,liste:he,setListe:ue}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{style:{marginBottom:"10px"},children:(0,v.jsx)(D.Z,{onChange:e=>xe(e),value:ie,style:{marginTop:"10px"},name:"recommandation",autoComplete:"off",fullWidth:!0,label:"Commentaire"})}),(0,v.jsx)(M.Z,{type:G}),B&&(0,v.jsx)(v.Fragment,{children:!["GLVGG","WVW3J","CF5GL","TRRIK","RW38Z","L2N7T","1GS1J","9NPC7"].includes(B.id)&&(0,v.jsxs)("div",{children:[(null===B||void 0===B?void 0:B.ticket)&&"A8MDN"===B.id&&(0,v.jsxs)(f.Z,{onClick:e=>ge(null!==B&&void 0!==B&&B.ticket?"awaiting_confirmation":"closed",e),color:"primary",variant:"contained",children:[null!==B&&void 0!==B&&B.ticket?(0,v.jsx)(b,{fontSize:"small"}):(0,v.jsx)(C.Z,{fontSize:"small"})," ",(0,v.jsx)("span",{style:{marginLeft:"10px"},children:"Demande_de_creation_ticket"})]}),B&&(null===B||void 0===B?void 0:B.ticket)&&"A8MDN"!==B.id&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(f.Z,{onClick:()=>fe("Open_technician_visit"),color:"primary",variant:"contained",children:[(0,v.jsx)(b,{fontSize:"small"}),(0,v.jsx)("span",{style:{marginLeft:"10px"},children:"Ticket_creation"})]}),(0,v.jsx)(f.Z,{sx:{marginLeft:"4px"},onClick:()=>fe("Educate_the_customer"),color:"primary",variant:"contained",children:"Educate_the_customer"})]}),!(null!==B&&void 0!==B&&B.ticket)&&"LI2GP"!==(null===B||void 0===B?void 0:B.id)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(f.Z,{sx:{margin:"0px 5px"},onClick:e=>ge("closed",e),color:"primary",variant:"contained",children:[(0,v.jsx)(P,{fontSize:"small"}),(0,v.jsx)("span",{style:{marginLeft:"10px"},children:"Closes"})]}),(0,v.jsxs)(f.Z,{sx:{margin:"0px 5px"},onClick:()=>pe(!0),color:"secondary",variant:"contained",children:[(0,v.jsx)(_,{fontSize:"small"}),(0,v.jsx)("span",{style:{marginLeft:"10px"},children:"Ongoing"})]})]}),!(null!==B&&void 0!==B&&B.ticket)&&(0,v.jsxs)(f.Z,{onClick:e=>ge("escalade",e),color:"primary",variant:"contained",children:[(0,v.jsx)(k,{fontSize:"small"})," ",(0,v.jsx)("span",{style:{marginLeft:"5px"},children:"Escalade"})]}),(0,v.jsx)(l.Z,{onClick:()=>Y(),sx:{marginLeft:"3px",cursor:"pointer",color:"red"},color:"warning",variant:"contained",children:"Annuler"}),(null===B||void 0===B?void 0:B.adresse)&&(0,v.jsx)(l.Z,{component:"span",style:{textAlign:"right",fontSize:"12px",cursor:"pointer",color:"blue",fontWeight:"bolder",marginLeft:"20px",textDecoration:"underline"},onClick:()=>ee(!0),children:"Adresses"})]})}),(0,v.jsx)(I.Z,{open:X,setOpen:ee,title:"New customer addresses",children:(0,v.jsx)(O.Z,{setOpen:ee})}),(0,v.jsx)(I.Z,{open:me,setOpen:pe,title:"Raison",children:(0,v.jsx)(R,{sending:ve,func:ge})})]})}const F=s.memo(U);var B=t(619536),$=t(70816),Y=t.n($);function G(){const{historique:e,setPlainteSelect:n,setSelect:t}=s.useContext(d.U),l=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user}));return(0,v.jsxs)("div",{children:[e&&(null===e||void 0===e?void 0:e.appel.length)>0&&e.appel.map((e=>(0,v.jsxs)(i.ZP,{onClick:s=>((e,s)=>{s.preventDefault(),n(e),t(3)})(e,s),container:!0,className:"plainte",sx:{marginTop:"10px",padding:"5px"},children:[(0,v.jsxs)(i.ZP,{item:!0,lg:6,className:"infoOne",children:[(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Issue"})," : ",null===e||void 0===e?void 0:e.typePlainte]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Type Issue"})," : ",null===e||void 0===e?void 0:e.plainteSelect]}),(0,v.jsxs)("p",{className:e.open?"statut open":"statut",children:[(0,v.jsx)("span",{children:"statut"})," : ",null===e||void 0===e?void 0:e.statut]})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,className:"infoTwo",children:[(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"saved by"})," : ",(null===e||void 0===e?void 0:e.submitedBy)+"; ",null===e||void 0===e?void 0:e.property]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"comment"})," : ",null===e||void 0===e?void 0:e.recommandation]}),(0,v.jsx)("p",{children:Y()(null===e||void 0===e?void 0:e.fullDateSave).fromNow()})]}),(0,v.jsx)(B.Z,{})]},e._id))),!e&&(0,v.jsx)("div",{className:"images",children:(0,v.jsx)("div",{children:(0,v.jsxs)("p",{children:["Service client Bboxx Bonjour! Je m'appelle ",(0,h.$f)(null===l||void 0===l?void 0:l.nom)," comment puis-je vous aider Monsieur?"]})})})]})}const V=s.memo(G);var q=t(209478),H=t(358446);function J(e){let{data:n}=e;const[t,i]=s.useState({options:[],series:[]});s.useEffect((()=>{(()=>{let e=[],t=[],s=p().toArray(Object.keys(p().countBy(n,"submitedBy")));for(let i=0;i<s.length;i++)e.push(s[i]),t.push(n.filter((e=>e.submitedBy===s[i])).length);i({series:t,options:e})})()}),[n]);const l={chart:{id:"basic-bar"},xaxis:{categories:t.options}},a=[{name:"series-1",data:t.series}];return(0,v.jsx)("div",{className:"mixed-chart",children:(0,v.jsx)(H.Z,{options:l,series:a,type:"bar",width:"100%",height:300})})}const Q=s.memo(J);function K(){const{socket:e}=s.useContext(o.E),[n,t]=s.useState(),[i,l]=s.useState([]);s.useEffect((()=>{e&&e.on("appel",(e=>{t(e)}))}),[e]);return s.useEffect((()=>{(async()=>{const e=await Z.Z.get(h.mA+"/today",h.vc);200===e.status&&l(e.data)})()}),[]),s.useEffect((()=>{n&&l([n,...i])}),[n]),(0,v.jsxs)("div",{className:"liste",children:[(0,v.jsxs)("p",{className:"pCall",children:[i.length," complaint received"]}),(0,v.jsx)(q.Z,{sx:{mt:2},content:!1,children:(0,v.jsx)(Q,{data:i})})]})}const X=s.memo(K);var ee=t(557829),ne=t(644758),te=t(301550),se=t(183929),ie=t(116429),le=t(808425);function ae(e){let{property:n}=e;const[t,i]=s.useState({nomClient:"",contact:"",raison:""}),{nomClient:l,contact:a,raison:o}=t,[d,c]=s.useState(!1),x=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user})),m=e=>{const{value:n,name:s}=e.target;i({...t,[s]:n})},[p,u]=T.ZP.useMessage(),j=(e,n)=>{p.open({type:n,content:""+e,duration:5})};return(0,v.jsxs)("div",{children:[u,(0,v.jsx)("div",{children:(0,v.jsx)(D.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"nomClient",autoComplete:"off",fullWidth:!0,value:l,label:"customer Name"})}),(0,v.jsx)("div",{children:(0,v.jsx)(D.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"contact",value:a,autoComplete:"off",fullWidth:!0,label:"Contact"})}),(0,v.jsx)("div",{children:(0,v.jsx)(D.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"raison",autoComplete:"off",value:o,fullWidth:!0,label:"Information about"})}),(0,v.jsx)("div",{style:{marginTop:"10px"},children:(0,v.jsxs)(f.Z,{disabled:d,variant:"contained",fullWidth:!0,color:"primary",onClick:e=>(async()=>{try{c(!0);const e={nomClient:t.nomClient,contact:t.contact,about:null===t||void 0===t?void 0:t.raison,origin:n,shop:(null===x||void 0===x?void 0:x.plainteShop)&&x.plainteShop},s=await Z.Z.post(h.mA+"/information_customer",e,h.vc);200===s.status?(j("Done","success"),i({nomClient:"",contact:"",raison:""}),c(!1)):(j(s.data,"error"),c(!1))}catch(e){console.log(e)}})(),children:[(0,v.jsx)(le.Z,{fontSize:"small"})," ",(0,v.jsx)("span",{style:{marginLeft:"10px"},children:"Valider"})]})})]})}const oe=s.memo(ae);function re(e){let{property:n}=e;const[t,a]=s.useState(0),o=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user})),[d,x]=s.useState("our");return(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:5,xs:12,sm:12,md:6,children:(0,v.jsxs)(c.Z,{elevation:4,sx:{padding:"10px"},children:[(0,v.jsxs)(ee.Z,{sx:{display:"flex"},children:[(0,v.jsx)(te.Z,{onClick:()=>x("our"),component:"fieldset",variant:"standard",children:(0,v.jsx)(ie.Z,{children:(0,v.jsx)(se.Z,{control:(0,v.jsx)(ne.Z,{checked:"our"===d,name:"gilad"}),label:"Our customer"})})}),(0,v.jsx)(te.Z,{onClick:()=>x("information"),required:!0,component:"fieldset",variant:"standard",children:(0,v.jsx)(ie.Z,{children:(0,v.jsx)(se.Z,{control:(0,v.jsx)(ne.Z,{checked:"information"===d,name:"gilad"}),label:"Information"})})}),o&&(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",fontSize:"13px"},children:o.plainteShop&&""+o.plainteShop})})]}),"our"===d&&(0,v.jsx)(F,{}),"information"===d&&(0,v.jsx)(oe,{property:n})]})}),(0,v.jsx)(i.ZP,{item:!0,lg:7,xs:12,sm:12,md:6,children:(0,v.jsxs)(c.Z,{elevation:4,sx:{marginLeft:"10px"},children:[(0,v.jsxs)("div",{className:"titre",children:[(0,v.jsx)(l.Z,{onClick:()=>a(0),children:"Historique d'appels"}),(0,v.jsx)(l.Z,{onClick:()=>a(1),children:"Today"})]}),0===t&&(0,v.jsx)(V,{}),1===t&&(0,v.jsx)(X,{})]})})]})}const de=s.memo(re);var ce=t(32084),xe=t(542420),me=t(614680),pe=t(540695),he=t(249555),ue=t(484488);const ve=function(){const e=(0,u.s0)(),[n,t]=s.useState();s.useEffect((()=>{(async()=>{try{const n=await Z.Z.get(`${h.mA}/backoffice_data`,h.vc);201===n.status&&"token expired"===n.data&&e("/login"),200===n.status&&t(n.data)}catch(n){console.log(n)}})()}),[]);const l=e=>{const t=n.reduce(((e,n)=>e+n.total),0);return(100*n.filter((n=>n._id===e))[0].total/t).toFixed(0)},[a,o]=s.useState();return s.useEffect((()=>{(async()=>{try{const e=await Z.Z.get(h.mA+"/mydeedline/backoffice",h.vc);200===e.status&&o(e.data)}catch(e){console.log(e)}})()}),[]),(0,v.jsx)("div",{children:(0,v.jsx)(i.ZP,{container:!0,children:(0,v.jsxs)(i.ZP,{item:!0,lg:4,children:["From the beginning of the month to date",n&&n.length>0?(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error"}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:[l("OUT SLA"),"%"]})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:[l("IN SLA"),"%"]})]}),a?(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsxs)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px"},children:["For me is ",a,"%"]})]}):(0,v.jsx)(ue.Z,{variant:"text",sx:{fontSize:"1rem",width:"15rem"}})]}):(0,v.jsx)(ue.Z,{variant:"text",sx:{fontSize:"1rem",width:"15rem"}})]})})})};var je=t(878375);function ge(){const[e,n]=s.useState(),{client:t}=s.useContext(o.E),{setPlainteSelect:i,setSelect:l}=s.useContext(d.U);s.useEffect((()=>{t&&n(p().filter(t,{operation:"backoffice"}))}),[t]);const a=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"property",headerName:"Provenance",width:80,editable:!1},{field:"statut",headerName:"Statut",width:160,editable:!1,renderCell:e=>(0,v.jsx)(je.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type Plainte",width:150,editable:!1},{field:"plainteSelect",headerName:"Plainte",width:150,editable:!1},{field:"submitedBy",headerName:"Saved By",width:100,editable:!1},{field:"dateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>Y()(e.row.dateSave).format("DD/MM/YYYY")},{field:"dateClose",headerName:"SLA",width:130,editable:!1,renderCell:e=>e.row.open?(0,h.bQ)((e.row.time_delai-((e,n)=>{let t=(new Date(n).getTime()-new Date(e).getTime())/6e4;return t<1?1:t})(e.row.fullDateSave,new Date)).toFixed(0)):(0,v.jsx)(je.Z,{text:e.row.delai})},{field:"open",headerName:"Type",width:75,editable:!1,renderCell:e=>(0,v.jsx)(je.Z,{text:e.row.open?"Ouvert":"Fermer"})},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,v.jsx)(xe.Z,{size:"small",color:"primary",onClick:()=>{return n=e.row,i(n),void l(3);var n},children:e.row.message?e.row.message.length:(0,v.jsx)(ce.Z,{fontSize:"small"})})}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.Z,{elevation:4,sx:{marginBottom:"15px",padding:"10px"},children:(0,v.jsx)(ve,{})}),!e&&(0,v.jsx)(he.Z,{width:400,height:400}),e&&e.length>0&&(0,v.jsx)(c.Z,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},elevation:4,children:(0,v.jsx)("div",{children:(0,v.jsx)(me._$,{rows:e,columns:a,initialState:{pagination:{paginationModel:{pageSize:100}}},pageSizeOptions:[100],disableRowSelectionOnClick:!0,getRowId:e=>e._id})})}),e&&0===e.length&&(0,v.jsx)(pe.Z,{texte:"No backoffice complaints"})]})}const fe=s.memo(ge);function Ze(e){var n,t,a,o,r,d,x,m,p,j,g,f,Z,y,N,S;let{plainteSelect:C}=e;const[w,b]=s.useState(!1),P=(0,u.s0)();return(0,v.jsxs)(c.Z,{sx:{marginTop:"10px"},children:[(0,v.jsx)(i.ZP,{sx:{padding:"5px",display:"flex",alignItems:"center",minHeight:"3rem",backgroundColor:"#002d72",color:"#fff"},children:(0,v.jsxs)(l.Z,{sx:{fontSize:"15px",padding:"0px",margin:"0px",fontWeight:"bolder"},noWrap:!0,children:[C.nomClient," ",(0,v.jsx)("span",{style:{background:""+(null!==C&&void 0!==C&&C.open?"green":"red"),borderRadius:"5px",padding:"4px"},children:null!==C&&void 0!==C&&C.open?"Open":"Closed"})]})}),(0,v.jsxs)(i.ZP,{sx:{padding:"5px"},children:[(0,v.jsx)(i.ZP,{className:"month",children:C.codeclient}),(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Type Plainte"}),(0,v.jsx)(l.Z,{className:"values",children:C.typePlainte})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Plainte"}),(0,v.jsx)(l.Z,{className:"values",children:C.plainteSelect})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Commentaire"}),(0,v.jsx)(l.Z,{className:"values",children:C.recommandation})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Delai"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.delai})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"openBy"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.submitedBy})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"statut"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.statut})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"contact"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.contact})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Date"}),(0,v.jsxs)(l.Z,{className:"values",children:[Y()(null===C||void 0===C?void 0:C.createdAt).format("DD-MM-YYYY")," "]})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Origin"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.property})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Shop"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.shop})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Type"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.type})]}),(null===C||void 0===C?void 0:C.decodeur)&&(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"D\xe9codeur"}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.decodeur})]}),"ongoing"===C.statut&&(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Why ongoing ? "}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.raisonOngoing})]}),(null===C||void 0===C?void 0:C.closeBy)&&(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"CloseBy ? "}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.closeBy})]}),(null===C||void 0===C?void 0:C.editRaison)&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,v.jsx)(l.Z,{className:"title",children:"Why he want to edit ? "}),(0,v.jsx)(l.Z,{className:"values",children:null===C||void 0===C?void 0:C.editRaison}),(0,v.jsx)(l.Z,{component:"p",onClick:e=>(e=>{e.preventDefault(),P("/edit",{state:C})})(e),style:{cursor:"pointer",fontSize:"12px",textDecoration:"underline",marginTop:"10px",color:"blue",fontWeight:"bolder"},children:"Clic here to make change"})]})})]}),(0,v.jsx)(B.Z,{}),(0,v.jsx)(i.ZP,{container:!0,children:(0,v.jsx)(i.ZP,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:(0,v.jsxs)("div",{children:["Desengagement"===C.statut&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Desengagement du client"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Raison"})," : ",null===C||void 0===C||null===(n=C.desangagement)||void 0===n?void 0:n.raison]}),(0,v.jsx)("a",{rel:"noreferrer",target:"_blank",href:`${h.fX}/${null===C||void 0===C||null===(t=C.desangagement)||void 0===t?void 0:t.filename}`,children:(0,v.jsx)("span",{children:"ouvrir le contrat"})})]}),"Downgrade"===C.statut&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Downgrade"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"num_synchro"})," : ",null===C||void 0===C||null===(a=C.downgrade)||void 0===a?void 0:a.num_synchro]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"kit"})," : ",null===C||void 0===C||null===(o=C.downgrade)||void 0===o?void 0:o.kit]})]}),"Repossession volontaire"===C.statut&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Repossession volontaire"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"num_synchro"})," : ",null===C||void 0===C||null===(r=C.repo_volontaire)||void 0===r?void 0:r.num_synchro]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Materiels"})," :"," ",null===C||void 0===C?void 0:C.repo_volontaire.materiel.map((e=>(0,v.jsx)("span",{children:e},e)))]})]}),"Upgrade"===C.statut&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Upgrade"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Materiel"})," : ",null===C||void 0===C?void 0:C.upgrade]})]}),"Regularisation"===C.statut&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Regularisation"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Jours"})," : ",null===C||void 0===C||null===(d=C.regularisation)||void 0===d?void 0:d.jours," jour(s)"]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"C.U"})," : ",null===C||void 0===C||null===(x=C.regularisation)||void 0===x?void 0:x.cu]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Raison"})," : ",null===C||void 0===C||null===(m=C.regularisation)||void 0===m?void 0:m.raison]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"date_coupure"})," : ",Y()(null===C||void 0===C||null===(p=C.regularisation)||void 0===p?void 0:p.date_coupure).format("DD/MM/YYYY")]})]}),"Changement de Shop"===C.plainteSelect&&(0,v.jsxs)("div",{className:"downgrade",children:[(0,v.jsx)("p",{className:"downgradeP",children:"Changement de Shop"}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Shop"})," : ",null===C||void 0===C||null===(j=C.adresse)||void 0===j?void 0:j.shop]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Commune"})," : ",null===C||void 0===C||null===(g=C.adresse)||void 0===g?void 0:g.commune]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Quartier"})," : ",null===C||void 0===C||null===(f=C.adresse)||void 0===f?void 0:f.quartier]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Avenue"})," : ",null===C||void 0===C||null===(Z=C.adresse)||void 0===Z?void 0:Z.avenue]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Reference"})," : ",null===C||void 0===C||null===(y=C.adresse)||void 0===y?void 0:y.reference]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"SAT"})," : ",null===C||void 0===C||null===(N=C.adresse)||void 0===N||null===(S=N.sat)||void 0===S?void 0:S.nom_SAT]})]})]})})})]}),w&&(0,v.jsx)(I.Z,{open:w,setOpen:b,title:"Edit",children:(0,v.jsx)(F,{update:C})})]})}const ye=s.memo(Ze);function Ne(){var e,n,t,a,x,m,p,u,j,g;const{plainteSelect:y,setSelect:N}=s.useContext(d.U),S=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user})),[C,w]=s.useState([]),[b,P]=s.useState(""),{client:_,setClient:k}=s.useContext(o.E),[A,L]=s.useState(!1);s.useEffect((()=>{null!==y&&void 0!==y&&y.message&&(null===y||void 0===y?void 0:y.message.length)>0&&w(null===y||void 0===y?void 0:y.message)}),[y]);const z=(e,n)=>{let t=(new Date(n).getTime()-new Date(e).getTime())/6e4;return t<1?1:t},[W,I]=T.ZP.useMessage(),O=(e,n)=>{W.open({type:n,content:""+e,duration:10})};return(0,v.jsxs)(v.Fragment,{children:[I,(0,v.jsxs)(i.ZP,{container:!0,sx:{marginTop:"10px"},children:[(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:4,md:4,children:[(0,v.jsx)(ye,{plainteSelect:y}),(0,v.jsx)(c.Z,{sx:{padding:"10px",marginTop:"4px"},children:(0,v.jsxs)("div",{className:"adresseInfo",children:[(0,v.jsx)("p",{className:"adresseP",children:"Customer Informations"}),(null===y||void 0===y||null===(e=y.adresse)||void 0===e?void 0:e.contact)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Contact"})," : "+(null===y||void 0===y||null===(n=y.adresse)||void 0===n?void 0:n.contact)]}),(null===y||void 0===y?void 0:y.decodeur)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"D\xe9codeur"})," : "+(null===y||void 0===y?void 0:y.decodeur)]}),(null===y||void 0===y||null===(t=y.adresse)||void 0===t?void 0:t.commune)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Commune "})," : "+(null===y||void 0===y||null===(a=y.adresse)||void 0===a?void 0:a.commune)]}),(null===y||void 0===y||null===(x=y.adresse)||void 0===x?void 0:x.quartier)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Quartier "})," : "+(null===y||void 0===y||null===(m=y.adresse)||void 0===m?void 0:m.quartier)]}),(null===y||void 0===y||null===(p=y.adresse)||void 0===p?void 0:p.avenue)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Avenue "})," : "+(null===y||void 0===y||null===(u=y.adresse)||void 0===u?void 0:u.avenue)]}),(null===y||void 0===y||null===(j=y.adresse)||void 0===j?void 0:j.reference)&&(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Reference "})," : "+(null===y||void 0===y||null===(g=y.adresse)||void 0===g?void 0:g.reference)]})]})}),(0,v.jsx)(c.Z,{sx:{padding:"10px",marginTop:"4px"},children:y&&(null===y||void 0===y?void 0:y.resultat.length)>0&&(null===y||void 0===y?void 0:y.resultat.map((e=>(0,v.jsx)("div",{className:"resultat",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"last_status : "}),null===e||void 0===e?void 0:e.laststatus]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"change_to : "}),null===e||void 0===e?void 0:e.changeto]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Do_by : "}),null===e||void 0===e?void 0:e.nomAgent]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"SLA : "}),null===e||void 0===e?void 0:e.delai]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Comment : "}),null===e||void 0===e?void 0:e.commentaire]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Date : "}),Y()(null===e||void 0===e?void 0:e.fullDate).format("DD/MM/YYYY hh:mm")]})]})},e._id))))})]}),(0,v.jsxs)(i.ZP,{item:!0,lg:6,xs:12,sm:8,md:8,children:[(0,v.jsxs)(c.Z,{className:"papierConv",elevation:3,children:["ID : ",null===y||void 0===y?void 0:y.idPlainte]}),(0,v.jsx)("div",{children:C&&C.map((e=>(0,v.jsx)(c.Z,{elevation:3,className:"papierConv",children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:2,className:"userP",children:(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{noWrap:!0,component:"p",children:e.agent===S.nom?"Moi":(0,h.$f)(e.agent)})})}),(0,v.jsx)(i.ZP,{item:!0,lg:10,className:"body_content",children:(0,v.jsx)("p",{children:e.content})})]})},e._id)))}),null!==y&&void 0!==y&&y.open?(0,v.jsx)("div",{className:"forme",children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:8,xs:8,sm:8,md:8,children:(0,v.jsx)(D.Z,{value:b,onChange:e=>P(e.target.value),autoComplete:"off",fullWidth:!0,label:"Message"})}),(0,v.jsx)(i.ZP,{item:!0,lg:2,xs:2,sm:2,md:2,sx:{paddingLeft:"1px"},children:(0,v.jsx)(f.Z,{fullWidth:!0,disabled:A,color:"primary",variant:"contained",onClick:e=>(async e=>{try{e.preventDefault(),L(!0);const n=await Z.Z.post(h.mA+"/message",{idPlainte:null===y||void 0===y?void 0:y.idPlainte,content:b,type:"message"},h.vc);200===n.status&&(w([...C,n.data]),P(""),L(!1))}catch(n){console.log(n)}})(e),children:"Save"})}),(null===S||void 0===S?void 0:S.backOffice_plainte)&&(0,v.jsx)(i.ZP,{item:!0,lg:2,xs:2,sm:2,md:2,sx:{paddingLeft:"5px"},children:(0,v.jsx)(f.Z,{fullWidth:!0,disabled:A,color:"primary",variant:"contained",onClick:e=>(async()=>{try{L(!0);const e=await Z.Z.post(`${h.mA}/updateappel`,{id:y._id,data:{open:!1,closeBy:null===S||void 0===S?void 0:S.nom,delai:y.time_delai-z(y.fullDateSave,new Date)>0?"IN SLA":"OUT SLA"}},h.vc);200===e.status&&(O("Done","success"),k(_.map((n=>n._id===e.data._id?e.data:n))),L(!1),N(2)),201===e.status&&(O(""+e.data,"error"),L(!1))}catch(e){O(""+e,"error")}})(),children:"Close"})})]})}):(0,v.jsx)("p",{style:{textAlign:"center",color:"red",fontWeight:"bolder"},children:"The_complaint_is_already_closed"})]})]})]})}const Se=s.memo(Ne);var Ce=t(371207),we=t(397400),be=t(189843);function Pe(){const[e,n]=s.useState(),{socket:t,client:i}=s.useContext(o.E),{setPlainteSelect:l,setSelect:a}=s.useContext(d.U);s.useEffect((()=>{(async()=>{n(i.filter((e=>"awaiting_confirmation"===e.statut)))})()}),[i]);const[r,x]=s.useState({isOpen:!1,title:"",subTitle:""}),[m,p]=s.useState();s.useEffect((()=>{t&&t.on("appel",(e=>{p(e)}))}),[t]),s.useEffect((()=>{if(m&&"escalade"===m.statut){n([m,...e]);new Audio(we).play()}}),[m]);const u=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"idPlainte",headerName:"ID",width:75,editable:!1},{field:"shop",headerName:"Shop",width:100,editable:!1},{field:"contact",headerName:"Contact",width:80,editable:!1},{field:"statut",headerName:"Statut",width:150,editable:!1,renderCell:e=>(0,v.jsx)(je.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type d'interventions",width:130,editable:!1},{field:"plainteSelect",headerName:"Issue du client",width:150,editable:!1},{field:"submitedBy",headerName:"Cr\xe9es par ",width:100,editable:!1},{field:"dateClose",headerName:"SLA",width:120,editable:!1,renderCell:e=>(0,h.bQ)((e.row.time_delai-((e,n)=>{let t=(new Date(n).getTime()-new Date(e).getTime())/6e4;return t<1?1:t})(e.row.fullDateSave,new Date)).toFixed(0))},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,v.jsx)(xe.Z,{size:"small",color:"primary",onClick:()=>{return n=e.row,l(n),void a(6);var n},children:(0,v.jsx)(Ce.Z,{fontSize:"small"})})}];return(0,v.jsxs)(v.Fragment,{children:[!e&&(0,v.jsx)(he.Z,{width:400,height:400}),e&&0===e.length&&(0,v.jsx)(pe.Z,{texte:"No relocation pending"}),e&&e.length>0&&(0,v.jsx)(c.Z,{elevation:4,children:(0,v.jsx)(me._$,{rows:e,columns:u,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})}),(0,v.jsx)(be.Z,{confirmDialog:r,setConfirmDialog:x})]})}const _e=s.memo(Pe);const ke=function(){const[e,n]=s.useState(""),[t,i]=s.useState(),a=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user})),[d,x]=s.useState();s.useEffect((()=>{(async()=>{try{const e=await Z.Z.get(h.mA+"/notification_reader",h.vc);200===e.status&&x(e.data)}catch(e){console.log(e)}})()}),[]);const m=e=>{const{content:n,agent:t,plainte:s,createdAt:a}=e.index;return(0,v.jsxs)("div",{className:"message his_message",children:[(0,v.jsxs)("div",{className:"identification",children:[(0,v.jsxs)(l.Z,{noWrap:!0,className:"name",children:[(0,h.$f)(t),"; ",null===s||void 0===s?void 0:s.codeclient]}),(0,v.jsxs)("div",{className:"footer",children:[(0,v.jsx)("p",{className:"time_to_send",children:Y()(a).fromNow()}),(0,v.jsx)(l.Z,{className:"reponsebtn",component:"p",onClick:()=>i(e.index),children:"Repondre"})]})]}),(0,v.jsx)("p",{className:"content content_his_message",children:n})]})},{socket:p}=s.useContext(o.E),[u,j]=s.useState();s.useEffect((()=>{null===p||void 0===p||p.on("message",(e=>{j(e)}))}),[p]),s.useEffect((()=>{u&&x([...d,u])}),[u]);const g=e=>{const{content:n,createdAt:t,plainte:s,lastMessage:a}=e.content;return(0,v.jsxs)("div",{className:"my_message message",children:[(0,v.jsxs)("div",{className:"identification",children:[(0,v.jsxs)(l.Z,{noWrap:!0,className:"name",children:["Moi; ",null===s||void 0===s?void 0:s.codeclient]}),(0,v.jsxs)("div",{className:"footer",children:[(0,v.jsx)("p",{className:"time_to_send",children:Y()(t).fromNow()}),(0,v.jsx)(l.Z,{onClick:()=>i(e.index),className:"reponsebtn",children:"Repondre"})]})]}),(0,v.jsx)(l.Z,{className:"lasMessage",children:a&&a.substr(0,20)+"..."}),(0,v.jsx)("p",{className:"content content_my_message",children:n})]})};return(0,v.jsx)("div",{id:"maincontent",children:(0,v.jsxs)("div",{className:"chat_container",children:[d&&a&&d.length>0&&d.map(((e,n)=>(0,v.jsx)(s.Fragment,{children:(null===e||void 0===e?void 0:e.agent)===a.nom?(0,v.jsx)(g,{content:e}):(0,v.jsx)(m,{index:e})},n))),t&&(0,v.jsx)("div",{className:"inputMessage",children:(0,v.jsxs)(c.Z,{sx:{padding:"5px"},className:"contentPaper",children:[(0,v.jsx)(l.Z,{component:"p",noWrap:!0,children:null===t||void 0===t?void 0:t.content}),(0,v.jsx)(D.Z,{onChange:e=>n(e.target.value),onKeyUp:s=>(async s=>{if(13===s.keyCode&&""!==e){const s={lastMessage:null===t||void 0===t?void 0:t.content,idPlainte:null===t||void 0===t?void 0:t.idPlainte,lastAgent:null===t||void 0===t?void 0:t.agent,content:e,type:"feedback"};if(200===(await Z.Z.post(h.mA+"/message",s,h.vc)).status)return n(""),void i()}})(s),fullWidth:!0,placeholder:"Message"})]})})]})})};function Ae(){const[e,n]=s.useState(),{setPlainteSelect:t,setSelect:l}=s.useContext(d.U);s.useEffect((()=>{(async()=>{try{const e=await Z.Z.get(h.mA+"/mybackoffice",h.vc);n(e.data)}catch(e){console.log(e)}})()}),[]);const a=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"statut",headerName:"Statut",width:100,editable:!1,renderCell:e=>(0,v.jsx)(je.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type Plainte",width:100,editable:!1},{field:"plainteSelect",headerName:"Plainte",width:150,editable:!1},{field:"dateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>Y()(e.row.dateSave).format("DD/MM")},{field:"sla",headerName:"Type",width:75,editable:!1,renderCell:e=>(0,v.jsx)(je.Z,{text:e.row.open?"Ouvert":"Fermer"})},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,v.jsx)(xe.Z,{size:"small",color:"primary",onClick:()=>{return n=e.row,t(n),void l(3);var n},children:e.row.message?e.row.message.length:(0,v.jsx)(ce.Z,{fontSize:"small"})})}];return(0,v.jsxs)(v.Fragment,{children:[!e&&(0,v.jsx)(he.Z,{width:400,height:400}),e&&0===e.length&&(0,v.jsx)("p",{style:{textAlign:"center",color:"blue",fontWeight:"bolder"},children:"No request"}),(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:8,children:e&&e.length>0&&(0,v.jsx)(c.Z,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},elevation:4,children:(0,v.jsxs)("div",{children:[" ",(0,v.jsx)(me._$,{rows:e,columns:a,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})]})})}),(0,v.jsx)(i.ZP,{item:!0,lg:4,sx:{paddingLeft:"10px"},children:(0,v.jsx)(c.Z,{elevation:4,sx:{padding:"10px"},children:(0,v.jsx)(ke,{})})})]})]})}const De=s.memo(Ae),Le=(0,w.Z)((0,v.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");var ze=t(649914),Te=t(241727);function We(){var e;const[n,t]=s.useState(""),a=(0,r.v9)((e=>e.user.user)),[o,d]=s.useState(),[x,m]=T.ZP.useMessage(),[p,u]=s.useState(!1),j=async e=>{e.preventDefault(),u(!0),d();const t=await Z.Z.get(h.mA+"/onecomplaint/"+n,h.vc);var s,i;200===t.status?(d(t.data[0]),u(!1)):(s=""+t.data,i="error",x.open({type:i,content:""+s,duration:5}),u(!1))};return(0,v.jsxs)(v.Fragment,{children:[m,p&&(0,v.jsx)(z.Z,{open:!0,title:"Please wait...",taille:"10rem"}),(0,v.jsx)(c.Z,{elevation:2,sx:{padding:"10px"},children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:8,children:(0,v.jsx)(te.Z,{sx:{width:"100%"},children:(0,v.jsx)(ze.Z,{size:"small",id:"header-search",startAdornment:(0,v.jsx)(Te.Z,{position:"start",sx:{mr:-.5},children:(0,v.jsx)(Le,{})}),"aria-describedby":"header-search-text",inputProps:{"aria-label":"weight"},value:n,onChange:e=>t(e.target.value),placeholder:"ID Complaint"})})}),(0,v.jsx)(i.ZP,{item:!0,lg:2,sx:{paddingLeft:"10px"},children:(0,v.jsxs)(f.Z,{onClick:e=>j(e),variant:"contained",color:"primary",children:[(0,v.jsx)(S.Z,{fontSize:"small"})," Recherche"]})})]})}),o&&(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsxs)(i.ZP,{item:!0,lg:7,xs:12,sm:4,md:4,children:[(0,v.jsx)(ye,{plainteSelect:o}),(0,v.jsx)(c.Z,{sx:{padding:"10px",marginTop:"4px"},children:o&&(null===o||void 0===o||null===(e=o.resultat)||void 0===e?void 0:e.length)>0&&(null===o||void 0===o?void 0:o.resultat.map((e=>(0,v.jsx)("div",{className:"resultat",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"last_status : "}),null===e||void 0===e?void 0:e.laststatus]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"change_to : "}),null===e||void 0===e?void 0:e.changeto]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Do_by : "}),null===e||void 0===e?void 0:e.nomAgent]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"SLA : "}),null===e||void 0===e?void 0:e.delai]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Comment : "}),null===e||void 0===e?void 0:e.commentaire]}),(0,v.jsxs)("p",{children:[(0,v.jsx)("span",{children:"Date : "}),Y()(null===e||void 0===e?void 0:e.fullDate).format("DD/MM/YYYY hh:mm")]})]})},e._id))))})]}),(0,v.jsx)(i.ZP,{item:!0,lg:5,children:(0,v.jsx)("div",{children:(null===o||void 0===o?void 0:o.message)&&(null===o||void 0===o?void 0:o.message.map((e=>(0,v.jsx)(c.Z,{elevation:2,className:"papierConv",children:(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,lg:2,className:"userP",children:(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{noWrap:!0,component:"p",children:e.agent===a.nom?"Moi":(0,h.$f)(e.agent)})})}),(0,v.jsxs)(i.ZP,{item:!0,lg:10,className:"body_content",children:[(0,v.jsx)("p",{children:e.content}),(0,v.jsx)("p",{style:{fontSize:"10px"},children:Y()(e.createdAt).fromNow()})]})]})},e._id))))})})]})]})}const Ie=s.memo(We);var Oe=t(504438),Ee=t(588724);function Me(){const[e,n]=s.useState(),{client:t}=s.useContext(o.E);s.useEffect((()=>{t&&n(t.filter((e=>"ticket"===e.type)))}),[t]);const[d,m]=s.useState({attente:[],encours:[],callcenter:[]}),{attente:j,encours:g,callcenter:f}=d;s.useEffect((()=>{e&&m({attente:e.filter((e=>void 0===e.technicien)),encours:e.filter((e=>"Open_technician_visit"===e.statut&&void 0!==e.technicien)),callcenter:e.filter((e=>"resolved_awaiting_confirmation"===e.statut))})}),[e]);const[y,N]=s.useState();function S(e){return 60*(e.time_delai-(0,h.h$)(e.fullDateSave,new Date).toFixed(0))<=0?"OUT SLA":"IN SLA"}s.useEffect((()=>{if(e){const n=e.filter((e=>"Open_technician_visit"===e.statut&&void 0!==e.technicien)),t=Object.keys(p().groupBy(n,"technicien.codeTech"));let s=[];t.forEach((e=>{s.push({code:e,result:n.filter((n=>n.technicien.codeTech===e)),taille:n.filter((n=>n.technicien.codeTech===e)).length})})),s.sort(((e,n)=>n.taille-e.taille)),N(s)}}),[e]);const C=(n,t,s)=>{if("attente"===t){const t=(s||e).filter((e=>void 0===e.technicien));let i=0,l=0;for(let e=0;e<t.length;e++)S(t[e])===n&&(i+=1);return l=100*i/t.length,isNaN(l)?"0%":l.toFixed(0)+"%"}if("encours"===t){const t=(s||e).filter((e=>"Open_technician_visit"===e.statut&&void 0!==e.technicien));let i=0,l=0;for(let e=0;e<t.length;e++)S(t[e])===n&&(i+=1);return l=100*i/t.length,isNaN(l)?"0%":l.toFixed(0)+"%"}if("callcenter"===t){const t=(s||e).filter((e=>"resolved_awaiting_confirmation"===e.statut));let i=0,l=0;for(let e=0;e<t.length;e++)S(t[e])===n&&(i+=1);return l=100*i/t.length,l.toFixed(0)+"%"}},w=(0,u.s0)(),b=(e,n)=>{e.preventDefault(),w("/tech_value",{state:{statut:"",state:n}})},P=(0,r.v9)((e=>{var n;return null===(n=e.agent)||void 0===n?void 0:n.agent})),_=e=>{var n;return P?null===(n=p().filter(P,{codeAgent:e})[0])||void 0===n?void 0:n.nom:e},[k,A]=s.useState();return s.useEffect((()=>{(async()=>{try{const e=await Z.Z.get(h.mA+"/mydeedline/issue",h.vc);200===e.status&&A(e.data)}catch(e){console.log(e)}})()}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.ZP,{container:!0,children:[!e&&(0,v.jsx)(he.Z,{width:300,height:300}),e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.ZP,{item:!0,lg:3,xs:12,sm:6,md:4,sx:{padding:"2px"},children:(0,v.jsxs)(c.Z,{onClick:e=>b(e,"technicien"),elevation:3,sx:Re.paper,children:[(0,v.jsxs)(l.Z,{component:"p",sx:Re.padding0,children:["Open_technician_visit",(0,v.jsx)(l.Z,{component:"span",sx:{fontSize:"11px",cursor:"pointer",color:"blue",fontWeight:"bolder"},children:" D\xe9tails"})]}),(0,v.jsx)("div",{className:"Unaffected",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_title",children:"Unaffected"}),(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_number",children:j.length})]})}),e&&e.length>0&&(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("OUT SLA","attente")})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("IN SLA","attente")})]})]})]})}),(0,v.jsx)(i.ZP,{item:!0,lg:3,xs:12,sm:6,md:4,sx:{padding:"2px"},children:(0,v.jsxs)(c.Z,{onClick:e=>b(e,"encours"),elevation:3,sx:Re.paper,children:[(0,v.jsxs)(l.Z,{component:"p",sx:Re.padding0,children:["Running"," ",(0,v.jsx)(l.Z,{component:"span",sx:{fontSize:"11px",cursor:"pointer",color:"blue",fontWeight:"bolder"},children:" D\xe9tails"})]}),(0,v.jsx)("div",{className:"Unaffected",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_title",children:"Running"}),(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_number",children:g.length})]})}),e&&e.length>0&&(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("OUT SLA","encours")})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("IN SLA","encours")})]})]})]})}),(0,v.jsx)(i.ZP,{item:!0,lg:3,xs:12,sm:6,md:4,sx:{padding:"2px"},children:(0,v.jsxs)(c.Z,{onClick:e=>b(e,"callcenter"),elevation:3,sx:Re.paper,children:[(0,v.jsxs)(l.Z,{component:"p",sx:Re.padding0,children:["Resolved_awaiting_confirmation",(0,v.jsx)(l.Z,{component:"span",sx:{fontSize:"11px",cursor:"pointer",color:"blue",fontWeight:"bolder"},children:"D\xe9tails"})]}),(0,v.jsx)("div",{className:"Unaffected",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_title",children:"Waiting at CC"}),(0,v.jsx)(l.Z,{component:"p",className:"Unaffected_number",children:f.length})]})}),e&&e.length>0&&(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("OUT SLA","callcenter")})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success"}),(0,v.jsx)("p",{style:{padding:"0px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("IN SLA","callcenter")})]})]})]})})]}),(0,v.jsx)(i.ZP,{item:!0,lg:3,xs:12,sm:6,md:4,sx:{padding:"2px",minHeight:200},children:(0,v.jsxs)(c.Z,{elevation:3,sx:Re.paper,children:[(0,v.jsx)(l.Z,{component:"p",sx:Re.padding0,children:"My Percentage on time for this month"}),(0,v.jsx)(l.Z,{sx:{textAlign:"center"},component:"p",className:"Unaffected_title",children:"Technical issues"}),k?(0,v.jsx)(Ee.Z,{nombre:k,texte:"IN SLA"}):(0,v.jsx)("div",{style:{display:"flex",minHeight:150,alignItems:"center",justifyContent:"center"},children:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,v.jsx)(a.Z,{sx:{textAlign:"center"},size:25})}),(0,v.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:"Loading..."})]})})]})})]}),(0,v.jsx)(c.Z,{elevation:2,sx:{padding:"10px",margin:"10px"},children:(0,v.jsx)("p",{style:{padding:"0px",margin:"0px"},children:"Technician with more intervention waiting"})}),(0,v.jsx)(i.ZP,{container:!0,children:y&&y.map((e=>(0,v.jsx)(i.ZP,{item:!0,lg:3,xs:6,sm:4,md:4,sx:{padding:"2px"},children:(0,v.jsxs)(c.Z,{className:"paperNumber",onClick:n=>b(n,e.code),sx:{cursor:"pointer",padding:"5px"},children:[(0,v.jsx)(l.Z,{sx:Re.name,noWrap:!0,children:_(e.code)}),(0,v.jsx)(l.Z,{sx:Re.code,noWrap:!0,children:e.code}),(0,v.jsx)(l.Z,{sx:Re.number,className:"numberTech",noWrap:!0,children:e.result.length}),(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"error",size:5}),(0,v.jsx)("p",{style:{padding:"0px",fontSize:"10px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("OUT SLA","encours",e.result)})]}),(0,v.jsxs)("div",{style:{display:"flex",marginLeft:"20px",alignItems:"center",justifyContent:"center"},children:[(0,v.jsx)(x.Z,{color:"success",size:5}),(0,v.jsx)("p",{style:{padding:"0px",fontSize:"10px",margin:"0px",marginLeft:"5px",fontWeight:"bolder"},children:C("IN SLA","encours",e.result)})]})]})]})},e.code)))})]})}const Re={padding0:{padding:"0px",margin:"0px",textAlign:"center"},name:{textAlign:"center",fontWeight:"bolder",fontSize:"10px"},code:{textAlign:"center",fontSize:"10px"},number:{textAlign:"center",fontWeight:"bolder",fontSize:"20px"},paper:{padding:"10px",height:"100%"},subTitle:{padding:"0px",margin:"0px",textAlign:"center",fontSize:"10px"},view:{textAlign:"right",padding:"0px",margin:"0px",fontSize:"10px",cursor:"pointer",color:"blue",fontWeight:"bolder"}},Ue=s.memo(Me);function Fe(){const{select:e,setSelect:n,annuler:t}=s.useContext(d.U),{client:c}=s.useContext(o.E),x=(0,r.v9)((e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user})),[m,p]=s.useState();return s.useEffect((()=>{x.plainte_callcenter&&p("callcenter"),x.plainteShop&&p("shop")}),[x]),(0,v.jsxs)(i.ZP,{children:[(0,v.jsxs)(i.ZP,{className:"divAppel",component:"div",children:[(0,v.jsx)(i.ZP,{onClick:()=>{t(),n(7)},className:`${7===e&&"select"} titres`,children:(0,v.jsx)("p",{children:"Dashboard"})}),x&&(x.plainte_callcenter||x.plainteShop)&&(0,v.jsx)(i.ZP,{onClick:()=>{t(),n(1)},className:`${1===e&&"select"} titres`,children:(0,v.jsx)("p",{children:"Create one"})}),(0,v.jsxs)(i.ZP,{onClick:()=>{t(),n(0)},className:`${0===e&&"select"} titres`,sx:{width:"10rem"},children:[(0,v.jsx)(l.Z,{component:"p",noWrap:!0,children:"No technical Issues"}),(0,v.jsxs)(l.Z,{component:"p",className:"nbre",children:[c&&c.length>0&&c.filter((e=>"appel"===e.type&&"escalade"!==e.statut)).length,c&&0===c.length&&(0,v.jsx)(a.Z,{size:10})]})]}),(0,v.jsxs)(i.ZP,{onClick:()=>{t(),n(5)},className:`${5===e&&"select"} titres`,sx:{width:"10rem"},children:[(0,v.jsx)(l.Z,{component:"p",noWrap:!0,children:"Technical Issues"}),(0,v.jsxs)(l.Z,{component:"p",className:"nbre",children:[c&&c.length>0&&c.filter((e=>"ticket"===e.type)).length,c&&0==c.length&&(0,v.jsx)(a.Z,{size:10})]})]}),x.backOffice_plainte&&(0,v.jsxs)(i.ZP,{onClick:()=>{t(),n(2)},className:`${2===e&&"select"} titres`,children:[(0,v.jsx)(l.Z,{component:"p",children:"Back office"}),(0,v.jsxs)(l.Z,{component:"p",className:"nbre",children:[c&&c.length>0&&c.filter((e=>"backoffice"===(null===e||void 0===e?void 0:e.operation))).length,c&&0==c.length&&(0,v.jsx)(a.Z,{size:10})]})]}),!x.backOffice_plainte&&(0,v.jsx)(i.ZP,{onClick:()=>{t(),n(8)},className:`${8===e&&"select"} titres`,children:(0,v.jsx)(l.Z,{component:"p",children:"Back office"})}),("co"===x.fonction||"superUser"===x.fonction)&&(0,v.jsxs)(i.ZP,{onClick:()=>{t(),n(4)},className:`${4===e&&"select"} titres`,children:[(0,v.jsx)(l.Z,{component:"p",children:"Relocation"}),(0,v.jsxs)(l.Z,{component:"p",className:"nbre",children:[c&&c.length>0&&c.filter((e=>"awaiting_confirmation"===(null===e||void 0===e?void 0:e.statut))).length,c&&0===c.length&&(0,v.jsx)(a.Z,{size:10,color:"inherit"})]})]}),(0,v.jsx)(i.ZP,{onClick:()=>{t(),n(9)},className:`${9===e&&"select"} titres`,children:(0,v.jsx)(l.Z,{component:"p",children:"Search"})})]}),0===e&&(0,v.jsx)(Oe.Z,{}),1===e&&m&&(0,v.jsx)(de,{property:m}),2===e&&(0,v.jsx)(fe,{}),3===e&&(0,v.jsx)(Se,{}),4===e&&(0,v.jsx)(_e,{}),5===e&&(0,v.jsx)(Ue,{}),6===e&&(0,v.jsx)(N,{}),7===e&&(0,v.jsx)(g,{}),8===e&&(0,v.jsx)(De,{}),9===e&&(0,v.jsx)(Ie,{})]})}const Be=s.memo(Fe);function $e(){return(0,v.jsx)(d.Z,{children:(0,v.jsx)(Be,{})})}const Ye=s.memo($e)},116429:(e,n,t)=>{t.d(n,{Z:()=>u});var s=t(747313),i=t(683061),l=t(608007),a=t(617592),o=t(577342),r=t(814363),d=t(601167);function c(e){return(0,d.ZP)("MuiFormGroup",e)}(0,r.Z)("MuiFormGroup",["root","row","error"]);var x=t(799008),m=t(880300),p=t(346417);const h=(0,a.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.row&&n.row]}})((e=>{let{ownerState:n}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",...n.row&&{flexDirection:"row"}}})),u=s.forwardRef((function(e,n){const t=(0,o.Z)({props:e,name:"MuiFormGroup"}),{className:s,row:a=!1,...r}=t,d=(0,x.Z)(),u=(0,m.Z)({props:t,muiFormControl:d,states:["error"]}),v={...t,row:a,error:u.error},j=(e=>{const{classes:n,row:t,error:s}=e,i={root:["root",t&&"row",s&&"error"]};return(0,l.Z)(i,c,n)})(v);return(0,p.jsx)(h,{className:(0,i.Z)(j.root,s),ownerState:v,ref:n,...r})}))}}]);