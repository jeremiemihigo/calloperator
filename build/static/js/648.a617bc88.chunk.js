"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[648],{803105:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(876767),l=i(648623),a=i(624631),s=i(346417);const o=(0,n.D)();const d=function(e){let{value:t,setValue:i,options:n,title:d,propr:r}=e;return(0,s.jsx)(l.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?i({title:t}):t&&t.inputValue?i({title:t.inputValue}):i(t)},filterOptions:(e,t)=>o(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with",options:n,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+r],renderOption:(e,t)=>(0,s.jsx)("li",{...e,children:t[""+r]},t.id),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,s.jsx)(a.Z,{...e,label:d||"Titre"})})}},350723:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(91554),l=i(270501),a=i(585281),s=i(346417);const o=function(e){let{open:t,title:i,taille:o}=e;return(0,s.jsx)(n.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+100},open:t,children:(0,s.jsx)(l.Z,{sx:{width:o||"7rem",display:"flex",padding:"10px",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(a.Z,{size:15,color:"primary"}),(0,s.jsx)("p",{style:{fontSize:"12px"},children:i||"Laading..."})]})})})}},905532:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(966149),l=i(896467),a=i(261113),s=i(404117),o=i(576940),d=i(346417);function r(e){const{confirmDialog:t,setConfirmDialog:i}=e;return(0,d.jsxs)(n.Z,{open:t.isOpen,sx:c.dialog,children:[(0,d.jsxs)(l.Z,{sx:c.contentDialog,children:[(0,d.jsx)(a.Z,{variant:"h6",children:t.title}),(0,d.jsx)(a.Z,{variant:"subtitle2",children:t.subTitle})]}),(0,d.jsxs)(s.Z,{sx:c.contentButton,children:[(0,d.jsx)(o.ZP,{type:"primary",onClick:t.onConfirm,children:"Yes"}),(0,d.jsx)(o.ZP,{type:"primary",danger:!0,onClick:()=>i({...t,isOpen:!1}),children:"No"})]})]})}const c={dialog:{padding:"5px",position:"absolute",top:"5px"},contentDialog:{textAlign:"center",width:"20rem"},contentButton:{justifyContent:"center"}}},952122:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(301550),l=i(649914),a=i(241727),s=i(728288),o=i(346417);const d=e=>{let{label:t,setValue:i,value:d,showIcon:r}=e;return(0,o.jsx)(n.Z,{sx:{width:"100%"},children:(0,o.jsx)(l.Z,{size:"small",id:"header-search",startAdornment:(0,o.jsx)(a.Z,{position:"start",sx:{mr:-.5},children:r&&(0,o.jsx)(s.Z,{})}),"aria-describedby":"header-search-text",inputProps:{"aria-label":"weight"},value:d,onChange:e=>i(e.target.value),placeholder:t})})}},249555:(e,t,i)=>{i.d(t,{Z:()=>a});const n=i.p+"static/media/loader.a8e321df755614ca01e3.gif";var l=i(346417);const a=function(e){let{width:t,height:i}=e;return(0,l.jsx)("div",{style:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginTop:"30px"},children:(0,l.jsx)("img",{width:t,height:i,src:n,alt:"Loading"})})}},878375:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(557829),l=i(319860),a=i(346417);const s=e=>{let{text:t,taille:i,...s}=e;const o=(0,l.Z)();let d;switch(t){case"OUT SLA":case"Ouvert":case"Complaint to close":d=o.palette.warning.main;break;case"IN SLA":d=o.palette.info.main;break;case"Fermer":case"closed":case"resolved":d=o.palette.success.main;break;default:d=o.palette.secondary.main}return(0,a.jsx)(n.Z,{sx:{width:"100%",height:"50%",textAlign:"center",color:"white",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",bgcolor:d,fontSize:i||12},...s,children:t&&(r=t,r.charAt(0).toUpperCase()+r.slice(1))});var r}},204333:(e,t,i)=>{i.r(t),i.d(t,{default:()=>lt});var n=i(747313),l=i(809019),a=i(261113),s=i(435593),o=i(594500),d=i(585281),r=i(346417);const c=(0,n.createContext)(),u=e=>{const[t,i]=n.useState(7),[l,a]=n.useState(),[s,o]=n.useState(),[d,u]=n.useState({appel:[],info:[],ticket:[]}),[p,m]=n.useState(""),[h,x]=n.useState(""),[v,j]=n.useState(""),[g,f]=n.useState(""),[Z,y]=n.useState({recommandation:"",nomClient:"",contact:""}),[w,C]=n.useState("");return(0,r.jsx)(c.Provider,{value:{select:t,setSelect:i,plainteSelect:l,setPlainteSelect:a,adresse:s,setAdresse:o,historique:d,setHistorique:u,codeclient:p,setCodeclient:m,shopSelect:h,setShopSelect:x,initiale:Z,setInitiale:y,item:w,setItem:C,otherItem:v,setOtherItem:j,annuler:()=>{y({recommandation:"",nomClient:"",contact:""}),x(""),j(""),m(""),o(),a(),C(""),i(7),u({appel:[],info:[],ticket:[]})},setRaisonOngoing:f,raisonOngoing:g},children:e.children})},p=n.memo(u);var m=i(270501),h=i(416031),x=i.n(h),v=i(661395);const j=function(){const{client:e}=n.useContext(s.E),[t,i]=n.useState(),[o,d]=n.useState();return n.useEffect((()=>{i(x().groupBy(e,"statut")),d(Object.keys(x().groupBy(e,"statut")))}),[e]),(0,r.jsx)(l.ZP,{container:!0,children:o&&o.map((e=>(0,r.jsx)(l.ZP,{item:!0,lg:4,xs:12,sm:12,md:6,children:(0,r.jsxs)(m.Z,{sx:{padding:"5px",margin:"3px"},elevation:2,children:[(0,r.jsx)(a.Z,{noWrap:!0,sx:{textAlign:"center"},children:(0,v.fm)(e)}),(0,r.jsx)(a.Z,{noWrap:!0,sx:{textAlign:"center",fontSize:"20px",fontWeight:"bolder"},children:t&&t[""+e].length})]})},e)))})};var g=i(369099),f=i(835662);const Z=function(){var e,t,i,d,u,p,h,x,j,Z;const{setClient:y,client:w}=n.useContext(s.E),{plainteSelect:C,setSelect:S}=n.useContext(c),b=(0,o.v9)((e=>e.delai.delai)),[N,D]=n.useState({datetime:new Date,day_of_week:(new Date).getDay()});n.useEffect((()=>{!async function(){try{const e=await fetch("http://worldtimeapi.org/api/timezone/Africa/Lubumbashi",{method:"GET"});if(!e.ok)throw new Error("Response status: ".concat(e.status));const t=await e.json();D(t)}catch(e){console.error(e.message)}}()}),[]);const P=async e=>{e.preventDefault();try{const e=await(async(e,t)=>{if(b&&t){const a=_.filter(b,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("Open_technician_visit",N),t={ticket:C.idPlainte,fullDate:null===N||void 0===N?void 0:N.datetime,time_delai:e,delai:C.time_delai-(0,v.h$)(C.fullDateSave,null===N||void 0===N?void 0:N.datetime)>0?"IN SLA":"OUT SLA"},i=await f.Z.post(v.mA+"/create_ticket",t,v.vc);200===i.status&&(y(w.map((e=>e._id===i.data._id?i.data:e))),S(5))}catch(t){console.log(t)}};return(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:8,xs:12,sm:4,md:4,children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(l.ZP,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff"},children:(0,r.jsx)(a.Z,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:null===C||void 0===C?void 0:C.nomClient})}),(0,r.jsx)(l.ZP,{sx:{padding:"5px"},children:(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Ticket number"}),(0,r.jsx)(a.Z,{className:"values",children:C.idPlainte})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Type Complaint"}),(0,r.jsx)(a.Z,{className:"values",children:C.typePlainte})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"ID"}),(0,r.jsx)(a.Z,{className:"values",children:C.codeclient})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Contact"}),(0,r.jsx)(a.Z,{className:"values",children:null===C||void 0===C?void 0:C.contact})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"type of intervention"}),(0,r.jsx)(a.Z,{className:"values",children:C.plainteSelect})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Comment"}),(0,r.jsx)(a.Z,{className:"values",children:C.recommandation})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Shop"}),(0,r.jsx)(a.Z,{className:"values",children:null===C||void 0===C?void 0:C.shop})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"openBy"}),(0,r.jsx)(a.Z,{className:"values",children:null===C||void 0===C?void 0:C.submitedBy})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:6,md:6,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Status"}),(0,r.jsx)(a.Z,{className:"values",children:(0,v.fm)(null===C||void 0===C?void 0:C.statut)})]})]})})]})}),(0,r.jsx)(l.ZP,{item:!0,lg:4,children:(0,r.jsxs)(m.Z,{sx:{padding:"10px",marginLeft:"5px"},children:[null!==C&&void 0!==C&&C.adresse?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Adresses"}),(0,r.jsxs)("p",{style:{padding:"0px",margin:"0px 0px"},children:["Commune : ",null===C||void 0===C||null===(e=C.adresse)||void 0===e?void 0:e.commune]}),(0,r.jsxs)("p",{style:{padding:"0px",margin:"10px 0px"},children:["Quartier : ",null===C||void 0===C||null===(t=C.adresse)||void 0===t?void 0:t.quartier]}),(0,r.jsxs)("p",{style:{padding:"0px",margin:"0px"},children:["Avenue : ",null===C||void 0===C||null===(i=C.adresse)||void 0===i?void 0:i.avenue]}),(0,r.jsxs)("p",{style:{padding:"0px",margin:"10px 0px"},children:["SAT : ",null===C||void 0===C||null===(d=C.adresse)||void 0===d||null===(u=d.sat)||void 0===u?void 0:u.nom_SAT,"/ ",null===C||void 0===C||null===(p=C.adresse)||void 0===p||null===(h=p.sat)||void 0===h?void 0:h.region,"/ ",null===C||void 0===C||null===(x=C.adresse)||void 0===x||null===(j=x.sat)||void 0===j?void 0:j.shop]}),(0,r.jsxs)("p",{style:{padding:"0px",margin:"0px"},children:["Reference : ",null===C||void 0===C||null===(Z=C.adresse)||void 0===Z?void 0:Z.reference]})]}):(0,r.jsx)("p",{children:"No address"}),(0,r.jsx)(g.Z,{disabled:!N,onClick:e=>P(e),variant:"contained",color:"primary",fullWidth:!0,children:N?"Create":"Please wait"})]})})]})};var y=i(435045),w=i(181171);const C=(0,w.Z)((0,r.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done"),S=(0,w.Z)((0,r.jsx)("path",{d:"M20.19 4H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.81-2-1.81-2zm-2.46 9.3-8.86 2.36-1.66-2.88.93-.25 1.26.99 2.39-.64-2.4-4.16 1.4-.38 4.01 3.74 2.44-.65c.51-.14 1.04.17 1.18.68.13.51-.17 1.04-.69 1.19z"}),"AirplaneTicket"),b=(0,w.Z)((0,r.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll"),N=(0,w.Z)((0,r.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause"),D=(0,w.Z)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 6h-1.7l-5 9H7c-.83 0-1.5-.67-1.5-1.5S6.17 15 7 15h1.7l5-9H17c.83 0 1.5.67 1.5 1.5S17.83 9 17 9z"}),"Escalator");var P=i(91554),k=i(861689),A=i(624631),T=i(803105),z=i(396180),R=i(952122),M=i(70816),E=i.n(M),I=i(334811);function L(e){let{setOpen:t}=e;const{adresse:i,setAdresse:l}=n.useContext(c),[a,s]=n.useState(""),[d,u]=n.useState(""),p=(0,o.v9)((e=>{var t;return null===(t=e.shop)||void 0===t?void 0:t.shop})),m=e=>{const{name:t,value:n}=e.target;l({...i,[t]:n})};return(0,r.jsxs)("div",{style:{width:"20rem"},children:[(0,r.jsx)("div",{style:{marginTop:"10px"},children:p&&(0,r.jsx)(T.Z,{value:d,setValue:u,options:p,title:"New customer shop",propr:"shop"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"commune",autoComplete:"off",fullWidth:!0,label:"Commune",value:null===i||void 0===i?void 0:i.commune})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"quartier",autoComplete:"off",value:null===i||void 0===i?void 0:i.quartier,fullWidth:!0,label:"Quartier"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"avenue",value:null===i||void 0===i?void 0:i.avenue,autoComplete:"off",fullWidth:!0,label:"avenue"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>m(e),style:{marginTop:"10px"},name:"reference",autoComplete:"off",fullWidth:!0,value:null===i||void 0===i?void 0:i.reference,label:"Reference"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(T.Z,{value:a,setValue:s,options:v.gm,title:"Sat",propr:"nom_SAT"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(g.Z,{onClick:e=>(e=>{e.preventDefault(),l({...i,sat:a,shop:null===d||void 0===d?void 0:d.shop}),t(!1)})(e),fullWidth:!0,variant:"contained",color:"secondary",children:(0,r.jsx)(C,{fontSize:"small"})})})]})}const O=n.memo(L);var W=i(966149),B=i(896467),F=i(404117),H=i(576940);function V(e){const{confirmDialog:t}=e,{onConfirm:i}=t,n="7rem";return(0,r.jsxs)(W.Z,{open:t.isOpen,sx:Y.dialog,children:[(0,r.jsx)(B.Z,{style:Y.contentDialog,children:(0,r.jsx)(a.Z,{variant:"h6",children:t.title})}),(0,r.jsxs)(F.Z,{sx:Y.contentButton,children:[(0,r.jsx)(H.ZP,{style:{width:n},type:"primary",onClick:()=>i("hight"),children:"Hight"}),(0,r.jsx)(H.ZP,{style:{width:n},type:"primary",danger:!0,onClick:()=>i("moyenne"),children:"Moyenne"}),(0,r.jsx)(H.ZP,{style:{width:n},type:"primary",danger:!0,onClick:()=>i("low"),children:"Low"})]})]})}const Y={dialog:{padding:"5px",position:"absolute",top:"5px"},contentDialog:{textAlign:"center",width:"20rem"},contentButton:{justifyContent:"center"}};var q=i(644758);const U=function(e){let{data:t,liste:i,setListe:s}=e;const{tableother:o,oneormany:d}=t,{otherItem:u,setOtherItem:p}=n.useContext(c);return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:o.length>0&&!d&&(0,r.jsx)(T.Z,{value:u,setValue:p,options:o,title:"Probleme",propr:"title"})}),d&&(0,r.jsx)(l.ZP,{container:!0,children:o.map(((e,t)=>(0,r.jsx)(l.ZP,{item:!0,lg:6,children:(0,r.jsxs)(a.Z,{onClick:()=>{return t=e.title,void(i.includes(t)?s(i.filter((e=>e!==t))):s([...i,t]));var t},component:"span",style:{cursor:"pointer"},children:[(0,r.jsx)(q.Z,{checked:i.includes(e.title)}),(0,r.jsx)("span",{children:e.title})]})},t)))})]})};const G=function(){const{item:e,plainteSelect:t,annuler:i,initiale:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(),[p,m]=n.useState(""),[h,x]=n.useState(!1),[j,Z]=n.useState(new Date),y=(0,o.v9)((e=>e.delai.delai)),[w,C]=z.ZP.useMessage(),S=(e,t)=>{w.open({type:t,content:""+e,duration:10})},b=async n=>{n.preventDefault();try{x(!0);const n=new FormData,o=await(async(e,t)=>{if(y&&t){const a=_.filter(y,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("escalade",j);n.append("raison",p),n.append("fullDate",j),n.append("codeclient",s),n.append("shop",null===a||void 0===a?void 0:a.shop),n.append("property","shop"),n.append("contact",null===l||void 0===l?void 0:l.contact),n.append("nomClient",null===l||void 0===l?void 0:l.nomClient),n.append("plainteSelect",null===t||void 0===t?void 0:t.title),n.append("typePlainte",null===e||void 0===e?void 0:e.title),n.append("time_delai",o),n.append("file",d);const r=await f.Z.post(v.mA+"/desengagement",n,v.vc);200===r.status?(i(),S("Done","success"),x(!1)):(S(""+r.data,"error"),x(!1))}catch(o){"ERR_NETWORK"===o.code&&S(o.message,"error")}};return n.useEffect((()=>{(async()=>{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");200===e.status&&Z(e.data.datetime)})()}),[t]),(0,r.jsxs)("div",{style:{width:"20rem"},children:[C,(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{onChange:e=>m(e.target.value),style:{marginTop:"10px"},name:"contact",autoComplete:"off",fullWidth:!0,label:"Raison de d\xe9sengagement"})}),(0,r.jsxs)("div",{style:{margin:"10px 0px"},className:"click",children:[(0,r.jsx)("input",{type:"file",id:"actual-btn",accept:".pdf",hidden:!0,onChange:e=>{const t=e.target.files[0];u(t)}}),(0,r.jsx)("label",{className:"label",htmlFor:"actual-btn",children:null!==d&&void 0!==d&&d.name?null===d||void 0===d?void 0:d.name:"Clic here to choose file (contrat)"})]}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:h,onClick:e=>b(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};const Q=function(){const{item:e,plainteSelect:t,initiale:i,annuler:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(),[p,m]=n.useState(!1),[h,x]=n.useState(new Date);n.useEffect((()=>{(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");x(e.data)}catch(e){console.log(e)}})()}),[i]);const j=(0,o.v9)((e=>e.delai.delai)),[Z,y]=z.ZP.useMessage(),w=(e,t)=>{Z.open({type:t,content:""+e,duration:10})},C=async n=>{n.preventDefault();try{m(!0);const n=null!==h&&void 0!==h&&h.datetime?h.datetime:h,o=await(async(e,t)=>{if(j&&t){const a=_.filter(j,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("escalade",n),r={codeclient:s,shop:null===a||void 0===a?void 0:a.shop,property:"shop",contact:null===i||void 0===i?void 0:i.contact,nomClient:null===i||void 0===i?void 0:i.nomClient,plainteSelect:null===t||void 0===t?void 0:t.title,typePlainte:null===e||void 0===e?void 0:e.title,time_delai:o,fullDate:n,num_synchro:null===d||void 0===d?void 0:d.num_synchro,kit:null===d||void 0===d?void 0:d.kit},c=await f.Z.post(v.mA+"/downgrade",r,v.vc);200===c.status?(w("Done","success"),l(),m(!1)):(w(""+c.data,"error"),m(!1))}catch(o){"ERR_NETWORK"===o.code&&w(o.message,"error")}};return(0,r.jsxs)("div",{style:{width:"20rem"},children:[y,(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,kit:e.target.value}),name:"kit",autoComplete:"off",fullWidth:!0,label:"kit downgrad\xe9"})}),(0,r.jsx)("div",{style:{margin:"10px 0px"},children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,num_synchro:e.target.value}),name:"num",autoComplete:"off",fullWidth:!0,label:"num\xe9ro synchro"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:p,onClick:e=>C(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};var $=i(808425);const K=function(){const[e,t]=n.useState(""),[i,l]=n.useState(""),[o,d]=n.useState(),{item:u,plainteSelect:p,annuler:m,initiale:h,shopSelect:x,codeclient:j}=n.useContext(c),{client:Z,setClient:y}=n.useContext(s.E),[w,C]=n.useState({datetime:new Date,day_of_week:(new Date).getDay()});n.useEffect((()=>{(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");C(e.data)}catch(e){console.log(e)}})()}),[h]);const S=e=>{const{name:t,value:i}=e.target;d({...o,[t]:i})},b=e=>{d(""),t(e)},[N,_]=z.ZP.useMessage(),D=async e=>{e.preventDefault();try{const e=await(0,v.zL)("escalade",w.datetime),n={codeclient:j,shop:null===x||void 0===x?void 0:x.shop,property:"shop",contact:null===h||void 0===h?void 0:h.contact,nomClient:null===h||void 0===h?void 0:h.nomClient,plainteSelect:null===p||void 0===p?void 0:p.title,typePlainte:null===u||void 0===u?void 0:u.title,time_delai:e,adresse:o,fullDate:w.datetime},l=await f.Z.post(v.mA+"/info_client",n,v.vc);200===l.status?(y([l.data,...Z]),m()):(t=""+l.data,i="error",N.open({type:i,content:""+t,duration:10}))}catch(n){console.log(n)}var t,i};return(0,r.jsxs)("div",{style:{width:"25rem"},children:[_,(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsxs)(a.Z,{onClick:()=>b("contact"),component:"span",style:{cursor:"pointer"},children:[(0,r.jsx)(q.Z,{checked:"contact"==e}),(0,r.jsx)("label",{htmlFor:"contact",children:"Contact"})]}),(0,r.jsxs)(a.Z,{onClick:()=>b("adresse"),component:"span",style:{cursor:"pointer",marginLeft:"20px"},children:[(0,r.jsx)(q.Z,{checked:"adresse"==e}),(0,r.jsx)("label",{htmlFor:"adresse",children:"Adresses"})]})]}),"contact"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>S(e),name:"contact",autoComplete:"off",fullWidth:!0,label:"Customer Contact"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsxs)(g.Z,{onClick:e=>D(e),fullWidth:!0,variant:"contained",color:"primary",children:[(0,r.jsx)($.Z,{fontSize:"small"})," ",(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Escalader"})]})})]}),"adresse"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>S(e),style:{marginTop:"10px"},name:"commune",autoComplete:"off",fullWidth:!0,label:"Commune"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>S(e),style:{marginTop:"10px"},name:"quartier",autoComplete:"off",fullWidth:!0,label:"Quartier"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>S(e),style:{marginTop:"10px"},name:"avenue",autoComplete:"off",fullWidth:!0,label:"avenue"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>S(e),style:{marginTop:"10px"},name:"reference",autoComplete:"off",fullWidth:!0,label:"Reference"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(T.Z,{value:i,setValue:l,options:v.gm,title:"Sat",propr:"nom_SAT"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsxs)(g.Z,{onClick:e=>D(e),fullWidth:!0,color:"primary",variant:"contained",children:[(0,r.jsx)($.Z,{fontSize:"small"})," ",(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Escalader"})]})})]})]})};const J=function(){const{item:e,plainteSelect:t,initiale:i,annuler:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(!1),[p,m]=n.useState({datetime:new Date,day_of_week:(new Date).getDay()}),[h,x]=n.useState("");n.useEffect((()=>{(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");m(e.data)}catch(e){console.log(e)}})()}),[i]);const j=(0,o.v9)((e=>e.delai.delai)),[Z,y]=z.ZP.useMessage(),w=(e,t)=>{Z.open({type:t,content:""+e,duration:10})},C=async n=>{n.preventDefault();try{u(!0);const n=await(async(e,t)=>{if(j&&t){const a=_.filter(j,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("escalade",p.datetime),o={codeclient:s,shop:null===a||void 0===a?void 0:a.shop,property:"shop",contact:null===i||void 0===i?void 0:i.contact,nomClient:null===i||void 0===i?void 0:i.nomClient,plainteSelect:null===t||void 0===t?void 0:t.title,typePlainte:null===e||void 0===e?void 0:e.title,time_delai:n,fullDateSave:p.datetime,decodeur:h,type:"support",operation:"backoffice"},d=await f.Z.post(v.mA+"/addplainte_support",{data:o},v.vc);200===d.status?(w("Done","success"),l(),u(!1)):(w(""+d.data,"error"),u(!1))}catch(o){"ERR_NETWORK"===o.code&&w(o.message,"error")}};return(0,r.jsxs)("div",{style:{width:"20rem"},children:[y,(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>x(e.target.value),name:"rafraichissement",autoComplete:"off",value:h,fullWidth:!0,label:"Numero decodeur"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:d,onClick:e=>C(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};const X=function(){const{item:e,plainteSelect:t,annuler:i,initiale:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(),[p,m]=n.useState(new Date),h=(0,o.v9)((e=>e.delai.delai)),[x,j]=z.ZP.useMessage(),Z=(e,t)=>{x.open({type:t,content:""+e,duration:10})},[y,w]=n.useState(!1),C=async n=>{n.preventDefault();try{w(!0);const n=await(async(e,t)=>{if(h&&t){const a=_.filter(h,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 30}})("escalade",p),o={codeclient:s,shop:null===a||void 0===a?void 0:a.shop,property:"shop",contact:null===l||void 0===l?void 0:l.contact,nomClient:null===l||void 0===l?void 0:l.nomClient,plainteSelect:null===t||void 0===t?void 0:t.title,typePlainte:null===e||void 0===e?void 0:e.title,time_delai:n,fullDate:p,jours:null===d||void 0===d?void 0:d.jours,cu:null===d||void 0===d?void 0:d.cu,date_coupure:null===d||void 0===d?void 0:d.date_coupure,raison:null===d||void 0===d?void 0:d.raison},r=await f.Z.post(v.mA+"/regularisation",o,v.vc);200===r.status?(i(),Z("Done","success"),w(!1)):(Z(""+r.data,"error"),w(!1))}catch(o){"ERR_NETWORK"===o.code&&Z(o.message,"error")}};return n.useEffect((()=>{(async()=>{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");200===e.status&&m(e.data.datetime)})()}),[t]),(0,r.jsxs)("div",{style:{width:"20rem"},children:[j,(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{style:{marginTop:"10px"},name:"jours",type:"number",autoComplete:"off",onChange:e=>u({...d,jours:e.target.value}),fullWidth:!0,label:"Nombre de jours non consomm\xe9s"})}),(0,r.jsx)("div",{style:{margin:"10px 0px"},children:(0,r.jsx)(A.Z,{style:{marginTop:"10px"},name:"cu",autoComplete:"off",onChange:e=>u({...d,cu:e.target.value}),fullWidth:!0,label:"Num\xe9ro du CU"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{style:{marginTop:"10px"},name:"date_coupure",autoComplete:"off",onChange:e=>u({...d,date_coupure:e.target.value}),fullWidth:!0,type:"date",label:"Date de coupure"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{style:{marginTop:"10px"},name:"raison",autoComplete:"off",onChange:e=>u({...d,raison:e.target.value}),fullWidth:!0,type:"text",label:"Raison"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:y,onClick:e=>C(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};const ee=function(){const{item:e,plainteSelect:t,annuler:i,initiale:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(),[p,m]=n.useState(!1),[h,x]=n.useState(new Date),j=(0,o.v9)((e=>e.delai.delai)),[Z,y]=z.ZP.useMessage(),w=(e,t)=>{Z.open({type:t,content:""+e,duration:10})},C=async n=>{n.preventDefault();try{m(!0);const n=await(async(e,t)=>{if(j&&t){const a=_.filter(j,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("escalade",h),o={codeclient:s,shop:null===a||void 0===a?void 0:a.shop,property:"shop",contact:null===l||void 0===l?void 0:l.contact,nomClient:null===l||void 0===l?void 0:l.nomClient,plainteSelect:null===t||void 0===t?void 0:t.title,typePlainte:null===e||void 0===e?void 0:e.title,time_delai:n,fullDate:h,num_synchro:null===d||void 0===d?void 0:d.num_synchro,materiel:null===d||void 0===d?void 0:d.materiel,raison:null===d||void 0===d?void 0:d.raison},r=await f.Z.post(v.mA+"/repo_volontaire",o,v.vc);200===r.status?(i(),w("Done","success"),m(!1)):(w(""+r.data,"error"),m(!1))}catch(o){"ERR_NETWORK"===o.code&&w(o.message,"error")}};return n.useEffect((()=>{(async()=>{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");200===e.status&&x(e.data.datetime)})()}),[t]),(0,r.jsxs)("div",{style:{width:"20rem"},children:[y,(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,num_synchro:e.target.value}),name:"num_synchro",autoComplete:"off",fullWidth:!0,label:"Num_synchro"})}),(0,r.jsx)("div",{style:{margin:"10px 0px"},children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,materiel:e.target.value}),name:"materiel",autoComplete:"off",fullWidth:!0,label:"Materiels manquants"})}),(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,raison:e.target.value}),name:"raison",autoComplete:"off",fullWidth:!0,label:"raison"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:p,onClick:e=>C(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};const te=function(){const{item:e,plainteSelect:t,annuler:i,initiale:l,shopSelect:a,codeclient:s}=n.useContext(c),[d,u]=n.useState(),[p,m]=n.useState(new Date),h=(0,o.v9)((e=>e.delai.delai)),[x,j]=z.ZP.useMessage(),Z=(e,t)=>{x.open({type:t,content:""+e,duration:10})},[y,w]=n.useState(!1),C=async n=>{try{n.preventDefault(),w(!0);const o=await(async(e,t)=>{if(h&&t){const a=_.filter(h,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===t.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t.datetime).getHours()>parseInt(l)||new Date(t.datetime).getHours()===parseInt(l)&&new Date(t.datetime).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}})("escalade",p),r={codeclient:s,shop:null===a||void 0===a?void 0:a.shop,property:"shop",contact:null===l||void 0===l?void 0:l.contact,nomClient:null===l||void 0===l?void 0:l.nomClient,plainteSelect:null===t||void 0===t?void 0:t.title,typePlainte:null===e||void 0===e?void 0:e.title,time_delai:o,fullDate:p,materiel:null===d||void 0===d?void 0:d.materiel},c=await f.Z.post(v.mA+"/upgrade",r,v.vc);200===c.status?(i(),Z("Done","success"),w(!1)):(Z(""+c.data,"error"),w(!1))}catch(o){"ERR_NETWORK"===o.code&&Z(o.message,"error")}};return n.useEffect((()=>{(async()=>{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");200===e.status&&m(e.data.datetime)})()}),[t]),(0,r.jsxs)("div",{style:{width:"20rem"},children:[j,(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,{onChange:e=>u({...d,materiel:e.target.value}),name:"materiel",autoComplete:"off",fullWidth:!0,label:"Mat\xe9riel\xa0\xe0\xa0upgrader"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:y,onClick:e=>C(e),color:"primary",fullWidth:!0,variant:"contained",children:"Escalader_vers_le_Backoffice"})})]})};const ie=function(e){let{type:t}=e;const[i,l]=n.useState(!1);return n.useEffect((()=>{l(!0)}),[t]),(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsxs)(I.Z,{open:i,setOpen:l,title:t,children:["Desangagement"===t&&(0,r.jsx)(G,{}),"Regularisation"===t&&(0,r.jsx)(X,{}),"Repossession"===t&&(0,r.jsx)(ee,{}),"Downgrade"===t&&(0,r.jsx)(Q,{}),"Upgrade"===t&&(0,r.jsx)(te,{}),"Information"===t&&(0,r.jsx)(K,{}),"Rafraichissement"===t&&(0,r.jsx)(J,{})]})})};const ne=function(e){let{func:t,sending:i}=e;const{setRaisonOngoing:l,raisonOngoing:a}=n.useContext(c),[s,o]=z.ZP.useMessage(),d=e=>{var i,n;e.preventDefault(),a?t("ongoing",""):(i="Pourquoi ongoing ?",n="error",s.open({content:i,duration:5,type:n}))};return(0,r.jsxs)("div",{style:{width:"20rem"},children:[o,(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(A.Z,{value:a,onChange:e=>l(e.target.value),name:"ongoing",autoComplete:"off",fullWidth:!0,label:"Why Ongoing ?"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:i,onClick:e=>d(e),fullWidth:!0,variant:"contained",color:"primary",children:"Ongoing"})})]})};const le=function(){const{adresse:e,shopSelect:t,setShopSelect:i,setCodeclient:u,historique:p,setHistorique:m,initiale:h,raisonOngoing:j,setInitiale:Z,otherItem:w,item:_,setItem:M,plainteSelect:L,setPlainteSelect:W,codeclient:B,annuler:F}=n.useContext(c),{client:H,setClient:Y}=n.useContext(s.E),[q,G]=n.useState(""),Q=(0,o.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.user})),[$,K]=n.useState();n.useEffect((()=>{Q.plainte_callcenter&&K("callcenter"),Q.plainteShop&&K("shop")}),[Q]);const[J,X]=n.useState(!1),ee=(0,o.v9)((e=>{var t;return null===(t=e.shop)||void 0===t?void 0:t.shop})),[te,le]=n.useState(!1),{recommandation:ae,nomClient:se,contact:oe}=h,[de,re]=z.ZP.useMessage(),ce=(e,t)=>{de.open({type:t,content:""+e,duration:10})},ue=(0,o.v9)((e=>e.plainte.plainte.filter((e=>e.property===$||"all"===e.property)))),pe=e=>{const{name:t,value:i}=e.target;Z({...h,[t]:i})},me=(0,o.v9)((e=>e.delai.delai)),[he,xe]=n.useState({isOpen:!1,title:""}),[ve,je]=n.useState(new Date);n.useEffect((()=>{m(),i(""),Z({recommandation:"",nomClient:"",contact:""}),(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");200===e.status&&je(e.data)}catch(e){console.log(e)}})()}),[]);const[ge,fe]=n.useState(!1),Ze=async e=>{const t=null!==ve&&void 0!==ve&&ve.datetime?ve.datetime:ve;if(me&&ve){const a=x().filter(me,{plainte:e});if(a.length>0){let e=a[0].critere.filter((e=>e.jour===ve.day_of_week));if(e.length>0){let l=e[0].debut.split(":")[0],s=e[0].debut.split(":")[1];var i,n;return new Date(t).getHours()>parseInt(l)||new Date(t).getHours()===parseInt(l)&&new Date(t).getMinutes()>=parseInt(s)?null===(i=e[0])||void 0===i?void 0:i.delai:null===(n=a[0])||void 0===n?void 0:n.defaut}var l;return null===(l=a[0])||void 0===l?void 0:l.defaut}return 0}},[ye,we]=n.useState([]),[Ce,Se]=n.useState(!1),be=async(i,n)=>{if(null!==Q&&void 0!==Q&&Q.plainteShop&&Q.plainteShop!==(null===t||void 0===t?void 0:t.shop))ce("Ce client n'est pas de votre shop << ".concat(null===Q||void 0===Q?void 0:Q.plainteShop," >>"),"error");else{Se(!0);const l=await Ze(i);if(xe({...he,isOpen:!1}),null!==_&&void 0!==_&&_.adresse&&!e)ce("Les nouvelles adresses du client sont obligatoire","error"),Se(!1);else{const a={codeclient:B,statut:i,time_delai:l,delai:"IN SLA",fullDateSave:null!==ve&&void 0!==ve&&ve.datetime?ve.datetime:ve,priorite:n,shop:null===t||void 0===t?void 0:t.shop,typePlainte:null===L||void 0===L?void 0:L.title,plainteSelect:_.other?_.oneormany?ye.join(";"):null===w||void 0===w?void 0:w.title:null===_||void 0===_?void 0:_.title,recommandation:h.recommandation,nomClient:h.nomClient,contact:h.contact,property:$,raisonOngoing:j,adresse:e,open:"closed"!==i,operation:"escalade"===i?"backoffice":void 0},s={typePlainte:null===L||void 0===L?void 0:L.title,plainte:null===_||void 0===_?void 0:_.title,contact:h.contact,codeclient:B,time_delai:l,adresse:e,nomClient:h.nomClient,shop:null===t||void 0===t?void 0:t.shop,commentaire:h.recommandation,fullDateSave:null!==ve&&void 0!==ve&&ve.datetime?ve.datetime:ve,provenance:$},o=null!==_&&void 0!==_&&_.ticket?s:a,d=null!==_&&void 0!==_&&_.ticket?"shop"===$?"soumission_ticket":"ticker_callcenter":"appel",r=await f.Z.post("".concat(v.mA,"/").concat(d),o,v.vc);200===r.status&&(Y([...H,r.data]),ce("Done","success"),Se(!1),F()),201===r.status&&(Se(!1),ce(""+r.data,"error"))}}};n.useEffect((()=>{var e,t;p&&(null===p||void 0===p?void 0:p.info.length)>0&&(i(null===(e=p.info[0])||void 0===e?void 0:e.shop),Z({...h,nomClient:null===(t=p.info[0])||void 0===t?void 0:t.nomClient}))}),[p]),n.useEffect((()=>{_&&(["GLVGG","WVW3J"].includes(_.id)&&G("Regularisation"),"RW38Z"===_.id&&G("Desangagement"),"L2N7T"===_.id&&G("Repossession"),"1GS1J"===_.id&&G("Downgrade"),"9NPC7"===_.id&&G("Upgrade"),"TRRIK"===_.id&&G("Information"),"CF5GL"===_.id&&G("Rafraichissement"))}),[_]);const[Ne,_e]=n.useState("");return n.useEffect((()=>{(()=>{if(L){let e=null===L||void 0===L?void 0:L.alltype.filter((e=>e.property===$||"all"===e.property));_e([...e,{_id:"autre",title:"autre",idPlainte:"autre",id:"autre"}])}})()}),[L]),(0,r.jsxs)(r.Fragment,{children:[re,(0,r.jsx)(P.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:Ce,children:(0,r.jsx)("div",{children:(0,r.jsx)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:"Please wait..."})})}),(0,r.jsxs)("p",{children:["Debut : ",E()(null===ve||void 0===ve?void 0:ve.datetime).format("hh:mm")," ",Q.plainteShop&&"-------- Shop : "+Q.plainteShop]}),(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:10,sx:{paddingRight:"10px"},children:(0,r.jsx)(R.Z,{label:"Code client",setValue:u,value:B,showIcon:!0})}),(0,r.jsx)(l.ZP,{item:!0,lg:2,sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(k.Z,{title:"confirm the search",children:(0,r.jsx)(g.Z,{onClick:e=>(async e=>{e.preventDefault(),le(!0);try{const e=await f.Z.get("".concat(v.mA,"/infoclient/").concat(B),v.vc);200===e.status&&(m(e.data),le(!1))}catch(t){console.log(t)}})(e),variant:"contained",color:"primary",children:te?(0,r.jsx)(d.Z,{size:20,color:"inherit"}):(0,r.jsx)(y.Z,{fontSize:"small"})})})})]}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>pe(e),value:se,style:{marginTop:"10px"},name:"nomClient",autoComplete:"off",fullWidth:!0,label:"customer name"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:ee&&(0,r.jsx)(T.Z,{value:t,setValue:i,options:ee,title:"Shop",propr:"shop"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>pe(e),value:oe,style:{marginTop:"10px"},name:"contact",autoComplete:"off",fullWidth:!0,label:"Contact"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:ue&&(0,r.jsx)(T.Z,{value:L,setValue:W,options:ue,title:"Plainte",propr:"title"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:Ne&&(0,r.jsx)(T.Z,{value:_,setValue:M,options:Ne,title:"Probleme",propr:"title"})}),_&&_.other&&(null===_||void 0===_?void 0:_.tableother.length)>0&&(0,r.jsx)(U,{data:_,liste:ye,setListe:we}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>pe(e),value:ae,style:{marginTop:"10px"},name:"recommandation",autoComplete:"off",fullWidth:!0,label:"Commentaire"})}),(0,r.jsx)(ie,{type:q}),_&&(0,r.jsx)(r.Fragment,{children:!["GLVGG","WVW3J","CF5GL","TRRIK","RW38Z","L2N7T","1GS1J","9NPC7"].includes(_.id)&&(0,r.jsxs)("div",{children:[(null===_||void 0===_?void 0:_.ticket)&&"A8MDN"===_.id&&(0,r.jsxs)(g.Z,{onClick:()=>be(null!==_&&void 0!==_&&_.ticket?"awaiting_confirmation":"closed",""),color:"primary",variant:"contained",children:[null!==_&&void 0!==_&&_.ticket?(0,r.jsx)(S,{fontSize:"small"}):(0,r.jsx)(C,{fontSize:"small"})," ",(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Demande_de_creation_ticket"})]}),_&&(null===_||void 0===_?void 0:_.ticket)&&"A8MDN"!==_.id&&(0,r.jsxs)(g.Z,{onClick:()=>(async e=>{const i=await Ze(e),n={typePlainte:null===L||void 0===L?void 0:L.title,contact:h.contact,plainte:null===_||void 0===_?void 0:_.title,time_delai:i,codeclient:B,statut:e,customer_name:null===h||void 0===h?void 0:h.nomClient,shop:null===t||void 0===t?void 0:t.shop,commentaire:h.recommandation,fullDate:null!==ve&&void 0!==ve&&ve.datetime?ve.datetime:ve,property:$},l=await f.Z.post(v.mA+"/ticker_callcenter",n,v.vc);200===l.status?(Y([...H,l.data]),ce("Done","success"),F()):ce(""+l.data,"error")})("Open_technician_visit"),color:"primary",variant:"contained",children:[(0,r.jsx)(S,{fontSize:"small"}),(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Creation_ticket"})]}),!(null!==_&&void 0!==_&&_.ticket)&&"LI2GP"!==(null===_||void 0===_?void 0:_.id)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(g.Z,{sx:{margin:"0px 5px"},onClick:()=>be("closed",""),color:"primary",variant:"contained",children:[(0,r.jsx)(b,{fontSize:"small"}),(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Closes"})]}),(0,r.jsxs)(g.Z,{sx:{margin:"0px 5px"},onClick:()=>fe(!0),color:"secondary",variant:"contained",children:[(0,r.jsx)(N,{fontSize:"small"}),(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Ongoing"})]})]}),!(null!==_&&void 0!==_&&_.ticket)&&(0,r.jsxs)(g.Z,{onClick:()=>{xe({isOpen:!0,title:"Priority",onConfirm:e=>{be("escalade",e)}})},color:"primary",variant:"contained",children:[(0,r.jsx)(D,{fontSize:"small"})," ",(0,r.jsx)("span",{style:{marginLeft:"5px"},children:"Escalade"})]}),(0,r.jsx)(a.Z,{onClick:()=>F(),sx:{marginLeft:"3px"},color:"warning",variant:"contained",children:"Annuler"}),(null===_||void 0===_?void 0:_.adresse)&&(0,r.jsx)(a.Z,{component:"span",style:{textAlign:"right",fontSize:"12px",cursor:"pointer",color:"blue",fontWeight:"bolder",marginLeft:"20px",textDecoration:"underline"},onClick:()=>X(!0),children:"Adresses"})]})}),(0,r.jsx)(I.Z,{open:J,setOpen:X,title:"New customer addresses",children:(0,r.jsx)(O,{setOpen:X})}),(0,r.jsx)(I.Z,{open:ge,setOpen:fe,title:"Raison",children:(0,r.jsx)(ne,{sending:Ce,func:be})}),(0,r.jsx)(V,{confirmDialog:he,setConfirmDialog:xe})]})};const ae=function(){const{historique:e}=n.useContext(c),t=(0,o.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user}));return(0,r.jsxs)("div",{children:[e&&(null===e||void 0===e?void 0:e.appel.length)>0&&e.appel.map((e=>(0,r.jsx)(m.Z,{elevation:1,sx:{padding:"5px",marginBottom:"5px"},children:(0,r.jsxs)(l.ZP,{container:!0,className:"plainte",children:[(0,r.jsxs)(l.ZP,{item:!0,lg:6,className:"infoOne",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Issue"})," : ",null===e||void 0===e?void 0:e.typePlainte]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Type Issue"})," : ",null===e||void 0===e?void 0:e.plainteSelect]}),(0,r.jsxs)("p",{className:"statut",children:[(0,r.jsx)("span",{children:"statut"})," : ",null===e||void 0===e?void 0:e.statut]})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,className:"infoTwo",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"saved by"})," : ",(null===e||void 0===e?void 0:e.submitedBy)+"; ",null===e||void 0===e?void 0:e.property]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"comment"})," : ",null===e||void 0===e?void 0:e.recommandation]}),(0,r.jsx)("p",{children:E()(null===e||void 0===e?void 0:e.fullDateSave).fromNow()})]})]})},e._id))),!e&&(0,r.jsx)("div",{className:"images",children:(0,r.jsx)("div",{children:(0,r.jsxs)("p",{children:["Service client Bboxx Bonjour! Je m'appelle ",(0,v.$f)(null===t||void 0===t?void 0:t.nom)," comment puis-je vous aider Monsieur?"]})})})]})};var se=i(209478),oe=i(358446);const de=function(e){let{data:t}=e;const[i,l]=n.useState({options:[],series:[]});n.useEffect((()=>{(()=>{let e=[],i=[],n=x().toArray(Object.keys(x().countBy(t,"submitedBy")));for(let l=0;l<n.length;l++)e.push(n[l]),i.push(t.filter((e=>e.submitedBy===n[l])).length);l({series:i,options:e})})()}),[t]);const a={chart:{id:"basic-bar"},xaxis:{categories:i.options}},s=[{name:"series-1",data:i.series}];return(0,r.jsx)("div",{className:"mixed-chart",children:(0,r.jsx)(oe.Z,{options:a,series:s,type:"bar",width:"100%",height:300})})};function re(){const{socket:e}=n.useContext(s.E),[t,i]=n.useState(),[l,a]=n.useState([]);n.useEffect((()=>{e&&e.on("appel",(e=>{i(e)}))}),[e]);return n.useEffect((()=>{(async()=>{const e=await f.Z.get(v.mA+"/today",v.vc);200===e.status&&a(e.data)})()}),[]),n.useEffect((()=>{t&&a([t,...l])}),[t]),(0,r.jsxs)("div",{className:"liste",children:[(0,r.jsxs)("p",{className:"pCall",children:[l.length," complaint received"]}),(0,r.jsx)(se.Z,{sx:{mt:2},content:!1,children:(0,r.jsx)(de,{data:l})})]})}const ce=n.memo(re);const ue=function(e){let{property:t}=e;const[i,s]=n.useState(0);return(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:5,xs:12,sm:12,md:6,children:(0,r.jsx)(m.Z,{elevation:4,sx:{padding:"10px"},children:(0,r.jsx)(le,{property:t})})}),(0,r.jsx)(l.ZP,{item:!0,lg:7,xs:12,sm:12,md:6,children:(0,r.jsxs)(m.Z,{elevation:4,sx:{marginLeft:"10px"},children:[(0,r.jsxs)("div",{className:"titre",children:[(0,r.jsx)(a.Z,{onClick:()=>s(0),children:"Historique d'appels"}),(0,r.jsx)(a.Z,{onClick:()=>s(1),children:"Today"})]}),0===i&&(0,r.jsx)(ae,{}),1===i&&(0,r.jsx)(ce,{})]})})]})},pe=(0,w.Z)((0,r.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Message");var me=i(542420),he=i(818580),xe=i(249555),ve=i(878375);const je=function(){const[e,t]=n.useState(),{setPlainteSelect:i,setSelect:l}=n.useContext(c),{client:a}=n.useContext(s.E);n.useEffect((()=>{(async()=>{a&&t(a.filter((e=>"backoffice"===e.operation)))})()}),[a]);const o=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"contact",headerName:"Contact",width:80,editable:!1},{field:"statut",headerName:"Statut",width:160,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type Plainte",width:150,editable:!1},{field:"plainteSelect",headerName:"Plainte",width:150,editable:!1},{field:"submitedBy",headerName:"Saved By",width:100,editable:!1},{field:"dateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>E()(e.row.dateSave).format("DD/MM/YYYY")},{field:"dateClose",headerName:"SLA",width:130,editable:!1,renderCell:e=>e.row.open?(0,v.bQ)((e.row.time_delai-((e,t)=>{let i=(new Date(t).getTime()-new Date(e).getTime())/6e4;return i<1?1:i})(e.row.fullDateSave,new Date)).toFixed(0)):(0,r.jsx)(ve.Z,{text:e.row.delai})},{field:"open",headerName:"Type",width:75,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.open?"Ouvert":"Fermer"})},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,r.jsx)(me.Z,{size:"small",color:"primary",onClick:()=>{return t=e.row,i(t),void l(3);var t},children:e.row.message?e.row.message.length:(0,r.jsx)(pe,{fontSize:"small"})})}];return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)(xe.Z,{width:400,height:400}),e&&0===e.length&&(0,r.jsx)("p",{style:{textAlign:"center",color:"blue",fontWeight:"bolder"},children:"Aucune plainte en attente"}),e&&e.length>0&&(0,r.jsx)(m.Z,{elevation:4,children:(0,r.jsx)(he._$,{rows:e,columns:o,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})})]})},ge=(0,w.Z)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var fe=i(619536);const Ze=function(){var e,t,i,d,u,p,h,x,j,Z,y,w,C,S,b,N,_,D,P,k,T,z,R,M,I,L;const{plainteSelect:O,setSelect:W}=n.useContext(c),{client:B,setClient:F}=n.useContext(s.E),H=(0,o.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),[V,Y]=n.useState([]),[q,U]=n.useState(""),[G,Q]=n.useState(!1);n.useEffect((()=>{Y(null===O||void 0===O?void 0:O.message)}),[O]);const $=(e,t)=>{let i=(new Date(t).getTime()-new Date(e).getTime())/6e4;return i<1?1:i};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.ZP,{container:!0,sx:{marginTop:"10px"},children:[(0,r.jsxs)(l.ZP,{item:!0,lg:4,xs:12,sm:4,md:4,children:[(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(l.ZP,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff"},children:(0,r.jsx)(a.Z,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:O.nomClient})}),(0,r.jsxs)(l.ZP,{sx:{padding:"5px"},children:[(0,r.jsx)(l.ZP,{className:"month",children:O.codeclient}),(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Type Plainte"}),(0,r.jsx)(a.Z,{className:"values",children:O.typePlainte})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Plainte"}),(0,r.jsx)(a.Z,{className:"values",children:O.plainteSelect})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Commentaire"}),(0,r.jsx)(a.Z,{className:"values",children:O.recommandation})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Delai"}),(0,r.jsx)(a.Z,{className:"values",children:null===O||void 0===O?void 0:O.delai})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"openBy"}),(0,r.jsx)(a.Z,{className:"values",children:null===O||void 0===O?void 0:O.submitedBy})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"statut"}),(0,r.jsx)(a.Z,{className:"values",children:null===O||void 0===O?void 0:O.statut})]})]}),(0,r.jsx)(fe.Z,{}),(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:(0,r.jsxs)("div",{children:["Desengagement"===O.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Desengagement du client"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Raison"})," : ",null===O||void 0===O||null===(e=O.desangagement)||void 0===e?void 0:e.raison]}),(0,r.jsx)("a",{rel:"noreferrer",target:"_blank",href:"".concat(v.fX,"/").concat(null===O||void 0===O||null===(t=O.desangagement)||void 0===t?void 0:t.filename),children:(0,r.jsx)("span",{children:"ouvrir le contrat"})})]}),"Downgrade"===O.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Downgrade"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"num_synchro"})," : ",null===O||void 0===O||null===(i=O.downgrade)||void 0===i?void 0:i.num_synchro]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"kit"})," : ",null===O||void 0===O||null===(d=O.downgrade)||void 0===d?void 0:d.kit]})]}),"Repossession volontaire"===O.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Repossession volontaire"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"num_synchro"})," : ",null===O||void 0===O||null===(u=O.repo_volontaire)||void 0===u?void 0:u.num_synchro]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Materiels"})," :"," ",null===O||void 0===O?void 0:O.repo_volontaire.materiel.map((e=>(0,r.jsx)("span",{children:e},e)))]})]}),"Upgrade"===O.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Upgrade"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Materiel"})," : ",null===O||void 0===O?void 0:O.upgrade]})]}),"Regularisation"===O.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Regularisation"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Jours"})," : ",null===O||void 0===O||null===(p=O.regularisation)||void 0===p?void 0:p.jours," jour(s)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"C.U"})," : ",null===O||void 0===O||null===(h=O.regularisation)||void 0===h?void 0:h.cu]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Raison"})," : ",null===O||void 0===O||null===(x=O.regularisation)||void 0===x?void 0:x.raison]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"date_coupure"})," : ",E()(null===O||void 0===O||null===(j=O.regularisation)||void 0===j?void 0:j.date_coupure).format("DD/MM/YYYY")]})]}),"Changement de Shop"===O.plainteSelect&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Changement de Shop"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Shop"})," : ",null===O||void 0===O||null===(Z=O.adresse)||void 0===Z?void 0:Z.shop]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Commune"})," : ",null===O||void 0===O||null===(y=O.adresse)||void 0===y?void 0:y.commune]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Quartier"})," : ",null===O||void 0===O||null===(w=O.adresse)||void 0===w?void 0:w.quartier]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Avenue"})," : ",null===O||void 0===O||null===(C=O.adresse)||void 0===C?void 0:C.avenue]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Reference"})," : ",null===O||void 0===O||null===(S=O.adresse)||void 0===S?void 0:S.reference]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"SAT"})," : ",null===O||void 0===O||null===(b=O.adresse)||void 0===b||null===(N=b.sat)||void 0===N?void 0:N.nom_SAT]})]})]})}),(0,r.jsx)(l.ZP,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:null!==O&&void 0!==O&&O.open?(0,v.bQ)((O.time_delai-$(O.fullDateSave,new Date)).toFixed(0)):(0,r.jsx)("p",{style:{background:"rgb(0, 169, 224)",color:"white",padding:"10px",margin:"0px",textAlign:"center"},children:null===O||void 0===O?void 0:O.delai})})]})]})]}),(0,r.jsx)(m.Z,{sx:{padding:"10px",marginTop:"4px"},children:(0,r.jsxs)("div",{className:"adresseInfo",children:[(0,r.jsx)("p",{className:"adresseP",children:"Customer Informations"}),(null===O||void 0===O||null===(_=O.adresse)||void 0===_?void 0:_.contact)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Contact"})," : "+(null===O||void 0===O||null===(D=O.adresse)||void 0===D?void 0:D.contact)]}),(null===O||void 0===O?void 0:O.decodeur)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"D\xe9codeur"})," : "+(null===O||void 0===O?void 0:O.decodeur)]}),(null===O||void 0===O||null===(P=O.adresse)||void 0===P?void 0:P.commune)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Commune "})," : "+(null===O||void 0===O||null===(k=O.adresse)||void 0===k?void 0:k.commune)]}),(null===O||void 0===O||null===(T=O.adresse)||void 0===T?void 0:T.quartier)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Quartier "})," : "+(null===O||void 0===O||null===(z=O.adresse)||void 0===z?void 0:z.quartier)]}),(null===O||void 0===O||null===(R=O.adresse)||void 0===R?void 0:R.avenue)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Avenue "})," : "+(null===O||void 0===O||null===(M=O.adresse)||void 0===M?void 0:M.avenue)]}),(null===O||void 0===O||null===(I=O.adresse)||void 0===I?void 0:I.reference)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Reference "})," : "+(null===O||void 0===O||null===(L=O.adresse)||void 0===L?void 0:L.reference)]})]})}),(0,r.jsx)(m.Z,{sx:{padding:"10px",marginTop:"4px"},children:O&&(null===O||void 0===O?void 0:O.resultat.length)>0&&(null===O||void 0===O?void 0:O.resultat.map((e=>(0,r.jsx)("div",{className:"resultat",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"last_status : "}),null===e||void 0===e?void 0:e.laststatus]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"change_to : "}),null===e||void 0===e?void 0:e.changeto]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Do_by : "}),null===e||void 0===e?void 0:e.nomAgent]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"SLA : "}),null===e||void 0===e?void 0:e.delai]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Comment : "}),null===e||void 0===e?void 0:e.commentaire]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Date : "}),E()(null===e||void 0===e?void 0:e.fullDate).format("DD/MM/YYYY hh:mm")]})]})},e._id))))})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:8,xs:12,sm:8,md:8,children:[(0,r.jsxs)(m.Z,{className:"papierConv",elevation:3,children:["ID : ",null===O||void 0===O?void 0:O.idPlainte]}),(0,r.jsx)("div",{children:V&&V.map((e=>(0,r.jsx)(m.Z,{elevation:3,className:"papierConv",children:(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:2,className:"userP",children:(0,r.jsx)("div",{children:(0,r.jsx)(a.Z,{noWrap:!0,component:"p",children:e.agent===H.nom?"Moi":(0,v.$f)(e.agent)})})}),(0,r.jsx)(l.ZP,{item:!0,lg:10,className:"body_content",children:(0,r.jsx)("p",{children:e.content})})]})},e._id)))}),null!==O&&void 0!==O&&O.open?(0,r.jsx)("div",{className:"forme",children:(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:6,children:(0,r.jsx)(A.Z,{onChange:e=>U(e.target.value),autoComplete:"off",fullWidth:!0,label:"Message"})}),(0,r.jsx)(l.ZP,{item:!0,lg:2,sx:{paddingLeft:"5px"},children:(0,r.jsxs)(g.Z,{disabled:G,color:"primary",variant:"contained",onClick:e=>(async e=>{try{e.preventDefault(),Q(!0);const t=await f.Z.post(v.mA+"/message",{idPlainte:null===O||void 0===O?void 0:O.idPlainte,content:q},v.vc);200===t.status&&(Y([...V,t.data]),Q(!1))}catch(t){console.log(t)}})(e),children:[(0,r.jsx)(ge,{fontSize:"small"})," ",(0,r.jsx)("span",{style:{marginLeft:"10px"},children:"Save"})]})}),(null===H||void 0===H?void 0:H.backOffice_plainte)&&(0,r.jsx)(l.ZP,{item:!0,lg:4,sx:{paddingLeft:"5px"},children:(0,r.jsx)(g.Z,{disabled:G,color:"primary",variant:"contained",onClick:e=>(async()=>{try{const e=await f.Z.put(v.mA+"/updateappel",{id:O._id,data:{open:!1,delai:O.time_delai-$(O.fullDateSave,new Date)>0?"IN SLA":"OUT SLA"}},v.vc);200===e.status&&(F(B.map((t=>t._id===e.data._id?e.data:t))),W(2))}catch(e){console.log(e)}})(),children:"Close"})})]})}):(0,r.jsx)("p",{style:{textAlign:"center",color:"red",fontWeight:"bolder"},children:"The_complaint_is_already_closed"})]})]})})};var ye=i(371207),we=i(397400),Ce=i(905532);function Se(){const[e,t]=n.useState(),{client:i}=n.useContext(s.E),{setPlainteSelect:l,setSelect:a}=n.useContext(c);n.useEffect((()=>{(async()=>{t(i.filter((e=>"awaiting_confirmation"===e.statut)))})()}),[]);const[o,d]=n.useState({isOpen:!1,title:"",subTitle:""}),{socket:u}=n.useContext(s.E),[p,h]=n.useState();n.useEffect((()=>{u&&u.on("appel",(e=>{h(e)}))}),[u]),n.useEffect((()=>{if(p&&"escalade"===p.statut){t([p,...e]);new Audio(we).play()}}),[p]);const x=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"idPlainte",headerName:"ID",width:75,editable:!1},{field:"shop",headerName:"Shop",width:100,editable:!1},{field:"contact",headerName:"Contact",width:80,editable:!1},{field:"statut",headerName:"Statut",width:150,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type d'interventions",width:130,editable:!1},{field:"plainteSelect",headerName:"Issue du client",width:150,editable:!1},{field:"submitedBy",headerName:"Cr\xe9es par ",width:100,editable:!1},{field:"dateClose",headerName:"SLA",width:120,editable:!1,renderCell:e=>(0,v.bQ)((e.row.time_delai-((e,t)=>{let i=(new Date(t).getTime()-new Date(e).getTime())/6e4;return i<1?1:i})(e.row.fullDateSave,new Date)).toFixed(0))},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,r.jsx)(me.Z,{size:"small",color:"primary",onClick:()=>{return t=e.row,l(t),void a(6);var t},children:(0,r.jsx)(ye.Z,{fontSize:"small"})})}];return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)(xe.Z,{width:400,height:400}),e&&0===e.length&&(0,r.jsx)("p",{style:{textAlign:"center",color:"blue",fontWeight:"bolder"},children:"Aucune plainte en attente"}),e&&e.length>0&&(0,r.jsx)(m.Z,{elevation:4,children:(0,r.jsx)(he._$,{rows:e,columns:x,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})}),(0,r.jsx)(Ce.Z,{confirmDialog:o,setConfirmDialog:d})]})}const be=n.memo(Se);const Ne=function(){const[e,t]=n.useState(),{setPlainteSelect:i,setSelect:l}=n.useContext(c),{client:a}=n.useContext(s.E);n.useEffect((()=>{(async()=>{try{const e=await f.Z.get(v.mA+"/mybackoffice",v.vc);t(e.data)}catch(e){console.log(e)}})()}),[a]);const o=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"contact",headerName:"Contact",width:80,editable:!1},{field:"statut",headerName:"Statut",width:160,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.statut})},{field:"typePlainte",headerName:"Type Plainte",width:150,editable:!1},{field:"plainteSelect",headerName:"Plainte",width:150,editable:!1},{field:"submitedBy",headerName:"Saved By",width:100,editable:!1},{field:"dateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>E()(e.row.dateSave).format("DD/MM hh:mm")},{field:"dateClose",headerName:"SLA",width:75,editable:!1,renderCell:e=>e.row.open?(0,v.bQ)((e.row.time_delai-((e,t)=>{let i=(new Date(t).getTime()-new Date(e).getTime())/6e4;return i<1?1:i})(e.row.fullDateSave,new Date)).toFixed(0)):(0,r.jsx)(ve.Z,{text:e.row.delai})},{field:"sla",headerName:"Type",width:75,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.open?"Ouvert":"Fermer"})},{field:"Action",headerName:"Action",width:70,editable:!1,renderCell:e=>(0,r.jsx)(me.Z,{size:"small",color:"primary",onClick:()=>{return t=e.row,i(t),void l(3);var t},children:(0,r.jsx)(pe,{fontSize:"small"})})}];return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)(xe.Z,{width:400,height:400}),e&&0===e.length&&(0,r.jsx)("p",{style:{textAlign:"center",color:"blue",fontWeight:"bolder"},children:"No request"}),e&&e.length>0&&(0,r.jsx)(m.Z,{elevation:4,children:(0,r.jsx)(he._$,{rows:e,columns:o,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})})]})},_e=(0,w.Z)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");var De=i(301550),Pe=i(649914),ke=i(241727),Ae=i(286961);const Te=function(){var e,t,i,s,o,d,c,u,p,h,x,j,Z,w,C,S,b,N,_,D,P,k,A,T,R,M,I;const[L,O]=n.useState(""),W=(0,Ae.v9)((e=>e.user.user)),[B,F]=n.useState(),[H,V]=z.ZP.useMessage(),Y=async e=>{e.preventDefault(),F();const t=await f.Z.get(v.mA+"/onecomplaint/"+L,v.vc);var i,n;200===t.status?F(t.data[0]):(i=""+t.data,n="error",H.open({type:n,content:""+i,duration:5}))};return(0,r.jsxs)(r.Fragment,{children:[V,(0,r.jsx)(m.Z,{elevation:2,sx:{padding:"10px"},children:(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:8,children:(0,r.jsx)(De.Z,{sx:{width:"100%"},children:(0,r.jsx)(Pe.Z,{size:"small",id:"header-search",startAdornment:(0,r.jsx)(ke.Z,{position:"start",sx:{mr:-.5},children:(0,r.jsx)(_e,{})}),"aria-describedby":"header-search-text",inputProps:{"aria-label":"weight"},value:L,onChange:e=>O(e.target.value),placeholder:"ID Complaint"})})}),(0,r.jsx)(l.ZP,{item:!0,lg:2,sx:{paddingLeft:"10px"},children:(0,r.jsxs)(g.Z,{onClick:e=>Y(e),variant:"contained",color:"primary",children:[(0,r.jsx)(y.Z,{fontSize:"small"})," Recherche"]})})]})}),B&&(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsxs)(l.ZP,{item:!0,lg:7,xs:12,sm:4,md:4,children:[(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(l.ZP,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff"},children:(0,r.jsxs)(a.Z,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:[B.nomClient," ",null!==B&&void 0!==B&&B.open?"(Open)":"(Closed)"]})}),(0,r.jsxs)(l.ZP,{sx:{padding:"5px"},children:[(0,r.jsx)(l.ZP,{className:"month",children:B.codeclient}),(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Type Plainte"}),(0,r.jsx)(a.Z,{className:"values",children:B.typePlainte})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Plainte"}),(0,r.jsx)(a.Z,{className:"values",children:B.plainteSelect})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Commentaire"}),(0,r.jsx)(a.Z,{className:"values",children:B.recommandation})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Delai"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.delai})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"openBy"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.submitedBy})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"statut"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.statut})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"contact"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.contact})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Month"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.periode})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Last update"}),(0,r.jsx)(a.Z,{className:"values",children:E()(null===B||void 0===B?void 0:B.fullDateSave).format("DD-MM-YYYY hh:mm")})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Origin"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.property})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Date close"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.dateClose})]}),(0,r.jsxs)(l.ZP,{item:!0,lg:6,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(a.Z,{className:"title",children:"Type"}),(0,r.jsx)(a.Z,{className:"values",children:null===B||void 0===B?void 0:B.type})]})]}),(0,r.jsx)(fe.Z,{}),(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:(0,r.jsxs)("div",{children:["Desengagement"===B.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Desengagement du client"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Raison"})," : ",null===B||void 0===B||null===(e=B.desangagement)||void 0===e?void 0:e.raison]}),(0,r.jsx)("a",{rel:"noreferrer",target:"_blank",href:"".concat(v.fX,"/").concat(null===B||void 0===B||null===(t=B.desangagement)||void 0===t?void 0:t.filename),children:(0,r.jsx)("span",{children:"ouvrir le contrat"})})]}),"Downgrade"===B.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Downgrade"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"num_synchro"})," : ",null===B||void 0===B||null===(i=B.downgrade)||void 0===i?void 0:i.num_synchro]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"kit"})," : ",null===B||void 0===B||null===(s=B.downgrade)||void 0===s?void 0:s.kit]})]}),"Repossession volontaire"===B.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Repossession volontaire"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"num_synchro"})," : ",null===B||void 0===B||null===(o=B.repo_volontaire)||void 0===o?void 0:o.num_synchro]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Materiels"})," :"," ",null===B||void 0===B?void 0:B.repo_volontaire.materiel.map((e=>(0,r.jsx)("span",{children:e},e)))]})]}),"Upgrade"===B.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Upgrade"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Materiel"})," : ",null===B||void 0===B?void 0:B.upgrade]})]}),"Regularisation"===B.statut&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Regularisation"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Jours"})," : ",null===B||void 0===B||null===(d=B.regularisation)||void 0===d?void 0:d.jours," jour(s)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"C.U"})," : ",null===B||void 0===B||null===(c=B.regularisation)||void 0===c?void 0:c.cu]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Raison"})," : ",null===B||void 0===B||null===(u=B.regularisation)||void 0===u?void 0:u.raison]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"date_coupure"})," : ",E()(null===B||void 0===B||null===(p=B.regularisation)||void 0===p?void 0:p.date_coupure).format("DD/MM/YYYY")]})]}),"Changement de Shop"===B.plainteSelect&&(0,r.jsxs)("div",{className:"downgrade",children:[(0,r.jsx)("p",{className:"downgradeP",children:"Changement de Shop"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Shop"})," : ",null===B||void 0===B||null===(h=B.adresse)||void 0===h?void 0:h.shop]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Commune"})," : ",null===B||void 0===B||null===(x=B.adresse)||void 0===x?void 0:x.commune]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Quartier"})," : ",null===B||void 0===B||null===(j=B.adresse)||void 0===j?void 0:j.quartier]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Avenue"})," : ",null===B||void 0===B||null===(Z=B.adresse)||void 0===Z?void 0:Z.avenue]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Reference"})," : ",null===B||void 0===B||null===(w=B.adresse)||void 0===w?void 0:w.reference]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"SAT"})," : ",null===B||void 0===B||null===(C=B.adresse)||void 0===C||null===(S=C.sat)||void 0===S?void 0:S.nom_SAT]})]})]})}),(0,r.jsx)(l.ZP,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:null!==B&&void 0!==B&&B.open?TimeCounter((B.time_delai-returnTime(B.fullDateSave,new Date)).toFixed(0)):(0,r.jsx)("p",{style:{background:"rgb(0, 169, 224)",color:"white",padding:"10px",margin:"0px",textAlign:"center"},children:null===B||void 0===B?void 0:B.delai})})]})]})]}),(0,r.jsx)(m.Z,{sx:{padding:"10px",marginTop:"4px"},children:(0,r.jsxs)("div",{className:"adresseInfo",children:[(0,r.jsx)("p",{className:"adresseP",children:"Customer Informations"}),(null===B||void 0===B||null===(b=B.adresse)||void 0===b?void 0:b.contact)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Contact"})," : "+(null===B||void 0===B||null===(N=B.adresse)||void 0===N?void 0:N.contact)]}),(null===B||void 0===B?void 0:B.decodeur)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"D\xe9codeur"})," : "+(null===B||void 0===B?void 0:B.decodeur)]}),(null===B||void 0===B||null===(_=B.adresse)||void 0===_?void 0:_.commune)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Commune "})," : "+(null===B||void 0===B||null===(D=B.adresse)||void 0===D?void 0:D.commune)]}),(null===B||void 0===B||null===(P=B.adresse)||void 0===P?void 0:P.quartier)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Quartier "})," : "+(null===B||void 0===B||null===(k=B.adresse)||void 0===k?void 0:k.quartier)]}),(null===B||void 0===B||null===(A=B.adresse)||void 0===A?void 0:A.avenue)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Avenue "})," : "+(null===B||void 0===B||null===(T=B.adresse)||void 0===T?void 0:T.avenue)]}),(null===B||void 0===B||null===(R=B.adresse)||void 0===R?void 0:R.reference)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Reference "})," : "+(null===B||void 0===B||null===(M=B.adresse)||void 0===M?void 0:M.reference)]})]})}),(0,r.jsx)(m.Z,{sx:{padding:"10px",marginTop:"4px"},children:B&&(null===B||void 0===B||null===(I=B.resultat)||void 0===I?void 0:I.length)>0&&(null===B||void 0===B?void 0:B.resultat.map((e=>(0,r.jsx)("div",{className:"resultat",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"last_status : "}),null===e||void 0===e?void 0:e.laststatus]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"change_to : "}),null===e||void 0===e?void 0:e.changeto]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Do_by : "}),null===e||void 0===e?void 0:e.nomAgent]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"SLA : "}),null===e||void 0===e?void 0:e.delai]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Comment : "}),null===e||void 0===e?void 0:e.commentaire]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Date : "}),E()(null===e||void 0===e?void 0:e.fullDate).format("DD/MM/YYYY hh:mm")]})]})},e._id))))})]}),(0,r.jsx)(l.ZP,{item:!0,lg:5,children:(0,r.jsx)("div",{children:(null===B||void 0===B?void 0:B.message)&&(null===B||void 0===B?void 0:B.message.map((e=>(0,r.jsx)(m.Z,{elevation:2,className:"papierConv",children:(0,r.jsxs)(l.ZP,{container:!0,children:[(0,r.jsx)(l.ZP,{item:!0,lg:2,className:"userP",children:(0,r.jsx)("div",{children:(0,r.jsx)(a.Z,{noWrap:!0,component:"p",children:e.agent===W.nom?"Moi":(0,v.$f)(e.agent)})})}),(0,r.jsxs)(l.ZP,{item:!0,lg:10,className:"body_content",children:[(0,r.jsx)("p",{children:e.content}),(0,r.jsx)("p",{style:{fontSize:"10px"},children:E()(e.createdAt).fromNow()})]})]})},e._id))))})})]})]})},ze=(0,w.Z)((0,r.jsx)("path",{d:"M21 3H3v18h18V3zm-2.5 6h-3.2l-5 9H5.5v-3h3.2l5-9h4.8v3z"}),"EscalatorSharp");const Re=function(){const[e,t]=n.useState(),{client:i,setClient:l}=n.useContext(s.E),{setPlainteSelect:a,setSelect:d}=n.useContext(c),u=(0,o.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user}));n.useEffect((()=>{(async()=>{i&&t(i.filter((e=>"appel"===e.type)))})()}),[i]);const[p,h]=n.useState({isOpen:!1,title:"",subTitle:""}),[x,j]=z.ZP.useMessage(),g=(0,o.v9)((e=>e.delai.delai)),Z=async(i,n)=>{if(h({...p,isOpen:!1}),u.nom!==i.submitedBy)a="seulement ".concat(i.submitedBy," peut effectuer cette operation"),s="error",x.open({type:s,content:""+a,duration:5});else{const a="escalade";let s=(await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi")).data;const o=await(0,v.zL)(a,g,s),{_id:d}=i;if("escalade"===n){const t=await f.Z.put(v.mA+"/updateappel",{id:d,data:{operation:"backoffice",time_delai:o}},v.vc);if(200===t.status){const i=e.map((e=>e._id===t.data._id?t.data:e));l(i)}}if("closed"===n){const i=await f.Z.put(v.mA+"/updateappel",{id:d,data:{statut:n}},v.vc);if(200===i.status){const n=e.map((e=>e._id===i.data._id?i.data:e));t(n)}}}var a,s},y=[{field:"codeclient",headerName:"Code client",width:120,editable:!1},{field:"contact",headerName:"Contact",width:80,editable:!1},{field:"statut",headerName:"Statut",width:120,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{onClick:()=>"ongoing"===e.row.statut&&"backoffice"!==e.row.operation&&Z(e.row,"closed"),text:e.row.statut})},{field:"typePlainte",headerName:"Type Plainte",width:100,editable:!1},{field:"plainteSelect",headerName:"Plainte",width:150,editable:!1},{field:"submitedBy",headerName:"Saved By",width:100,editable:!1},{field:"recommandation",headerName:"recommandation",width:120,editable:!1},{field:"delai",headerName:"Delai",width:80,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.delai,taille:10})},{field:"fullDateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>E()(e.row.fullDateSave).format("DD/MM hh:mm")},{field:"Action",headerName:"Action",width:130,editable:!1,renderCell:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.Z,{title:"Suivi",children:(0,r.jsx)(me.Z,{sx:{marginRight:"5px"},size:"small",color:"primary",onClick:()=>{return t=e.row,a(t),void d(3);var t},children:e.row.message?e.row.message.length:0})}),"ongoing"===e.row.statut&&(0,r.jsx)(k.Z,{title:"Escalader vers le Backoffice",children:(0,r.jsx)(me.Z,{onClick:()=>Z(e.row,"escalade"),sx:{marginRight:"5px"},size:"small",color:"primary",children:(0,r.jsx)(ze,{fontSize:"small"})})})]})}];return(0,r.jsxs)("div",{children:[j,!e&&(0,r.jsx)(xe.Z,{width:400,height:400}),e&&(0,r.jsx)(m.Z,{elevation:4,children:(0,r.jsx)(he._$,{rows:e,columns:y,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})})]})};var Me=i(350723);const Ee=function(e){let{clients:t}=e;const i=(0,o.v9)((e=>{var i;return null===(i=e.agent)||void 0===i?void 0:i.agent.filter((e=>{var i;return(null===(i=e.shop[0])||void 0===i?void 0:i.shop)===(null===t||void 0===t?void 0:t.shop)&&"tech"===e.fonction}))})),[l,a]=n.useState(""),[d,c]=n.useState(""),{setClient:u,client:p}=n.useContext(s.E);return(0,r.jsxs)("div",{style:{width:"20rem"},children:[(0,r.jsx)("div",{style:{marginTop:"10px"},children:i&&(0,r.jsx)(T.Z,{value:l,setValue:a,options:i,title:"Technicien",propr:"nom"})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>c(e.target.value),style:{marginTop:"10px"},name:"numSynchro",autoComplete:"off",fullWidth:!0,value:d,label:"Numero synchro"})}),(0,r.jsx)("div",{children:(0,r.jsx)(g.Z,{onClick:e=>(async e=>{e.preventDefault();try{const e={num_ticket:null===t||void 0===t?void 0:t.idPlainte,codeAgent:null===l||void 0===l?void 0:l.codeAgent,numSynchro:d},i=await f.Z.post(v.mA+"/assign_tech_ticket",e,v.vc);200===i.status&&(u(p.map((e=>e._id===i.data._id?i.data:e))),a(""),c(""))}catch(i){console.log(i)}})(e),fullWidth:!0,color:"primary",variant:"contained",children:"Valider"})})]})};const Ie=function(e){let{idPlainte:t}=e;const{client:i,setClient:l}=n.useContext(s.E),[a,o]=n.useState("");n.useEffect((()=>{o("")}),[t]);const[d,c]=z.ZP.useMessage(),u=(e,t)=>{d.open({type:t,content:""+e,duration:5})},[p,m]=n.useState(!1);return(0,r.jsxs)("div",{style:{width:"20rem"},children:[c,(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(A.Z,{value:a,onChange:e=>o(e.target.value),name:"raison",autoComplete:"off",fullWidth:!0,label:"Raison de Fermeture"})}),(0,r.jsx)("div",{style:{marginTop:"10px"},children:(0,r.jsx)(g.Z,{disabled:p,onClick:e=>(async e=>{try{e.preventDefault(),m(!0);const n=await f.Z.post(v.mA+"/fermeture_plainte",{idPlainte:t,raison:a},v.vc);200===n.status?(l(i.map((e=>e._id===n.data._id?n.data:e))),u("Done","success"),m(!1),o("")):(u(""+n.data,"error"),m(!1)),m(!1)}catch(n){console.log(n)}})(e),fullWidth:!0,variant:"contained",color:"primary",children:"Escalader"})})]})};var Le=i(528756);function Oe(e){let{clients:t}=e;const[i,l]=n.useState(),[a,s]=n.useState(),[d,c]=z.ZP.useMessage(),[u,p]=n.useState(!1),m=(0,o.v9)((e=>e.delai.delai)),[h,x]=n.useState({datetime:new Date,day_of_week:(new Date).getDay()});n.useEffect((()=>{(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");x(e.data)}catch(e){console.log(e)}})()}),[]);const j=async e=>{e.preventDefault();try{p(!0);const e="resolved_awaiting_confirmation",s=await(0,v.zL)(e,m,h),o=t.time_delai-(0,v.h$)(t.fullDateSave,null===h||void 0===h?void 0:h.datetime)>0?"IN SLA":"OUT SLA",r={num_ticket:null===t||void 0===t?void 0:t.idPlainte,statut:i,time_delai:s,fullDate:h.datetime,delai:o,commentaire:a},c={num_ticket:null===t||void 0===t?void 0:t.idPlainte,statut:i,time_delai:s,fullDate:h.datetime,delai:o,commentaire:a,open:"resolved"!==i},u="resolved"===i?c:r;200===(await f.Z.post(v.mA+"/verification_ticket",u,v.vc)).status?(n="Done",l="success",d.open({type:l,content:""+n,duration:5}),p(!1)):p(!1)}catch(s){console.log(s)}var n,l};return(0,r.jsxs)("div",{style:{width:"20rem"},children:[c,(0,r.jsx)("div",{style:{marginTop:"5px"},children:(0,r.jsx)(Le.Z,{label:"Statut",data:[{id:1,title:"Resolved",value:"resolved"},{id:2,title:"Not Resolved",value:"not_resolved"}],value:i,setValue:l})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)(A.Z,{onChange:e=>s(e.target.value),value:a,style:{marginTop:"10px"},name:"commentaire",autoComplete:"off",fullWidth:!0,label:"commentaire"})}),(0,r.jsx)("div",{children:(0,r.jsx)(g.Z,{disabled:u,onClick:e=>j(e),variant:"contained",color:"primary",fullWidth:!0,children:"Next"})})]})}const We=n.memo(Oe);var Be=i(306282),Fe=i(872665),He=i(968728),Ve=i(911198),Ye=i(869262),qe=i(429428),Ue=i(116759),Ge=i(51405),Qe=i(617592),$e=i(913392);const Ke=(0,Qe.ZP)((e=>(0,r.jsx)(Ue.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,$e.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function Je(e){let{client:t,validation:i,openChat:l,apresAssistance:a,openForm:s,fermeture:d}=e;const[c,u]=n.useState(null),p=Boolean(c),m=(0,o.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),h=()=>{u(null)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(g.Z,{id:""+t._id,"aria-controls":p?""+t._id:void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,variant:"contained",disableElevation:!0,onClick:e=>{u(e.currentTarget)},endIcon:(0,r.jsx)(qe.default,{}),children:"Options"}),(0,r.jsx)(Ke,{id:""+t._id,MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:c,open:p,onClose:h,children:(0,r.jsxs)("div",{children:[["Open_technician_visit","not_resolved"].includes(t.statut)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Ge.Z,{onClick:e=>{s(e,t),h()},disableRipple:!0,children:[(0,r.jsx)(Be.default,{}),"Assign a technician"]}),(0,r.jsxs)(Ge.Z,{onClick:()=>{a(t),h()},disableRipple:!0,children:[(0,r.jsx)(Fe.default,{}),"Send to call center"]})]}),"Complaint to close"!==t.statut&&t.open&&(0,r.jsxs)(Ge.Z,{onClick:()=>{d(t.idPlainte),h()},disableRipple:!0,children:[(0,r.jsx)(Ve.default,{}),"Request for closure"]}),"resolved_awaiting_confirmation"===t.statut&&((null===m||void 0===m?void 0:m.synchro_shop)&&(null===m||void 0===m?void 0:m.synchro_shop.length)>0||"superUser"===m.fonction)&&(0,r.jsxs)(Ge.Z,{onClick:()=>{i(t),h()},disableRipple:!0,children:[(0,r.jsx)(He.default,{}),"Check the action"]}),(0,r.jsxs)(Ge.Z,{onClick:e=>{l(t,e),h()},disableRipple:!0,children:[(0,r.jsx)(Ye.default,{}),"Detail"]})]})})]})}function Xe(){const[e,t]=n.useState(),{client:i,setClient:l,loadingClient:a}=n.useContext(s.E),{setPlainteSelect:d,setSelect:u}=n.useContext(c),[p,h]=n.useState({datetime:new Date,day_of_week:(new Date).getDay()}),[x,j]=n.useState(!1),[g,Z]=n.useState(),y=e=>{Z(e),j(!0)};n.useEffect((()=>{(async()=>{i&&t(i.filter((e=>"ticket"===e.type)))})()}),[i]);const[w,C]=z.ZP.useMessage(),S=(e,t)=>{w.open({type:t,content:""+e,duration:5})};n.useLayoutEffect((()=>{(async()=>{try{const e=await f.Z.get("https://worldtimeapi.org/api/timezone/Africa/Lubumbashi");h(e.data)}catch(e){console.log(e)}})()}),[]);const[b,N]=n.useState(!1),[_,D]=n.useState(),P=(e,t)=>{e.preventDefault(),D(t),N(!0)},k=(0,o.v9)((e=>e.delai.delai)),[A,T]=n.useState(!1),R=async e=>{try{if(e.technicien){if(p){T(!0);const t="resolved_awaiting_confirmation",n=await(0,v.zL)(t,k,p),a={num_ticket:e.idPlainte,time_delai:n,fullDate:p.datetime,delai:e.time_delai-(0,v.h$)(e.fullDateSave,p.datetime)>0?"IN SLA":"OUT SLA"},s=await f.Z.post(v.mA+"/assistance_ticket",a,v.vc);200===s.status?(l(i.map((e=>e._id===s.data._id?s.data:e))),S("Done","success"),T(!1)):T(!1)}}else S("The ticket is not assigned to a technician","error")}catch(t){console.log(t)}},[M,L]=n.useState(!1),[O,W]=n.useState(),B=e=>{W(e),L(!0)},F=(e,t)=>{t.preventDefault(),d(e),u(3)},H=[{field:"codeclient",headerName:"Code client",width:110,editable:!1},{field:"idPlainte",headerName:"Num_ticket",width:90,editable:!1},{field:"actionSynchro",headerName:"Synchro",width:90,editable:!1,renderCell:e=>{var t,i;return null===(t=e.row)||void 0===t||null===(i=t.technicien)||void 0===i?void 0:i.numSynchro}},{field:"statut",headerName:"Statut",width:200,editable:!1,renderCell:e=>(0,r.jsx)(ve.Z,{text:e.row.statut})},{field:"plainteSelect",headerName:"Issue",width:150,editable:!1},{field:"shop",headerName:"Shop",width:120,editable:!1},{field:"Tech",headerName:"Tech",width:80,editable:!1,renderCell:e=>{var t;return null===(t=e.row.technicien)||void 0===t?void 0:t.codeTech}},{field:"fullDateSave",headerName:"Assign at",width:75,editable:!1,renderCell:e=>E()(e.row.fullDateSave).format("DD/MM hh:mm")},{field:"submitedBy",headerName:"Saved by",width:90,editable:!1,renderCell:e=>e.row.submitedBy},{field:"dateClose",headerName:"SLA",width:130,editable:!1,renderCell:e=>e.row.open?(0,v.bQ)((e.row.time_delai-(0,v.h$)(e.row.fullDateSave,new Date)).toFixed(0)):(0,r.jsx)(ve.Z,{text:e.row.delai})},{field:"action",headerName:"Action",width:150,editable:!1,renderCell:e=>(0,r.jsx)("div",{children:(0,r.jsx)(Je,{client:e.row,openChat:F,validation:B,apresAssistance:R,openForm:P,fermeture:y})})}];return(0,r.jsxs)("div",{children:[C,A&&(0,r.jsx)(Me.Z,{open:!0,title:"Please wait",taille:"10rem"}),a&&(0,r.jsx)(xe.Z,{width:400,height:400}),e&&(0,r.jsx)(m.Z,{elevation:4,children:(0,r.jsx)(he._$,{rows:e,columns:H,initialState:{pagination:{paginationModel:{pageSize:20}}},pageSizeOptions:[20],disableRowSelectionOnClick:!0,getRowId:e=>e._id})}),_&&(0,r.jsx)(I.Z,{open:b,setOpen:N,title:"Affectation tech",children:(0,r.jsx)(Ee,{clients:_})}),O&&(0,r.jsx)(I.Z,{open:M,setOpen:L,title:"Check",children:(0,r.jsx)(We,{clients:O})}),(0,r.jsx)(I.Z,{open:x,setOpen:j,title:"Fermeture",children:(0,r.jsx)(Ie,{idPlainte:g})})]})}const et=n.memo(Xe);function tt(){const{select:e,setSelect:t,annuler:i}=n.useContext(c),u=(0,o.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),{client:p,loadingClient:m}=n.useContext(s.E),[h,x]=n.useState();return n.useEffect((()=>{u.plainte_callcenter&&x("callcenter"),u.plainteShop&&x("shop")}),[u]),(0,r.jsxs)(l.ZP,{children:[(0,r.jsxs)(l.ZP,{className:"divAppel",component:"div",children:[(0,r.jsx)(l.ZP,{onClick:()=>{i(),t(7)},className:"".concat(7===e&&"select"," titres"),children:(0,r.jsx)("p",{children:"Dashboard"})}),u&&(u.plainte_callcenter||u.plainteShop)&&(0,r.jsx)(l.ZP,{onClick:()=>{i(),t(1)},className:"".concat(1===e&&"select"," titres"),children:(0,r.jsx)("p",{children:"Create one"})}),(0,r.jsxs)(l.ZP,{onClick:()=>{i(),t(0)},className:"".concat(0===e&&"select"," titres"),sx:{width:"10rem"},children:[(0,r.jsx)(a.Z,{component:"p",children:"No technical Issues"}),(0,r.jsxs)(a.Z,{component:"p",className:"nbre",children:[p&&p.length>0&&p.filter((e=>"appel"===e.type)).length,m&&(0,r.jsx)(d.Z,{size:10})]})]}),(0,r.jsxs)(l.ZP,{onClick:()=>{i(),t(5)},className:"".concat(5===e&&"select"," titres"),children:[(0,r.jsx)(a.Z,{component:"p",children:"Technical Issues"}),(0,r.jsxs)(a.Z,{component:"p",className:"nbre",children:[p&&p.length>0&&p.filter((e=>"ticket"===e.type)).length,m&&(0,r.jsx)(d.Z,{size:10})]})]}),u.backOffice_plainte&&(0,r.jsxs)(l.ZP,{onClick:()=>{i(),t(2)},className:"".concat(2===e&&"select"," titres"),children:[(0,r.jsx)(a.Z,{component:"p",children:"Back office"}),(0,r.jsxs)(a.Z,{component:"p",className:"nbre",children:[p&&p.length>0&&p.filter((e=>"backoffice"===(null===e||void 0===e?void 0:e.operation))).length,m&&(0,r.jsx)(d.Z,{size:10})]})]}),!u.backOffice_plainte&&(0,r.jsx)(l.ZP,{onClick:()=>{i(),t(8)},className:"".concat(8===e&&"select"," titres"),children:(0,r.jsx)(a.Z,{component:"p",children:"Back office"})}),("co"===u.fonction||"superUser"===u.fonction)&&(0,r.jsxs)(l.ZP,{onClick:()=>{i(),t(4)},className:"".concat(4===e&&"select"," titres"),children:[(0,r.jsx)(a.Z,{component:"p",children:"Relocation"}),(0,r.jsxs)(a.Z,{component:"p",className:"nbre",children:[p&&p.length>0&&p.filter((e=>"awaiting_confirmation"===(null===e||void 0===e?void 0:e.statut))).length,m&&(0,r.jsx)(d.Z,{size:10,color:"inherit"})]})]}),(0,r.jsx)(l.ZP,{onClick:()=>{i(),t(9)},className:"".concat(9===e&&"select"," titres"),children:(0,r.jsx)(a.Z,{component:"p",children:"Search"})})]}),0===e&&(0,r.jsx)(Re,{}),1===e&&h&&(0,r.jsx)(ue,{property:h}),2===e&&(0,r.jsx)(je,{}),3===e&&(0,r.jsx)(Ze,{}),4===e&&(0,r.jsx)(be,{}),5===e&&(0,r.jsx)(et,{}),6===e&&(0,r.jsx)(Z,{}),7===e&&(0,r.jsx)(j,{}),8===e&&(0,r.jsx)(Ne,{}),9===e&&(0,r.jsx)(Te,{})]})}const it=n.memo(tt);function nt(){return(0,r.jsx)(p,{children:(0,r.jsx)(it,{})})}const lt=n.memo(nt)},334811:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(747313),l=i(966149),a=i(896467),s=i(233604),o=i(850301),d=i(508586),r=i(261113),c=i(346417);const u=n.forwardRef((function(e,t){return(0,c.jsx)(o.Z,{direction:"up",ref:t,...e})}));const p=function(e){let{open:t,children:i,setOpen:n,title:o}=e;return(0,c.jsx)("div",{children:(0,c.jsxs)(l.Z,{open:t,TransitionComponent:u,keepMounted:!0,onClose:()=>{n(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,c.jsxs)(s.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)(r.Z,{children:o}),(0,c.jsx)(d.Z,{fontSize:"small",color:"secondary",style:{cursor:"pointer"},onClick:()=>n(!1)})]}),(0,c.jsx)(a.Z,{children:i})]})})}},528756:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(747313),l=i(315090),a=i(51405),s=i(301550),o=i(788797),d=i(346417);const r=function(e){const{label:t,data:i,value:r,setValue:c}=e,[u,p]=n.useState(!1);return(0,d.jsxs)(s.Z,{sx:{width:"100%"},children:[(0,d.jsx)(l.Z,{id:"demo-controlled-open-select-label",children:t}),(0,d.jsx)(o.Z,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:u,onClose:()=>{p(!1)},onOpen:()=>{p(!0)},value:r,label:t,onChange:e=>{c(e.target.value)},children:function(e){return e.map(((e,t)=>(0,d.jsx)(a.Z,{value:e.value,children:e.title},t)))}(i)})]})}},728288:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(601413),l=i(747313),a=i(187190),s=i(690393),o=function(e,t){return l.createElement(s.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:a.Z}))};o.displayName="SearchOutlined";const d=l.forwardRef(o)},371207:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(181171),l=i(346417);const a=(0,n.Z)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},808425:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(181171),l=i(346417);const a=(0,n.Z)((0,l.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},404117:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(747313),l=i(683061),a=i(608007),s=i(617592),o=i(577342),d=i(814363),r=i(601167);function c(e){return(0,r.ZP)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var u=i(346417);const p=(0,s.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",...!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}}})),m=n.forwardRef((function(e,t){const i=(0,o.Z)({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:s=!1,...d}=i,r={...i,disableSpacing:s},m=(e=>{const{classes:t,disableSpacing:i}=e,n={root:["root",!i&&"spacing"]};return(0,a.Z)(n,c,t)})(r);return(0,u.jsx)(p,{className:(0,l.Z)(m.root,n),ownerState:r,ref:t,...d})}))}}]);