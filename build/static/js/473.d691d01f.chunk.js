"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[473],{866473:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var s=n(809019),r=n(261113),i=n(448310),a=n(887392),l=n(209478),o=n(42832),c=n(346417);const d=e=>{let{title:t,count:n,color:i}=e;return(0,c.jsx)(l.Z,{contentSX:{p:2.25,background:i},children:(0,c.jsxs)(o.Z,{spacing:.5,children:[(0,c.jsx)(r.Z,{variant:"h6",color:"textSecondary",children:t}),(0,c.jsx)(s.ZP,{container:!0,alignItems:"center",children:(0,c.jsx)(s.ZP,{item:!0,children:n?(0,c.jsx)(r.Z,{variant:"h4",color:"inherit",children:n}):(0,c.jsx)(r.Z,{variant:"h6",sx:{textAlign:"center"},color:"inherit",children:"Loading"})})})]})})};d.defaultProps={color:"primary"};const p=d;var x=n(747313),u=n(594500),f=n(661395),h=n(645624),m=n(483213),g=n(835662),j=n(46123),v=n.n(j),y=n(600205),Z=n(983169),b=n(74714),w=n(583447),P=n(373239);const C=["wrap","nowrap","wrap-reverse"],S=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],$=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];const O=function(e,t){return v()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n={};return C.forEach((s=>{n[`${e}-wrap-${s}`]=t.wrap===s})),n})(e,t)),((e,t)=>{const n={};return $.forEach((s=>{n[`${e}-align-${s}`]=t.align===s})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return S.forEach((s=>{n[`${e}-justify-${s}`]=t.justify===s})),n})(e,t)))},E=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},k=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},A=e=>{const{componentCls:t}=e,n={};return C.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},I=e=>{const{componentCls:t}=e,n={};return $.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},L=e=>{const{componentCls:t}=e,n={};return S.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n},G=(0,w.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:s}=e,r=(0,P.TS)(e,{flexGapSM:t,flexGap:n,flexGapLG:s});return[E(r),k(r),A(r),I(r),L(r)]}),(()=>({})));var N=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const M=x.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:s,className:r,style:i,flex:a,gap:l,children:o,vertical:c=!1,component:d="div"}=e,p=N(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:u,direction:f,getPrefixCls:h}=x.useContext(b.E_),m=h("flex",n),[g,j]=G(m),w=null!==c&&void 0!==c?c:null===u||void 0===u?void 0:u.vertical,P=v()(r,s,null===u||void 0===u?void 0:u.className,m,j,O(m,e),{[`${m}-rtl`]:"rtl"===f,[`${m}-gap-${l}`]:(0,Z.n)(l),[`${m}-vertical`]:w}),C=Object.assign(Object.assign({},null===u||void 0===u?void 0:u.style),i);return a&&(C.flex=a),l&&!(0,Z.n)(l)&&(C.gap=l),g(x.createElement(d,Object.assign({ref:t,className:P,style:C},(0,y.Z)(p,["justify","wrap","align"])),o))}));const D=M;var V=n(576940),z=n(966149),B=n(896467),T=n(233604),R=n(850301),_=n(319159),X=n(588551);const q=x.forwardRef((function(e,t){return(0,c.jsx)(R.Z,{direction:"up",ref:t,...e})})),F=()=>{const[e,t]=x.useState(!0),n=(0,u.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),[s,i]=x.useState({first:"",second:""}),[a,l]=x.useState("");return(0,c.jsxs)(z.Z,{open:e,TransitionComponent:q,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,c.jsx)(T.Z,{children:(0,c.jsx)(r.Z,{component:"p",sx:{fontSize:"12px"},children:"Modifiez le mot de passe par d\xe9faut"})}),(0,c.jsxs)(B.Z,{children:[""!==a&&(0,c.jsx)("p",{style:{fontSize:"12px",marginBottom:"10px",color:"red"},children:a}),(0,c.jsx)("div",{style:{marginBottom:"10px"},children:(0,c.jsx)(_.default,{type:"password",placeholder:"Mot de passe",onChange:e=>i({...s,first:e.target.value})})}),(0,c.jsx)("div",{style:{marginBottom:"10px"},children:(0,c.jsx)(_.default,{type:"password",placeholder:"Repeter le mot de passe",onChange:e=>i({...s,second:e.target.value})})}),(0,c.jsx)(D,{vertical:!0,gap:"small",style:{width:"100%"},children:(0,c.jsxs)(V.ZP,{onClick:e=>(async e=>{e.preventDefault();try{s.first!==s.second?l("Le mot de passe n'est pas conforme"):"1234"===s.first?l("mot de passe par d\xe9faut \xe0 modifier"):200===(await g.Z.put(f.V6+"/userAdmin",{codeAgent:n&&n.codeAgent,ancien:"1234",nouvelle:s.first})).status&&t(!1)}catch(r){console.log(r)}})(e),type:"primary",block:!0,children:[(0,c.jsx)(X.I8b,{fontSize:"small"}),(0,c.jsx)("span",{style:{marginLeft:"10px"},children:"Modifier"})]})})]})]})};var K=n(358446);const W=()=>{const[e,t]=(0,x.useState)(),[n,s]=(0,x.useState)(),[r,i]=(0,x.useState)(),[a,l]=(0,x.useState)(!1);return(0,x.useEffect)((()=>{(async()=>{l(!0);try{const e=await g.Z.get(f.V6+"/demandePourChaquePeriode",f.vc);i(e.data),l(!1)}catch(e){console.log(e)}})()}),[]),(0,x.useEffect)((()=>{(()=>{if(r&&r.length>0)try{let e=[],n=[];for(let t=0;t<r.length;t++)e.push(r[t].total),n.push(r[t]._id);t({chart:{id:"basic-bar"},xaxis:{categories:n}}),s([{name:"Demande au total",data:e}])}catch(e){console.log(e)}})()}),[r]),(0,c.jsx)("div",{children:a?(0,c.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"20rem"},children:(0,c.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})}):e&&n&&(0,c.jsx)(K.Z,{options:e,series:n,type:"line",height:345})})},H=()=>{var e;const t=(0,u.v9)((e=>e.user.user)),n=(0,u.v9)((e=>e.agent)),o=(0,u.v9)((e=>e.periodeActive)),d=(0,u.v9)((e=>e.reponse.reponse)),{client:j}=x.useContext(a.E),[v,y]=x.useState(0);return x.useEffect((()=>{(async()=>{try{const e=await g.Z.get(`${f.xK}/toutesDemandeAttente/1500`,f.vc);201===e.status&&"token expired"===e.data?(localStorage.removeItem("auth"),window.location.replace("/login")):y(e.data.length)}catch(e){console.log(e)}})()}),[]),(0,c.jsxs)(s.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[t&&t.first&&(0,c.jsx)(F,{}),(0,c.jsx)(s.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,c.jsx)(r.Z,{variant:"h5",children:"Dashboard"})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(p,{color:"#efe9aa",title:"Visites en attente",count:v})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(p,{color:"#d4d5ed",title:"Agents & Techniciens",count:null===n||void 0===n||null===(e=n.agent)||void 0===e?void 0:e.length})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(p,{color:"#cdc8f4",title:"Mois actif",count:null===o||void 0===o?void 0:o.periodeActive})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,c.jsx)(p,{color:"#efe9aa",title:"Complaints of today",count:null===j||void 0===j?void 0:j.length})}),(0,c.jsx)(s.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,c.jsxs)(s.ZP,{item:!0,xs:12,md:7,lg:8,children:[(0,c.jsxs)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,c.jsx)(s.ZP,{item:!0,children:(0,c.jsx)(r.Z,{variant:"h5",children:"Variation in household visits"})}),(0,c.jsx)(s.ZP,{item:!0})]}),(0,c.jsx)(l.Z,{sx:{mt:2},content:!1,children:(0,c.jsx)(W,{})})]}),(0,c.jsxs)(s.ZP,{item:!0,xs:12,md:5,lg:4,children:[(0,c.jsxs)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,c.jsx)(s.ZP,{item:!0,children:(0,c.jsx)(r.Z,{variant:"h5",children:"Visits answered beginning of month to date"})}),(0,c.jsx)(s.ZP,{item:!0})]}),(0,c.jsx)(l.Z,{sx:{mt:2},content:!1,children:(0,c.jsxs)(i.Z,{sx:{p:0,"& .MuiListItemButton-root":{py:2}},children:[!d&&(0,c.jsx)("p",{style:{textAlign:"center"},children:"Loading..."}),d&&d.length>0&&d.map(((e,t)=>(0,c.jsxs)(h.Z,{divider:!0,children:[(0,c.jsx)(m.Z,{primary:e._id}),(0,c.jsx)(r.Z,{sx:{marginLeft:"10px"},variant:"h5",children:e.nombre})]},t)))]})})]})]})}},983169:(e,t,n)=>{function s(e){return["small","middle","large"].includes(e)}function r(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}n.d(t,{T:()=>r,n:()=>s})}}]);