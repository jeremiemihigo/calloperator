"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[202],{810051:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n(809019),i=n(270501),a=n(261113),r=n(814328),l=n(435045),s=n(371207),d=n(91554),c=n(861689),u=n(369099),p=n(585281),m=n(624631),h=n(803105),v=n(435593),x=n(396180),f=n(835662),g=n(952122),Z=n(747313),j=n(594500),b=n(258467),y=n(661395),C=n(985038),S=n(609731),P=n(74834),k=n(857763),w=n(346417);function E(){const{adresse:e,shopSelect:t,setShopSelect:n,historique:i,setHistorique:a,initiale:E,setInitiale:z,otherItem:I,item:R,setItem:B}=Z.useContext(r.U),[L,$]=Z.useState(""),[F,M]=Z.useState(),{client:N,setClient:V}=Z.useContext(v.E),[W,H]=Z.useState(""),O=(0,b.TH)().state,T=(0,j.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.user})),[A,D]=Z.useState();Z.useEffect((()=>{T.plainte_callcenter&&D("callcenter"),T.plainteShop&&D("shop")}),[T]);const[q,G]=Z.useState(!1),_=(0,j.v9)((e=>{var t;return null===(t=e.shop)||void 0===t?void 0:t.shop})),[J,U]=Z.useState(!1),{recommandation:K,nomClient:Q,contact:X}=E,[Y,ee]=x.ZP.useMessage(),te=(e,t)=>{Y.open({type:t,content:""+e,duration:10})},ne=(0,j.v9)((e=>e.plainte.plainte.filter((e=>e.property===A||"all"===e.property)))),oe=e=>{const{name:t,value:n}=e.target;z({...E,[t]:n})};Z.useEffect((()=>{a(),n(""),z({recommandation:"",nomClient:"",contact:""})}),[]),Z.useEffect((()=>{if(O){let e=_.filter((e=>e.shop===O.shop));z({recommandation:null===O||void 0===O?void 0:O.recommandation,nomClient:null===O||void 0===O?void 0:O.nomClient,contact:null===O||void 0===O?void 0:O.contact}),$(null===O||void 0===O?void 0:O.codeclient),n(e[0])}}),[O]);const[ie,ae]=Z.useState([]),[re,le]=Z.useState(!1),se=(0,b.s0)();Z.useEffect((()=>{var e,t;i&&(null===i||void 0===i?void 0:i.info.length)>0&&(n(null===(e=i.info[0])||void 0===e?void 0:e.shop),z({...E,nomClient:null===(t=i.info[0])||void 0===t?void 0:t.nomClient}))}),[i]),Z.useEffect((()=>{R&&(["GLVGG","WVW3J"].includes(R.id)&&H("Regularisation"),"RW38Z"===R.id&&H("Desangagement"),"L2N7T"===R.id&&H("Repossession"),"1GS1J"===R.id&&H("Downgrade"),"9NPC7"===R.id&&H("Upgrade"),"TRRIK"===R.id&&H("Information"),"CF5GL"===R.id&&H("Rafraichissement"))}),[R]);const[de,ce]=Z.useState("");return Z.useEffect((()=>{F&&(()=>{if(F){let e=null===F||void 0===F?void 0:F.alltype.filter((e=>e.property===A||"all"===e.property));ce([...e,{_id:"autre",title:"autre",idPlainte:"autre",id:"autre"}])}})()}),[F]),(0,w.jsxs)(w.Fragment,{children:[ee,re&&(0,w.jsx)(d.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,w.jsx)("div",{children:(0,w.jsx)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:"Please wait..."})})}),(0,w.jsxs)(o.ZP,{container:!0,children:[(0,w.jsx)(o.ZP,{item:!0,lg:10,sx:{paddingRight:"10px"},children:(0,w.jsx)(g.Z,{label:"Code client",setValue:$,value:L,showIcon:!0})}),(0,w.jsx)(o.ZP,{item:!0,lg:2,sx:{display:"flex",alignItems:"center"},children:(0,w.jsx)(c.Z,{title:"confirm the search",children:(0,w.jsx)(u.Z,{onClick:e=>(async e=>{e.preventDefault(),U(!0);try{const e=await f.Z.get(`${y.mA}/infoclient/${L}`,y.vc);200===e.status&&(a(e.data),U(!1))}catch(t){console.log(t)}})(e),variant:"contained",color:"primary",children:J?(0,w.jsx)(p.Z,{size:20,color:"inherit"}):(0,w.jsx)(l.Z,{fontSize:"small"})})})})]}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsx)(m.Z,{onChange:e=>oe(e),value:Q,style:{marginTop:"10px"},name:"nomClient",autoComplete:"off",fullWidth:!0,label:"customer name"})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:_&&(0,w.jsx)(h.Z,{value:t,setValue:n,options:_,title:"Shop",propr:"shop"})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsx)(m.Z,{onChange:e=>oe(e),value:X,style:{marginTop:"10px"},name:"contact",autoComplete:"off",fullWidth:!0,label:"Contact"})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:ne&&(0,w.jsx)(h.Z,{value:F,setValue:M,options:ne,title:"Plainte",propr:"title"})}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:de&&(0,w.jsx)(h.Z,{value:R,setValue:B,options:de,title:"Probleme",propr:"title"})}),R&&R.other&&(null===R||void 0===R?void 0:R.tableother.length)>0&&(0,w.jsx)(P.Z,{data:R,liste:ie,setListe:ae}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{style:{marginBottom:"10px"},children:(0,w.jsx)(m.Z,{onChange:e=>oe(e),value:K,style:{marginTop:"10px"},name:"recommandation",autoComplete:"off",fullWidth:!0,label:"Commentaire"})}),(0,w.jsx)(k.Z,{type:W}),(0,w.jsxs)(o.ZP,{container:!0,children:[(0,w.jsx)(o.ZP,{item:!0,lg:3,children:(0,w.jsxs)(u.Z,{disabled:re,onClick:n=>(async n=>{try{if(n.preventDefault(),null!==R&&void 0!==R&&R.adresse&&!e)te("Les nouvelles adresses du client sont obligatoire","error");else{le(!0);const n={codeclient:L,shop:null===t||void 0===t?void 0:t.shop,typePlainte:null===F||void 0===F?void 0:F.title,plainteSelect:R.other?R.oneormany?ie.join(";"):null===I||void 0===I?void 0:I.title:null===R||void 0===R?void 0:R.title,recommandation:E.recommandation,nomClient:Q,contact:E.contact,commentaire:E.recommandation,adresse:e,open:!1},o={id:O._id,data:n},i=await f.Z.put(`${y.mA}/edit_complet`,o,y.vc);200===i.status&&(V([...N,i.data]),te("Done","success"),le(!1),se("/call")),201===i.status&&(le(!1),te(""+i.data,"error"))}}catch(o){le(!1),te("Error "+o,"error")}})(n),fullWidth:!0,color:"secondary",variant:"contained",children:[(0,w.jsx)(s.Z,{fontSize:"small"}),(0,w.jsx)("span",{style:{marginLeft:"10px"},children:"Edit"})]})}),(0,w.jsx)(o.ZP,{item:!0,lg:3.5,sx:{paddingLeft:"10px"},children:(0,w.jsx)(u.Z,{disabled:re,onClick:e=>(e=>{e.preventDefault(),se("/call")})(e),fullWidth:!0,color:"warning",variant:"contained",children:"Exit"})})]}),(0,w.jsx)(C.Z,{open:q,setOpen:G,title:"New customer addresses",children:(0,w.jsx)(S.Z,{setOpen:G})})]})}const z=Z.memo(E);const I=function(){return(0,w.jsx)(r.Z,{children:(0,w.jsx)(o.ZP,{container:!0,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,w.jsx)(o.ZP,{item:!0,lg:6,children:(0,w.jsxs)(i.Z,{elevation:3,sx:{padding:"10px"},children:[(0,w.jsx)(a.Z,{component:"p",sx:{marginBottom:"14px",fontWeight:"bolder"},children:"Edit complaint"}),(0,w.jsx)(z,{})]})})})})}},644758:(e,t,n)=>{n.d(t,{Z:()=>S});var o=n(747313),i=n(683061),a=n(608007),r=n(913392),l=n(197423),s=n(181171),d=n(346417);const c=(0,s.Z)((0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,s.Z)((0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,s.Z)((0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var m=n(691615),h=n(577342),v=n(617592),x=n(814363),f=n(601167);function g(e){return(0,f.ZP)("MuiCheckbox",e)}const Z=(0,x.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),j=(0,v.ZP)(l.Z,{shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,m.Z)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return{color:(t.vars||t).palette.text.secondary,...!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,r.Fq)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},..."default"!==n.color&&{[`&.${Z.checked}, &.${Z.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${Z.disabled}`]:{color:(t.vars||t).palette.action.disabled}}}})),b=(0,d.jsx)(u,{}),y=(0,d.jsx)(c,{}),C=(0,d.jsx)(p,{}),S=o.forwardRef((function(e,t){var n,r;const l=(0,h.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:s=b,color:c="primary",icon:u=y,indeterminate:p=!1,indeterminateIcon:v=C,inputProps:x,size:f="medium",className:Z,...S}=l,P=p?v:u,k=p?v:s,w={...l,color:c,indeterminate:p,size:f},E=(e=>{const{classes:t,indeterminate:n,color:o}=e,i={root:["root",n&&"indeterminate",`color${(0,m.Z)(o)}`]},r=(0,a.Z)(i,g,t);return{...t,...r}})(w);return(0,d.jsx)(j,{type:"checkbox",inputProps:{"data-indeterminate":p,...x},icon:o.cloneElement(P,{fontSize:null!=(n=P.props.fontSize)?n:f}),checkedIcon:o.cloneElement(k,{fontSize:null!=(r=k.props.fontSize)?r:f}),ownerState:w,ref:t,className:(0,i.Z)(E.root,Z),...S,classes:E})}))},241727:(e,t,n)=>{n.d(t,{Z:()=>Z});var o=n(747313),i=n(683061),a=n(608007),r=n(691615),l=n(261113),s=n(591397),d=n(799008),c=n(617592),u=n(814363),p=n(601167);function m(e){return(0,p.ZP)("MuiInputAdornment",e)}const h=(0,u.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v,x=n(577342),f=n(346417);const g=(0,c.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,r.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,..."filled"===n.variant&&{[`&.${h.positionStart}&:not(.${h.hiddenLabel})`]:{marginTop:16}},..."start"===n.position&&{marginRight:8},..."end"===n.position&&{marginLeft:8},...!0===n.disablePointerEvents&&{pointerEvents:"none"}}})),Z=o.forwardRef((function(e,t){const n=(0,x.Z)({props:e,name:"MuiInputAdornment"}),{children:c,className:u,component:p="div",disablePointerEvents:h=!1,disableTypography:Z=!1,position:j,variant:b,...y}=n,C=(0,d.Z)()||{};let S=b;b&&C.variant,C&&!S&&(S=C.variant);const P={...n,hiddenLabel:C.hiddenLabel,size:C.size,disablePointerEvents:h,position:j,variant:S},k=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:i,size:l,variant:s}=e,d={root:["root",n&&"disablePointerEvents",i&&`position${(0,r.Z)(i)}`,s,o&&"hiddenLabel",l&&`size${(0,r.Z)(l)}`]};return(0,a.Z)(d,m,t)})(P);return(0,f.jsx)(s.Z.Provider,{value:null,children:(0,f.jsx)(g,{as:p,ownerState:P,className:(0,i.Z)(k.root,u),ref:t,...y,children:"string"!==typeof c||Z?(0,f.jsxs)(o.Fragment,{children:["start"===j?v||(v=(0,f.jsx)("span",{className:"notranslate",children:"\u200b"})):null,c]}):(0,f.jsx)(l.Z,{color:"text.secondary",children:c})})})}))},197423:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(747313),i=n(683061),a=n(608007),r=n(691615),l=n(617592),s=n(653800),d=n(799008),c=n(338743),u=n(814363),p=n(601167);function m(e){return(0,p.ZP)("PrivateSwitchBase",e)}(0,u.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var h=n(346417);const v=(0,l.ZP)(c.Z)((e=>{let{ownerState:t}=e;return{padding:9,borderRadius:"50%",..."start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},..."end"===t.edge&&{marginRight:"small"===t.size?-3:-12}}})),x=(0,l.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),f=o.forwardRef((function(e,t){const{autoFocus:n,checked:o,checkedIcon:l,className:c,defaultChecked:u,disabled:p,disableFocusRipple:f=!1,edge:g=!1,icon:Z,id:j,inputProps:b,inputRef:y,name:C,onBlur:S,onChange:P,onFocus:k,readOnly:w,required:E=!1,tabIndex:z,type:I,value:R,...B}=e,[L,$]=(0,s.Z)({controlled:o,default:Boolean(u),name:"SwitchBase",state:"checked"}),F=(0,d.Z)();let M=p;F&&"undefined"===typeof M&&(M=F.disabled);const N="checkbox"===I||"radio"===I,V={...e,checked:L,disabled:M,disableFocusRipple:f,edge:g},W=(e=>{const{classes:t,checked:n,disabled:o,edge:i}=e,l={root:["root",n&&"checked",o&&"disabled",i&&`edge${(0,r.Z)(i)}`],input:["input"]};return(0,a.Z)(l,m,t)})(V);return(0,h.jsxs)(v,{component:"span",className:(0,i.Z)(W.root,c),centerRipple:!0,focusRipple:!f,disabled:M,tabIndex:null,role:void 0,onFocus:e=>{k&&k(e),F&&F.onFocus&&F.onFocus(e)},onBlur:e=>{S&&S(e),F&&F.onBlur&&F.onBlur(e)},ownerState:V,ref:t,...B,children:[(0,h.jsx)(x,{autoFocus:n,checked:o,defaultChecked:u,className:W.input,disabled:M,id:N?j:void 0,name:C,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;$(t),P&&P(e,t)},readOnly:w,ref:y,required:E,ownerState:V,tabIndex:z,type:I,..."checkbox"===I&&void 0===R?{}:{value:R},...b}),L?l:Z]})}))}}]);