"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[890],{803105:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(81270),a=i(813292),s=i(624631),l=i(346417);const r=(0,n.D)();const o=function(e){let{value:t,setValue:i,options:n,title:o,propr:c}=e;return(0,l.jsx)(a.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?i({title:t}):t&&t.inputValue?i({title:t.inputValue}):i(t)},filterOptions:(e,t)=>r(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with",options:n,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+c],renderOption:(e,t)=>(0,l.jsx)("li",{...e,children:t[""+c]},t.id),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,l.jsx)(s.Z,{...e,label:o||"Titre"})})}},350723:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(91554),a=i(270501),s=i(585281),l=i(346417);const r=function(e){let{open:t,title:i,taille:r}=e;return(0,l.jsx)(n.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+100},open:t,children:(0,l.jsx)(a.Z,{sx:{width:r||"7rem",display:"flex",padding:"10px",alignItems:"center",justifyContent:"center"},children:(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsx)(s.Z,{size:15,color:"primary"}),(0,l.jsx)("p",{style:{fontSize:"12px"},children:i||"Laading..."})]})})})}},540695:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(346417);const a=function(e){let{texte:t}=e;return(0,n.jsx)("div",{style:{display:"flex",height:"20rem",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)("img",{src:"data:image/png;base64,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",alt:"attenteImage"})}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{style:{padding:"0px",textAlign:"center",marginTop:"15px",fontSize:"15px",fontWeight:"bolder"},children:t})})]})})}},249555:(e,t,i)=>{i.d(t,{Z:()=>s});const n=i.p+"static/media/loader.a8e321df755614ca01e3.gif";var a=i(346417);const s=function(e){let{width:t,height:i}=e;return(0,a.jsx)("div",{style:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginTop:"30px"},children:(0,a.jsx)("img",{width:t,height:i,src:n,alt:"Loading"})})}},814328:(e,t,i)=>{i.d(t,{U:()=>s,Z:()=>r});var n=i(747313),a=i(346417);const s=(0,n.createContext)(),l=e=>{const[t,i]=n.useState(7),[l,r]=n.useState(""),[o,c]=n.useState(),[d,u]=n.useState({appel:[],info:[]}),[h,p]=n.useState(""),[v,x]=n.useState(""),[g,f]=n.useState(""),[m,j]=n.useState(""),[y,A]=n.useState({recommandation:"",nomClient:"",contact:""}),[S,C]=n.useState("");return(0,a.jsx)(s.Provider,{value:{select:t,setSelect:i,plainteSelect:l,setPlainteSelect:r,adresse:o,setAdresse:c,historique:d,setHistorique:u,codeclient:h,setCodeclient:p,shopSelect:v,setShopSelect:x,initiale:y,setInitiale:A,item:S,setItem:C,otherItem:g,setOtherItem:f,annuler:()=>{A({recommandation:"",nomClient:"",contact:""}),x(""),f(""),p(""),c(),r(""),C(""),i(7),u({appel:[],info:[]})},setRaisonOngoing:j,raisonOngoing:m},children:e.children})},r=n.memo(l)},878375:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(557829),a=i(319860),s=i(747313),l=i(346417);const r=e=>{let{text:t,taille:i,...s}=e;const r=(0,a.Z)();let o;switch(t){case"OUT SLA":case"Ouvert":case"Complaint to close":o=r.palette.warning.main;break;case"IN SLA":case"Fermer":case"closed":case"resolved":o=r.palette.success.main;break;default:o=r.palette.secondary.main}return(0,l.jsx)(n.Z,{sx:{width:"100%",height:"50%",textAlign:"center",color:"white",borderRadius:"5px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",bgcolor:o,fontSize:i||12},...s,children:t&&(c=t,c.charAt(0).toUpperCase()+c.slice(1))});var c},o=s.memo(r)},712648:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var n=i(814328),a=i(270501),s=i(614680),l=i(396180),r=i(835662),o=i(540695),c=i(249555),d=i(350723),u=i(887392),h=i(70816),p=i.n(h),v=i(624631),x=i(369099),g=i(803105),f=i(747313),m=i(594500),j=i(661395),y=i(346417);function A(e){let{clients:t}=e;const i=(0,m.v9)((e=>{var i;return null===(i=e.agent)||void 0===i?void 0:i.agent.filter((e=>{var i;return(null===(i=e.shop[0])||void 0===i?void 0:i.shop)===(null===t||void 0===t?void 0:t.shop)&&"tech"===e.fonction}))})),[n,a]=f.useState(""),[s,o]=f.useState(""),{client:c,setClient:d}=f.useContext(u.E),[h,p]=l.ZP.useMessage(),A=(e,t)=>{h.open({type:t,content:""+e,duration:5})};return(0,y.jsxs)("div",{style:{width:"20rem"},children:[p,(0,y.jsx)("div",{style:{marginTop:"10px"},children:i&&(0,y.jsx)(g.Z,{value:n,setValue:a,options:i,title:"Technicien",propr:"nom"})}),(0,y.jsx)("div",{style:{marginBottom:"10px"},children:(0,y.jsx)(v.Z,{onChange:e=>o(e.target.value),style:{marginTop:"10px"},name:"numSynchro",autoComplete:"off",fullWidth:!0,value:s,label:"Numero synchro"})}),(0,y.jsx)("div",{children:(0,y.jsx)(x.Z,{onClick:e=>(async e=>{e.preventDefault();try{const e=await r.Z.post(`${j.mA}/assign_tech_ticket`,{num_ticket:null===t||void 0===t?void 0:t.idPlainte,codeAgent:null===n||void 0===n?void 0:n.codeAgent,numSynchro:s},j.vc);200===e.status&&(A("Technician assigned","success"),a(""),o(""),d(c.map((t=>t._id===e.data._id?e.data:t)))),201===e.status&&A("Assignment error","error")}catch(i){A(""+i,"success")}})(e),fullWidth:!0,color:"primary",variant:"contained",children:"Valider"})})]})}const S=f.memo(A);const C=function(e){let{idPlainte:t}=e;const[i,n]=f.useState(""),{client:a,setClient:s}=f.useContext(u.E);f.useEffect((()=>{n("")}),[t]);const[o,c]=l.ZP.useMessage(),d=(e,t)=>{o.open({type:t,content:""+e,duration:5})},[h,p]=f.useState(!1);return(0,y.jsxs)("div",{style:{width:"20rem"},children:[c,(0,y.jsx)("div",{style:{marginTop:"10px"},children:(0,y.jsx)(v.Z,{value:i,onChange:e=>n(e.target.value),name:"raison",autoComplete:"off",fullWidth:!0,label:"Raison de Fermeture"})}),(0,y.jsx)("div",{style:{marginTop:"10px"},children:(0,y.jsx)(x.Z,{disabled:h,onClick:e=>(async e=>{try{e.preventDefault(),p(!0);const l=await r.Z.post(j.mA+"/fermeture_plainte",{idPlainte:t,raison:i},j.vc);200===l.status&&(d("Done","success"),s(a.map((e=>e.idPlainte===l.data.idPlainte?l.data:e))),p(!1),n("")),201===l.status&&(d(""+l.data,"error"),p(!1))}catch(l){d(""+l,"error"),p(!1)}})(e),fullWidth:!0,variant:"contained",color:"primary",children:"Escalader"})})]})};var b=i(878375),k=i(306282),w=i(872665),P=i(968728),Z=i(911198),I=i(869262),U=i(429428),G=i(116759),N=i(51405),O=i(617592),D=i(913392);const F=(0,O.ZP)((e=>(0,y.jsx)(G.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,D.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));function R(e){let{client:t,validation:i,openChat:n,apresAssistance:a,openForm:s,fermeture:l}=e;const[r,o]=f.useState(null),c=Boolean(r),d=(0,m.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),u=()=>{o(null)};return(0,y.jsxs)("div",{children:[(0,y.jsx)(x.Z,{id:""+t._id,"aria-controls":c?""+t._id:void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,variant:"contained",disableElevation:!0,onClick:e=>{o(e.currentTarget)},endIcon:(0,y.jsx)(U.default,{}),children:"Options"}),(0,y.jsx)(F,{id:""+t._id,MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:r,open:c,onClose:u,children:(0,y.jsxs)("div",{children:[["Open_technician_visit","Not_resolved"].includes(t.statut)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(N.Z,{onClick:e=>{s(e,t),u()},disableRipple:!0,children:[(0,y.jsx)(k.default,{}),"Assign a technician"]}),(0,y.jsxs)(N.Z,{onClick:()=>{a(t),u()},disableRipple:!0,children:[(0,y.jsx)(w.default,{}),"Send to call center"]})]}),"Complaint to close"!==t.statut&&t.open&&(0,y.jsxs)(N.Z,{onClick:()=>{l(t.idPlainte),u()},disableRipple:!0,children:[(0,y.jsx)(Z.default,{}),"Request for closure"]}),"resolved_awaiting_confirmation"===t.statut&&((null===d||void 0===d?void 0:d.synchro_shop)&&(null===d||void 0===d?void 0:d.synchro_shop.length)>0||"superUser"===d.fonction)&&(0,y.jsxs)(N.Z,{onClick:()=>{i(t),u()},disableRipple:!0,children:[(0,y.jsx)(P.default,{}),"Check the action"]}),(0,y.jsxs)(N.Z,{onClick:e=>{n(t,e),u()},disableRipple:!0,children:[(0,y.jsx)(I.default,{}),"Detail"]})]})})]})}const T=f.memo(R);var B=i(528756);function H(e){let{clients:t}=e;const[i,n]=f.useState(""),[a,s]=f.useState(""),{client:o,setClient:c}=f.useContext(u.E),[d,h]=f.useState(!1),[p,g]=l.ZP.useMessage(),m=(e,t)=>{p.open({type:t,content:""+e,duration:5})};return(0,y.jsxs)("div",{style:{width:"20rem"},children:[g,(0,y.jsx)("div",{style:{marginTop:"5px"},children:(0,y.jsx)(B.Z,{label:"Statut",data:[{id:1,title:"Resolved",value:"resolved"},{id:2,title:"Not Resolved",value:"Open_technician_visit"}],value:i,setValue:n})}),(0,y.jsx)("div",{style:{marginBottom:"10px"},children:(0,y.jsx)(v.Z,{onChange:e=>s(e.target.value),value:a,style:{marginTop:"10px"},name:"commentaire",autoComplete:"off",fullWidth:!0,label:"commentaire"})}),(0,y.jsx)("div",{children:(0,y.jsx)(x.Z,{disabled:d,onClick:e=>(async e=>{e.preventDefault();try{h(!0);const e={num_ticket:null===t||void 0===t?void 0:t.idPlainte,statut:i,commentaire:a,open:"resolved"!==i},l=await r.Z.post(`${j.mA}/verification_ticket`,e,j.vc);if(200===l.status){if("resolved"===l.data.statut)m("You can only refresh the page","success");else{let e=o.map((e=>e._id===l.data._id?l.data:e));c(e)}s(""),n(""),h(!1)}else m(""+l.data,"error")}catch(l){m(""+l,"error")}})(e),variant:"contained",color:"primary",fullWidth:!0,children:"Next"})})]})}const M=f.memo(H);var E=i(258467),L=i(985038);function W(){const[e,t]=f.useState(),[i,h]=f.useState(!1),{client:v,setClient:x}=f.useContext(u.E),{setPlainteSelect:g,setSelect:m}=f.useContext(n.U),A=(0,E.TH)(),[k,w]=f.useState(!1),[P,Z]=f.useState(),I=e=>{Z(e),w(!0)};f.useLayoutEffect((()=>{(()=>{try{h(!0);const{state:e,statut:i}=A.state;v&&"technicien"===e&&(t(v.filter((e=>"ticket"===e.type&&void 0===e.technicien))),h(!1)),v&&"encours"===e&&(t(v.filter((e=>"Open_technician_visit"===e.statut&&void 0!==e.technicien))),h(!1)),v&&"callcenter"===e&&(t(v.filter((e=>"resolved_awaiting_confirmation"===e.statut))),h(!1)),!e&&i&&(t(v.filter((e=>e.statut===i))),h(!1)),["technicien","encours","callcenter"].includes(e)||""!==i||(t(v.filter((t=>{var i;return(null===t||void 0===t||null===(i=t.technicien)||void 0===i?void 0:i.codeTech)===e}))),h(!1))}catch(e){console.log(e)}})()}),[v,A]);const[U,G]=l.ZP.useMessage(),N=(e,t)=>{U.open({type:t,content:""+e,duration:5})},[O,D]=f.useState(!1),[F,R]=f.useState(),B=(e,t)=>{e.preventDefault(),R(t),D(!0)},[H,W]=f.useState(!1),Y=async e=>{try{if(e.technicien){W(!0);const t=await r.Z.post(`${j.mA}/assistance_ticket`,{num_ticket:e.idPlainte},j.vc);200===t.status?(N("Done","success"),x(v.map((e=>e._id===t.data._id?t.data:e))),W(!1)):(N(""+t.data,"error"),W(!1))}else N("The ticket is not assigned to a technician","error")}catch(t){console.log(t)}},[V,z]=f.useState(!1),[Q,q]=f.useState(),J=e=>{q(e),z(!0)},X=(e,t)=>{t.preventDefault(),g(e),m(3)};function K(e){let[t,i]=(0,f.useState)(e);if(f.useEffect((()=>{const e=setInterval((()=>{i((e=>e>0?e-1:0))}),1e3);return()=>clearInterval(e)}),[e]),t<=0)return(0,y.jsx)("p",{style:{background:"red",padding:"0px",margin:"0px",height:"50%",fontSize:"12px",color:"white",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"OUT SLA"});{const e=Math.floor(t/86400),i=Math.floor(t%86400/3600),n=Math.floor(t%3600/60),a=t%60;return(0,y.jsx)("p",{style:{background:"green",padding:"0px",margin:"0px",height:"50%",fontSize:"12px",color:"white",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:`\n        ${e+"jr"} ${i+"h"} ${n+"m"} ${a+"s"}\n        `})}}const _=[{field:"codeclient",headerName:"Code client",width:110,editable:!1},{field:"idPlainte",headerName:"Num_ticket",width:90,editable:!1},{field:"actionSynchro",headerName:"Synchro",width:90,editable:!1,renderCell:e=>{var t,i;return null===(t=e.row)||void 0===t||null===(i=t.technicien)||void 0===i?void 0:i.numSynchro}},{field:"statut",headerName:"Statut",width:200,editable:!1,renderCell:e=>(0,y.jsx)(b.Z,{text:e.row.statut})},{field:"plainteSelect",headerName:"Issue",width:150,editable:!1},{field:"shop",headerName:"Shop",width:120,editable:!1},{field:"Tech",headerName:"Tech",width:80,editable:!1,renderCell:e=>{var t;return null===(t=e.row.technicien)||void 0===t?void 0:t.codeTech}},{field:"dateSave",headerName:"Date open",width:75,editable:!1,renderCell:e=>p()(e.row.dateSave).format("DD-MM-YYYY")},{field:"submitedBy",headerName:"Saved by",width:90,editable:!1,renderCell:e=>e.row.submitedBy},{field:"SLA",headerName:"SLA",width:130,editable:!1,renderCell:e=>{var t;return(0,y.jsx)(y.Fragment,{children:e.row.open?K(60*(e.row.time_delai-(0,j.h$)(e.row.fullDateSave,new Date).toFixed(0))):(0,y.jsx)(b.Z,{text:null===(t=e.row)||void 0===t?void 0:t.delai})})}},{field:"action",headerName:"Action",width:150,editable:!1,renderCell:e=>(0,y.jsx)(T,{client:e.row,openChat:X,validation:J,apresAssistance:Y,openForm:B,fermeture:I})}];return(0,y.jsxs)(y.Fragment,{children:[G,H&&(0,y.jsx)(d.Z,{open:!0,title:"Please wait",taille:"10rem"}),i&&(0,y.jsx)(c.Z,{width:400,height:400}),!i&&e&&e.length>0&&(0,y.jsx)(a.Z,{elevation:4,children:(0,y.jsx)(s._$,{rows:e,columns:_,initialState:{pagination:{paginationModel:{pageSize:100}}},pageSizeOptions:[100],disableRowSelectionOnClick:!0,getRowId:e=>e._id})}),!i&&e&&0===e.length&&(0,y.jsx)(o.Z,{texte:"No pending technical complaints"}),F&&(0,y.jsx)(L.Z,{open:O,setOpen:D,title:"Affectation tech",children:(0,y.jsx)(S,{clients:F})}),Q&&(0,y.jsx)(L.Z,{open:V,setOpen:z,title:"Check",children:(0,y.jsx)(M,{clients:Q,close:z})}),(0,y.jsx)(L.Z,{open:k,setOpen:w,title:"Fermeture",children:(0,y.jsx)(C,{idPlainte:P})})]})}const Y=f.memo(W);const V=function(){return(0,y.jsx)(n.Z,{children:(0,y.jsx)(Y,{})})}}}]);