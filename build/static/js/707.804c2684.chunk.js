"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[707],{803105:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(81270),i=n(813292),r=n(624631),a=n(346417);const s=(0,o.D)();const l=function(e){let{value:t,setValue:n,options:o,title:l,propr:c}=e;return(0,a.jsx)(i.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>s(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with",options:o,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+c],renderOption:(e,t)=>(0,a.jsx)("li",{...e,children:t[""+c]},t.id),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,a.jsx)(r.Z,{...e,label:l||"Titre"})})}},680509:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(786138),i=n(747313),r=n(346417);const a=function(e){const{message:t}=e,[n,a]=i.useState(!0);return(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,onClose:()=>{a(!1)},message:t},"bottom center")})}},501707:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var o=n(809019),i=n(270501),r=n(261113),a=n(189843),s=n(680509),l=n(747313),c=n(594500),u=n(176893),d=n(588551),p=n(286961),m=n(32084),g=n(624631),h=n(369099),x=n(803105),v=n(416031),f=n.n(v),j=n(346417);const Z=function(e){let{dataToUpdate:t,setDataToUpdate:n}=e;const[i,r]=l.useState(""),[a,s]=l.useState(),[p,v]=l.useState(""),[Z,C]=l.useState(""),b=(0,c.I0)(),y=()=>{n(),r(""),s(""),C(""),v("")},w=[{id:1,title:"Technicien (TECH)",value:"tech"},{id:2,title:"Agent (SA)",value:"agent"},{id:3,title:"Zonal_Business_Manager",value:"ZBM"},{id:4,title:"Process_Officer",value:"PO"},{id:5,title:"RS",value:"RS"},{id:6,title:"Shop_Manager",value:"SM"},{id:7,title:"Team_leader",value:"TL"},{id:8,title:"Stagiaire",value:"stagiaire"},{id:8,title:"Agent_de_recouvrement_(AR)",value:"AR"},{id:9,title:"Shop_Assistante",value:"shop_assistante"},{id:10,title:"Pour tous",value:"all"}];return l.useEffect((()=>{if(t){r(null===t||void 0===t?void 0:t.title),s(null===t||void 0===t?void 0:t.date),C(null===t||void 0===t?void 0:t.content);let e=f().filter(w,{value:null===t||void 0===t?void 0:t.concerne});v(e[0])}}),[t]),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{style:{textAlign:"center",padding:0,margin:0,fontSize:"10px"},children:"@name: pour afficher le nom de l'agent dans le message"}),(0,j.jsx)("p",{style:{textAlign:"center",fontSize:"10px"},children:"@p: pour un paragraphe"}),(0,j.jsx)("div",{className:"mb-3",children:(0,j.jsx)(o.ZP,{sx:{marginTop:"10px"},children:(0,j.jsx)(x.Z,{value:p,setValue:v,options:w,title:"Concerne",propr:"title"})})}),(0,j.jsx)("div",{style:{marginBottom:"5px"},children:(0,j.jsx)(g.Z,{onChange:e=>r(e.target.value),style:{marginTop:"10px"},name:"title",autoComplete:"off",fullWidth:!0,value:i,label:"Objet"})}),(0,j.jsx)("div",{style:{marginBottom:"5px"},children:(0,j.jsx)(g.Z,{id:"outlined-multiline-static",label:"Message",multiline:!0,fullWidth:!0,rows:7,value:Z,onChange:e=>C(e.target.value)})}),(0,j.jsx)("div",{style:{marginBottom:"5px"},children:(0,j.jsx)(g.Z,{onChange:e=>s(e.target.value),style:{marginTop:"10px"},name:"date",autoComplete:"off",type:"date",fullWidth:!0,value:a,label:"Date d'expiration"})}),(0,j.jsxs)(o.ZP,{sx:{marginTop:"10px"},container:!0,children:[(0,j.jsxs)(o.ZP,{item:!0,lg:6,children:[" ",(0,j.jsxs)(h.Z,{onClick:t?e=>(e=>{e.preventDefault();try{b((0,u.kB)({id:t._id,data:{title:i,content:Z,date:a,concerne:null===p||void 0===p?void 0:p.value}})),y()}catch(n){console.log(n)}})(e):e=>(async e=>{try{e.preventDefault(),b((0,u.oh)({title:i,content:Z,date:a,concerne:null===p||void 0===p?void 0:p.value}))}catch(t){console.log(t)}})(e),fullWidth:!0,color:"primary",variant:"contained",children:[t?(0,j.jsx)(d.I8b,{fontSize:"small",sx:{marginRight:"15px"}}):(0,j.jsx)(m.Z,{fontSize:"small",sx:{marginRight:"15px"}}),t?"Edit":"Create_message"]})]}),(0,j.jsxs)(o.ZP,{item:!0,lg:6,sx:{paddingLeft:"5px"},children:[" ",t&&(0,j.jsxs)(h.Z,{onClick:()=>y(),fullWidth:!0,color:"warning",variant:"contained",children:[(0,j.jsx)(d.HG3,{fontSize:"small",sx:{marginRight:"15px"}}),"Annuler"]})]})]})]})};var C=n(661395);const b=function(e){let{text:t}=e;const n=(0,c.v9)((e=>e.user.user));return t.split("@p").map(((e,t)=>(0,j.jsx)("div",{className:"title_content",children:(0,j.jsx)("p",{children:e.replace("@name",(0,C.$f)(null===n||void 0===n?void 0:n.nom))})},t)))};const y=function(){const e=(0,c.v9)((e=>e.communication)),t=(0,c.v9)((e=>e.user.user));function n(e){let t=(new Date(e).getTime()-(new Date).getTime())/864e5;return 0===t?"Ce message expire aujourd'hui":t>1?`Ce message expire dans ${t.toFixed(0)} jours`:1===t?"Ce message expire demain":void 0}const[m,g]=l.useState({isOpen:!1,title:"",subTitle:""}),h=(0,p.I0)(),[x,v]=l.useState();return(0,j.jsxs)(j.Fragment,{children:["success"===e.addcommunication&&(0,j.jsx)(s.Z,{message:"Done"}),"rejected"===e.addcommunication&&(0,j.jsx)(s.Z,{message:e.addcommunicationError}),"success"===e.updateCommuniquer&&(0,j.jsx)(s.Z,{message:"Done"}),"rejected"===e.updateCommuniquer&&(0,j.jsx)(s.Z,{message:e.updateCommuniquerError}),"success"===e.deleteCommuniquer&&(0,j.jsx)(s.Z,{message:"Done"}),"rejected"===e.deleteCommuniquer&&(0,j.jsx)(s.Z,{message:e.deleteCommuniquerError}),(0,j.jsxs)(o.ZP,{container:!0,children:["superUser"===(null===t||void 0===t?void 0:t.fonction)&&(0,j.jsxs)(o.ZP,{item:!0,lg:4,children:[(0,j.jsx)(Z,{dataToUpdate:x,setDataToUpdate:v})," "]}),(0,j.jsx)(o.ZP,{item:!0,lg:"superUser"===(null===t||void 0===t?void 0:t.fonction)?8:12,sx:{padding:"5px"},children:(null===e||void 0===e?void 0:e.communication)&&e.communication.map((e=>(0,j.jsxs)(i.Z,{sx:{padding:"10px",marginTop:"5px"},children:[(0,j.jsx)(r.Z,{variant:"body",sx:{textAlign:"center",fontWeight:"bolder"},children:e.title}),(0,j.jsx)(b,{text:e.content}),(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,j.jsx)("div",{style:{width:"70%"},children:(0,j.jsx)("p",{style:{fontSize:"10px",margin:"0px",padding:"0px",color:"blue",fontWeight:"bolder"},children:n(e.date)})}),"superUser"===(null===t||void 0===t?void 0:t.fonction)&&(0,j.jsxs)("div",{style:{width:"10%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,j.jsx)("div",{style:{cursor:"pointer"},children:(0,j.jsx)(d.HG3,{color:"warining",onClick:()=>{g({isOpen:!0,title:"Do you want to delete this message ?",subTitle:"",onConfirm:()=>{(async e=>{g({...m,isOpen:!1}),h((0,u.OP)(e))})(e._id)}})},fontSize:"small"})}),(0,j.jsx)("div",{style:{cursor:"pointer"},children:(0,j.jsx)(d.I8b,{color:"primary",onClick:()=>{v(e)},fontSize:"small"})})]})]})]},e._id)))})]}),(0,j.jsx)(a.Z,{confirmDialog:m,setConfirmDialog:g})]})}},786138:(e,t,n)=>{n.d(t,{Z:()=>O});var o=n(747313),i=n(608007),r=n(329846),a=n(218765),s=n(951782),l=n(22375);var c=n(617592),u=n(319860),d=n(577342),p=n(691615),m=n(473365),g=n(683061),h=n(913392),x=n(270501),v=n(814363),f=n(601167);function j(e){return(0,f.ZP)("MuiSnackbarContent",e)}(0,v.Z)("MuiSnackbarContent",["root","message","action"]);var Z=n(346417);const C=(0,c.ZP)(x.Z,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,o=(0,h._4)(t.palette.background.default,n);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(o),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),b=(0,c.ZP)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),y=(0,c.ZP)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),w=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiSnackbarContent"}),{action:o,className:r,message:a,role:s="alert",...l}=n,c=n,u=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"],action:["action"],message:["message"]},j,t)})(c);return(0,Z.jsxs)(C,{role:s,square:!0,elevation:6,className:(0,g.Z)(u.root,r),ownerState:c,ref:t,...l,children:[(0,Z.jsx)(b,{className:u.message,ownerState:c,children:a}),o?(0,Z.jsx)(y,{className:u.action,ownerState:c,children:o}):null]})}));function S(e){return(0,f.ZP)("MuiSnackbar",e)}(0,v.Z)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const k=(0,c.ZP)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,p.Z)(n.anchorOrigin.vertical)}${(0,p.Z)(n.anchorOrigin.horizontal)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return{zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",..."top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},..."left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},..."right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},[t.breakpoints.up("sm")]:{..."top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},..."center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},..."left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},..."right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"}}}})),O=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiSnackbar"}),c=(0,u.Z)(),g={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{action:h,anchorOrigin:{vertical:x,horizontal:v}={vertical:"bottom",horizontal:"left"},autoHideDuration:f=null,children:j,className:C,ClickAwayListenerProps:b,ContentProps:y,disableWindowBlurListener:O=!1,message:T,onBlur:P,onClose:E,onFocus:R,onMouseEnter:D,onMouseLeave:M,open:z,resumeHideDuration:L,TransitionComponent:B=m.Z,transitionDuration:_=g,TransitionProps:{onEnter:A,onExited:I,...W}={},...H}=n,N={...n,anchorOrigin:{vertical:x,horizontal:v},autoHideDuration:f,disableWindowBlurListener:O,TransitionComponent:B,transitionDuration:_},q=(e=>{const{classes:t,anchorOrigin:n}=e,o={root:["root",`anchorOrigin${(0,p.Z)(n.vertical)}${(0,p.Z)(n.horizontal)}`]};return(0,i.Z)(o,S,t)})(N),{getRootProps:F,onClickAway:U}=function(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:i,open:r,resumeHideDuration:a}=e,c=o.useRef();o.useEffect((()=>{if(r)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==i||i(e,"escapeKeyDown")}}),[r,i]);const u=(0,s.Z)(((e,t)=>{null==i||i(e,t)})),d=(0,s.Z)((e=>{i&&null!=e&&(clearTimeout(c.current),c.current=setTimeout((()=>{u(null,"timeout")}),e))}));o.useEffect((()=>(r&&d(t),()=>{clearTimeout(c.current)})),[r,t,d]);const p=()=>{clearTimeout(c.current)},m=o.useCallback((()=>{null!=t&&d(null!=a?a:.5*t)}),[t,a,d]),g=e=>t=>{const n=e.onBlur;null==n||n(t),m()},h=e=>t=>{const n=e.onFocus;null==n||n(t),p()},x=e=>t=>{const n=e.onMouseEnter;null==n||n(t),p()},v=e=>t=>{const n=e.onMouseLeave;null==n||n(t),m()};return o.useEffect((()=>{if(!n&&r)return window.addEventListener("focus",m),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",p)}}),[n,m,r]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={...(0,l.Z)(e),...t};return{role:"presentation",...n,onBlur:g(n),onFocus:h(n),onMouseEnter:x(n),onMouseLeave:v(n)}},onClickAway:e=>{null==i||i(e,"clickaway")}}}({...N}),[V,$]=o.useState(!0),G=(0,r.Z)({elementType:k,getSlotProps:F,externalForwardedProps:H,ownerState:N,additionalProps:{ref:t},className:[q.root,C]});return!z&&V?null:(0,Z.jsx)(a.Z,{onClickAway:U,...b,children:(0,Z.jsx)(k,{...G,children:(0,Z.jsx)(B,{appear:!0,in:z,timeout:_,direction:"top"===x?"down":"up",onEnter:(e,t)=>{$(!1),A&&A(e,t)},onExited:e=>{$(!0),I&&I(e)},...W,children:j||(0,Z.jsx)(w,{message:T,action:h,...y})})})})}))}}]);