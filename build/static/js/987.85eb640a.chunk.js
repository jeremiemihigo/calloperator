"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[987],{803105:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(81270),s=n(648623),o=n(624631),l=n(346417);const a=(0,i.D)();const r=function(e){let{value:t,setValue:n,options:i,title:r,propr:d}=e;return(0,l.jsx)(s.Z,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>a(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with",options:i,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+d],renderOption:(e,t)=>(0,l.jsx)("li",{...e,children:t[""+d]},t.id),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,l.jsx)(o.Z,{...e,label:r||"Titre"})})}},680509:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(786138),s=n(747313),o=n(346417);const l=function(e){const{message:t}=e,[n,l]=s.useState(!0);return(0,o.jsx)("div",{children:(0,o.jsx)(i.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,onClose:()=>{l(!1)},message:t},"bottom center")})}},792628:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(557829),s=n(565280),o=n(406740),l=n(747313),a=n(346417);function r(e){const{children:t,value:n,index:s,...o}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:n!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...o,children:n===s&&(0,a.jsx)(i.Z,{sx:{p:3},children:t})})}function d(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function c(e){let{titres:t,components:n}=e;const[c,p]=l.useState(0);return(0,a.jsxs)(i.Z,{sx:{width:"100%"},children:[(0,a.jsx)(i.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,a.jsx)(o.Z,{value:c,onChange:(e,t)=>{p(t)},"aria-label":"icon label tabs example",style:{padding:"0px",margin:"0px"},children:t.map(((e,t)=>(0,l.createElement)(s.Z,{label:e.label,...d(e.id),key:t})))})}),n.map(((e,t)=>(0,a.jsx)(r,{value:c,index:e.id,children:e.component},t)))]})}const p=l.memo(c)},540695:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(346417);const s=function(e){let{texte:t}=e;return(0,i.jsx)("div",{style:{display:"flex",height:"20rem",alignItems:"center",justifyContent:"center"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,i.jsx)("img",{src:"data:image/png;base64,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",alt:"attenteImage"})}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{style:{padding:"0px",textAlign:"center",marginTop:"15px",fontSize:"15px",fontWeight:"bolder"},children:t})})]})})}},737987:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var i=n(270501),s=n(809019),o=n(747313),l=n(346417);const a=(0,o.createContext)(),r=e=>{const[t,n]=o.useState(),[i,s]=o.useState();return(0,l.jsx)(a.Provider,{value:{changeRecent:e=>{n(e)},changeImages:e=>{s(e)},lastImages:i,recentAnswerSelect:t},children:e.children})},d=o.memo(r);var c=n(873428),p=n(792628),u=n(887392),x=n(844730),m=n(835662),h=n(540695),v=n(416031),g=n.n(v),f=n(70816),j=n.n(f),C=n(594500),y=n(661395),Z=n(624631);const A=function(e){let{demandes:t}=e;return(0,l.jsx)("div",{className:"chats",children:t&&t.length>0&&t.map((e=>(0,l.jsxs)("div",{className:"co"===e.sender?"co":"agent",children:[(0,l.jsx)("p",{children:e.message}),(0,l.jsxs)("p",{style:{fontSize:"11px"},children:[(0,l.jsx)("span",{style:{textAlign:"center"},children:e.codeAgent}),(0,l.jsx)("span",{style:{float:"right"},children:j()(e.createdAt).fromNow()})]})]},e._id)))})};const S=function(e){let{setError:t}=e;const{setDemande:n}=o.useContext(u.E),[i,a]=o.useState([]),[r,d]=o.useState(!1);o.useEffect((()=>{(async()=>{try{d(!0),a([]);const e=await m.Z.get(y.V6+"/demandeIncorrect",y.vc);200===e.status&&(a(e.data),d(!1))}catch(e){"ERR_NETWORK"===e.code&&(d(!1),t("Rassurez-vous que votre appareil a une connexion active"))}})()}),[]);const[p,x]=o.useState({fn:e=>e});return(0,l.jsxs)("div",{className:"listeDemandeFeedback",children:[(0,l.jsx)(s.ZP,{container:!0,children:(0,l.jsx)(s.ZP,{item:!0,lg:12,sm:12,xs:12,sx:{margin:"10px"},children:(0,l.jsx)(Z.Z,{onChange:e=>(e=>{let t=e.target.value.toLowerCase();x({fn:n=>""===t?n:n.filter((t=>t.idDemande.includes(e.target.value.toLowerCase())||t.codeAgent.includes(e.target.value.toUpperCase())))})})(e),fullWidth:!0,label:"ID visite ou ID agent"})})}),r&&(0,l.jsx)("p",{style:{textAlign:"center",fontWeight:"bolder"},children:"Please wait..."}),i&&p.fn(i).map((e=>{var t,i,s;return(0,l.jsx)("div",{children:(0,l.jsxs)(c.Z,{onClick:t=>{t.preventDefault(),n(e)},style:{cursor:"pointer",padding:"5px",marginBottom:"4px"},children:[(0,l.jsxs)("div",{className:"allP",children:[(0,l.jsxs)("p",{children:[" ",e.idDemande,"; ",e.codeclient&&e.codeclient," "]}),(0,l.jsxs)("p",{children:[e.statut,"; ",e.raison&&e.raison]}),(0,l.jsxs)("p",{style:{fontSize:"9px",width:"100%"},children:[(0,l.jsx)("span",{children:null===(t=e.agent)||void 0===t?void 0:t.nom}),(0,l.jsx)("span",{style:{float:"right"},children:j()(e.updatedAt).fromNow()})]})]}),"followup"===(null===e||void 0===e||null===(i=e.typeVisit)||void 0===i?void 0:i.followup)&&(0,l.jsx)("div",{style:{margin:"0px",background:"#4684D3",padding:"4px",borderRadius:"10px"},children:(0,l.jsxs)("p",{style:{fontSize:"12px",color:"#FFFFFF",padding:"0px",margin:"0px"},children:["Ce client a d\xe9j\xe0 \xe9t\xe9 en date du ",j()(null===e||void 0===e||null===(s=e.typeVisit)||void 0===s?void 0:s.dateFollowup).format("DD-MM-YYYY \xe0 hh:mm")," par le meme agent"]})}),e.conversation.length>0&&(0,l.jsx)("div",{children:(0,l.jsx)(A,{demandes:e.conversation})})]})},e._id)}))]})};const b=function(){const{setDemande:e,demande:t,data:n,setResetData:i,allListe:r,setAllListe:d,setData:v}=(0,o.useContext)(u.E),f=(0,C.v9)((e=>e.agent.agent)),Z=(0,C.v9)((e=>e.zone.zone)),A=(e,t)=>{var n,i,s;return f&&f.length>0?"shop"===t?null===(n=g().filter(f,{codeAgent:e})[0])||void 0===n||null===(i=n.shop[0])||void 0===i?void 0:i.shop:null===(s=g().filter(f,{codeAgent:e})[0])||void 0===s?void 0:s.nom:""},b=e=>{var t;return Z&&Z.length>0?null===(t=g().filter(Z,{idZone:e})[0])||void 0===t?void 0:t.denomination:""},[P,D]=o.useState(""),[k,E]=o.useState(!1),w=async()=>{try{E(!0);const e=await m.Z.get(`${y.V6}/toutesDemandeAttente/100`,y.vc);201===e.status&&"token expired"===e.data?(localStorage.removeItem("auth"),window.location.replace("/login")):(v(g().groupBy(e.data,"codeZone")),d(e.data),E(!1),D(""))}catch(P){"ERR_NETWORK"===P.code&&D("Rassurez-vous que votre appareil a une connexion active")}};o.useEffect((()=>{w()}),[]),o.useEffect((()=>{const e=setInterval((()=>{w()}),2e5);return()=>clearInterval(e)}),[]);const z=(0,C.v9)((e=>{var t;return null===(t=e.reponse)||void 0===t?void 0:t.postId}));o.useEffect((()=>{if(n&&r){let e=r.filter((e=>e.idDemande!==z));v(g().groupBy(e,"codeZone"))}}),[z]);const[I,N]=o.useState(""),{changeRecent:R,changeImages:U}=(0,o.useContext)(a),W=()=>(0,l.jsxs)(l.Fragment,{children:[k&&0===r.length&&(0,l.jsx)("p",{style:{textAlign:"center",fontSize:"12px"},children:"Chargement..."}),!k&&0===r.length&&(0,l.jsx)(h.Z,{texte:"No pending requests"}),n&&Object.keys(n).map((o=>(0,l.jsxs)("div",{children:[(0,l.jsx)(s.ZP,{className:"regionDemande",onClick:()=>N(o),children:(0,l.jsxs)("p",{children:[b(o)," ",(0,l.jsx)("span",{className:"nombre",children:n[""+o].length})," "]})}),I===o&&n[""+o].map(((n,s)=>(0,l.jsx)(c.Z,{onClick:()=>(t=>{R(),e(t),U(),i(t._id)})(n),style:{cursor:"pointer",padding:"5px",marginBottom:"4px"},className:t&&t._id===n._id?"colorGreen":"",children:(0,l.jsxs)("div",{className:"allP",children:[(0,l.jsxs)("p",{children:[" ",A(n.codeAgent,"shop"),";"," ",n.codeclient&&"undefined"!==n.codeclient&&n.codeclient," ",n.statut," ",n.codeAgent]}),(0,l.jsxs)("p",{style:{fontSize:"9px"},children:[A(n.codeAgent,"nom"),(0,l.jsx)("span",{style:{float:"right"},children:j()(n.createdAt).fromNow()})]})]})},s)))]},o)))]}),F=[{id:0,component:(0,l.jsx)(W,{})},{id:1,component:(0,l.jsx)(S,{setError:D})}];return(0,l.jsxs)(l.Fragment,{children:[""!==P&&(0,l.jsx)(x.Z,{type:"warning",message:P}),(0,l.jsx)(p.Z,{titres:[{id:0,label:"En_attente"},{id:1,label:"Non_conforme"}],components:F})]})};var P=n(261113),D=n(396180),k=n(846968),E=n(471562),w=n(286961);const z=(0,n(181171).Z)((0,l.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var I=n(369099),N=n(189843),R=n(985038),U=n(319159);const{TextArea:W}=U.default;const F=function(){const[e,t]=o.useState(""),[n,i]=D.ZP.useMessage(),s=(e,t)=>{navigator.clipboard.writeText(e),n.open({type:""+t,content:""+e,duration:2})};return(0,l.jsxs)("div",{style:{minWidth:"20rem",padding:"5px"},children:[i,(0,l.jsx)("div",{children:(0,l.jsx)(W,{required:!0,value:e,onChange:e=>{t(e.target.value)},placeholder:"Enter new feedback",autoSize:{minRows:3,maxRows:5}})}),(0,l.jsx)("div",{style:{marginTop:"10px"},children:(0,l.jsx)(I.Z,{onClick:t=>(async t=>{t.preventDefault();try{const t=await m.Z.post(y.V6+"/setFeedback",{title:e},y.vc);200!==t.status?s(""+t.data,"error"):s("Op\xe9ration effectu\xe9e","success")}catch(n){console.log(n),s("Error "+n,"error")}})(t),color:"primary",variant:"contained",fullWidth:!0,children:"Add"})})]})};const T=function(e){var t,n,i;let{demande:s,update:a}=e;const[r,d]=(0,o.useState)(""),c=(0,C.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),[p,u]=o.useState(!1),x=(0,C.v9)((e=>e.parametre.parametre)),[h,v]=o.useState({isOpen:!1,title:"",subTitle:""}),[g,f]=o.useState({fn:e=>e}),[j,A]=D.ZP.useMessage(),S=(e,t)=>{navigator.clipboard.writeText(e),j.open({type:""+t,content:""+e,duration:2})};return(0,l.jsxs)(l.Fragment,{children:[A,c&&"superUser"===c.fonction&&(0,l.jsx)(P.Z,{component:"p",sx:{fontSize:"12px",cursor:"pointer",color:"blue",fontWeight:800},onClick:()=>u(!0),children:"Add feedback"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Z.Z,{onChange:e=>(e=>{let t=e.target.value.toLowerCase();f({fn:n=>""===t?n:n.filter((t=>t.title.toUpperCase().includes(e.target.value.toUpperCase())))})})(e),style:{marginTop:"10px"},name:"filter",autoComplete:"off",fullWidth:!0,label:"Filter feedback"})}),(0,l.jsx)("div",{children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{style:{textAlign:"center"},children:"Feedback"})})}),(0,l.jsx)("tbody",{children:x&&(null===(t=x[0])||void 0===t?void 0:t.feedbackvm)&&(null===(n=x[0])||void 0===n?void 0:n.feedbackvm.length)>0&&g.fn(null===(i=x[0])||void 0===i?void 0:i.feedbackvm).map((e=>(0,l.jsx)("tr",{style:{backgroundColor:""+(e.title===r?"#dedede":"#fff")},onClick:()=>d(e.title),children:(0,l.jsxs)("td",{children:[(0,l.jsx)(P.Z,{component:"p",sx:{fontSize:"12px",cursor:"pointer"},children:e.title}),c&&"superUser"===c.fonction&&(0,l.jsx)(P.Z,{onClick:()=>(async e=>{try{const t=await m.Z.post(y.V6+"/deleteOneItem",{id:e},y.vc);200===t.status?S("Op\xe9ration effectu\xe9e","success"):S("Error "+t.data,"warning")}catch(t){S("Error "+t,"warning")}})(e._id),component:"span",style:{color:"red",cursor:"pointer",fontSize:"10px",fontWeight:"bolder",marginLeft:"5px"},children:"Delete"})]})},e._id)))})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)(I.Z,{onClick:()=>{v({isOpen:!0,title:"Souhaitez-vous transmettre ce feedback \xe0 l'agent concern\xe9 ?",subTitle:"Cliquez sur YES pour valider l'operation",onConfirm:()=>{(async()=>{try{v({...h,isOpen:!1});let e=s||a;const t={_id:e._id,message:r,sender:"co",idDemande:e.idDemande,codeAgent:null===c||void 0===c?void 0:c.codeAgent};if(d(""),200===(await m.Z.post(y.V6+"/reclamation",t)).status)return}catch(e){console.log(e)}})()}})},color:"primary",variant:"contained",fullWidth:!0,disabled:""===r,children:[(0,l.jsx)(z,{fontSize:"small"})," ",(0,l.jsx)("span",{style:{marginLeft:"10px"},children:"Envoyer"})]})})]}),(0,l.jsx)(R.Z,{open:p,setOpen:u,title:"Add feedback",children:(0,l.jsx)(F,{})}),(0,l.jsx)(N.Z,{confirmDialog:h,setConfirmDialog:v})]})};var B=n(371207),G=n(808425),L=n(157983),M=n(799881),O=n(91554),V=n(557829),H=n(301550),q=n(116429),Y=n(183929),Q=n(644758),K=n(585281),J=n(803105),X=n(680509),$=n(65387),ee=n(528756);const te=function(e){let{update:t}=e;const n=(0,C.v9)((e=>e.zone.zone)),{changeImages:i}=o.useContext(a),r=(0,C.I0)(),[d,c]=o.useState(""),[p,x]=o.useState(""),[h,v]=o.useState(!1),[g,f]=o.useState({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),j=e=>{const{name:t,value:n}=e.target;f({...g,[t]:n})},{demande:A,resetData:S}=(0,o.useContext)(u.E),{codeCu:b,codeClient:P,consExpDays:D,nomClient:k}=g;let[E,w]=o.useState({payement:"",statut:""});const{payement:z,statut:N}=E,[R,U]=o.useState(""),[W,F]=o.useState(!1),[T,te]=o.useState("");function ne(){try{f({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),w({payement:"",statut:""}),c(""),x(""),te("")}catch(e){console.log(e)}}o.useEffect((()=>{ne()}),[S]);const ie=(0,C.v9)((e=>e.reponse)),[se,oe]=o.useState(""),le=e=>{oe(""),f({...g,consExpDays:e});let t="",n="";return e>=0&&(t="installed",n="normal"),e>=-30&&e<=-1&&(t="installed",n="expired"),e>=-44&&e<=-31&&(t="installed",n="defaulted"),e<=-45&&(t="pending repossession",n="defaulted"),isNaN(e)&&(t="",n=""),w({payement:n,statut:t}),{payement:n,statut:t}},ae=(0,C.v9)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.user})),re=(0,C.v9)((e=>{var t;return null===(t=e.agent)||void 0===t?void 0:t.agent})),de=(e,t)=>{return re&&re.length>0&&"shop"!==t?_.filter(re,{codeAgent:e})[0][""+t]:re&&re.length>0&&"shop"===t?null===(n=_.filter(re,{codeAgent:e})[0])||void 0===n||null===(i=n.shop[0])||void 0===i?void 0:i.shop:"";var n,i},ce=async()=>{if(12===P.trim().length&&P.toUpperCase().trim().startsWith("BDRC"))if(d&&p&&d.idZone!==p.idZone)U("Veuillez v\xe9rifier si le shop est enregistr\xe9 dans la region selection\xe9e"),F(!0);else if(A&&!["PO","ZBM"].includes(de(null===A||void 0===A?void 0:A.codeAgent,"fonction"))&&de(null===A||void 0===A?void 0:A.codeAgent,"idShop")!==p.idShop)U(`y a pas une conformit\xe9 entre le shop du client << ${null===p||void 0===p?void 0:p.shop} >> et celui de l'agent << ${de(null===A||void 0===A?void 0:A.codeAgent,"shop")} >>`),F(!0);else{const e={idDemande:A.idDemande,codeClient:P.toUpperCase().trim(),codeCu:b.trim(),codeAgent:null===ae||void 0===ae?void 0:ae.codeAgent,clientStatut:N,PayementStatut:z,adresschange:T,consExpDays:D.trim(),nomClient:k,idZone:d.idZone,idShop:p.idShop,fonctionAgent:de(null===A||void 0===A?void 0:A.codeAgent,"fonction"),codeAgentDemandeur:A.codeAgent,_idDemande:A._id,nomAgentSave:null===ae||void 0===ae?void 0:ae.nom,createdAt:null===A||void 0===A?void 0:A.createdAt,nomDemandeur:de(null===A||void 0===A?void 0:A.codeAgent,"nom"),demande:{typeImage:A.typeImage,numero:A.numero,commune:A.commune,updatedAt:A.updatedAt,statut:A.statut,sector:A.sector,jours:null===A||void 0===A?void 0:A.jours,lot:A.lot,cell:A.cell,file:A.file,reference:A.reference,sat:A.sat,raison:A.raison},coordonnee:{longitude:A.coordonnes.longitude,latitude:A.coordonnes.latitude,altitude:A.coordonnes.altitude}};navigator.clipboard.writeText(""),r((0,$.Z1)(e))}else U("Le code client n'est pas conforme"),F(!0)};o.useEffect((()=>{"success"===ie.postDemande&&ne()}),[ie]),o.useEffect((()=>{if(t){let e={consExpDays:t.consExpDays,codeClient:t.codeclient,codeCu:t.codeCu};le(t.consExpDays),f({...g,...e})}}),[t]);const pe=(e,t)=>{t.preventDefault(),oe(e),w("inactive"===e?{payement:"terminated",statut:"inactive"}:{payement:"pending fulfliment",statut:"pending activation"})},[ue,xe]=o.useState(!1),me=async()=>{try{if(h)xe(!0);else{let e=12===P.trim().length?P.toUpperCase().trim():8===P.length?"BDRC"+P.trim():"";if(""!==e){v(!0);const t=await m.Z.get(`${y.xK}/customer/${e}`);if(200===t.status){const{visites:s,info:o}=t.data;i(s),f({...g,codeCu:o.customer_cu,nomClient:o.nomClient,consExpDays:"",codeClient:e});let l=n.filter((e=>e._id===o.region._id));x(o.shop),c(l[0]),v(!1),xe(!1)}else U("Tu peux chercher ses informations dans pulse "+e),F(!0),v(!1),xe(!1),f({...g,codeCu:"",nomClient:"",consExpDays:""}),c(""),x("")}}}catch(e){console.log(e)}},he=(0,C.v9)((e=>e.reponse));return(0,l.jsxs)(s.ZP,{children:["rejected"===he.postDemande&&(0,l.jsx)(M.Z,{variant:"filled",severity:"error",children:he.postDemandeError}),"pending"===he.postDemande&&(0,l.jsx)(O.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:"Please wait..."})})}),ue&&(0,l.jsx)(O.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:["Veuillez patientez la recherche des informations du client ",P]})})}),W&&(0,l.jsx)(X.Z,{message:R,open:W,setOpen:F}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,lg:10,xs:10,children:(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>j(e),name:"codeClient",onKeyUp:e=>(e=>{13===e.keyCode&&me()})(e),autoComplete:"off",fullWidth:!0,value:P,label:"Code du Client"})}),(0,l.jsx)(s.ZP,{item:!0,lg:2,xs:2,sx:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:h?(0,l.jsx)(K.Z,{size:15}):(0,l.jsx)(L.default,{onClick:e=>me(),fontSize:"small"})})]}),(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>j(e),name:"nomClient",autoComplete:"off",fullWidth:!0,value:k,label:"Nom du Client"}),(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>j(e),value:b,name:"codeCu",autoComplete:"off",fullWidth:!0,label:"Code CU"}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px",paddingRight:"3px"},children:(0,l.jsx)(J.Z,{value:d,setValue:c,options:n,title:n&&n.length<1?"Loading...":"Regions",propr:"denomination"})}),(0,l.jsx)(s.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px",paddingRight:"3px"},children:d&&""!==d&&null!==d&&(0,l.jsx)(J.Z,{value:p,setValue:x,options:d&&d.shop,title:"Shop",propr:"shop"})})]}),(0,l.jsx)("div",{style:{margin:"10px 0px",paddingLeft:"3px"},children:(0,l.jsx)(ee.Z,{label:"Adresse",data:[{id:1,title:"Identifique \xe0 pulse",value:"Identique"},{id:2,title:"N'est pas identifique \xe0 pulse",value:"N'est pas identique"}],value:T,setValue:te})}),(0,l.jsx)("div",{className:"expiredDate",children:(0,l.jsx)(Z.Z,{onChange:e=>le(e.target.value),style:{marginTop:"10px"},name:"consExpDays",autoComplete:"off",fullWidth:!0,onKeyUp:t?()=>{}:e=>(e=>{13===e.keyCode&&ce()})(e),value:D,label:"consExpDays"})}),(0,l.jsxs)(V.Z,{sx:{display:"flex"},children:[(0,l.jsx)(H.Z,{component:"fieldset",variant:"standard",children:(0,l.jsx)(q.Z,{children:(0,l.jsx)(Y.Z,{onClick:e=>pe("inactive",e),control:(0,l.jsx)(Q.Z,{name:"inactive",checked:"inactive"===se}),label:"Inactive"})})}),(0,l.jsx)(H.Z,{component:"fieldset",variant:"standard",children:(0,l.jsx)(q.Z,{children:(0,l.jsx)(Y.Z,{onClick:e=>pe("pending",e),control:(0,l.jsx)(Q.Z,{name:"pending",checked:"pending"===se}),label:"Pending activation"})})})]}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,lg:6,sx:{paddingRight:"3px"},children:(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),w({...E,statut:e.target.value})},name:"statut",autoComplete:"off",disabled:!0,fullWidth:!0,value:N,label:"Statut du client"})}),(0,l.jsxs)(s.ZP,{item:!0,lg:6,sx:{paddingRight:"3px"},children:[" ",(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),w({...E,payement:e.target.value})},name:"payement",disabled:!0,autoComplete:"off",fullWidth:!0,value:z,label:"Statut Payement"})]})]}),(0,l.jsx)("div",{style:{marginTop:"10px"},children:(0,l.jsxs)(I.Z,{disabled:!A&&!t,fullWidth:!0,variant:"contained",color:"primary",onClick:t?()=>(async()=>{F(!1),200===(await m.Z.put(y.V6+"/reponse",{idReponse:t._id,data:{codeclient:P,nomClient:k,codeCu:b,clientStatut:N,PayementStatut:z,consExpDays:D,idZone:d.idZone,idShop:p.idShop}},y.vc)).status&&(U("Done"),F(!0),ne())})():e=>{e.preventDefault(),ce()},children:[t?(0,l.jsx)(B.Z,{fontSize:"small"}):(0,l.jsx)(G.Z,{fontSize:"small"})," ",(0,l.jsxs)("span",{style:{marginLeft:"10px"},children:[" ",t?"Update":"Save"]})]})})]})};const ne=function(e){let{update:t}=e;const n=(0,C.v9)((e=>e.zone.zone)),i=(0,C.v9)((e=>e.shop.shop)),{changeImages:r,changeRecent:d}=o.useContext(a),[c,p]=o.useState(""),[x,h]=o.useState(""),[v,f]=o.useState(!1),[j,A]=o.useState({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),S=e=>{const{name:t,value:n}=e.target;A({...j,[t]:n})},{resetData:b,changeReponse:P}=(0,o.useContext)(u.E),{codeCu:D,codeClient:w,consExpDays:z,nomClient:N}=j;let[R,U]=o.useState({payement:"",statut:""});const{payement:W,statut:F}=R,[T,G]=o.useState(""),[M,$]=o.useState(!1),[_,te]=o.useState("");function ne(){try{A({codeCu:"",codeClient:"",consExpDays:"",nomClient:""}),U({payement:"",statut:""}),p(""),h(""),te("")}catch(e){console.log(e)}}o.useEffect((()=>{ne()}),[b]);const[ie,se]=o.useState(""),oe=e=>{se(""),A({...j,consExpDays:e});let t="",n="";return e>=0&&(t="installed",n="normal"),e>=-30&&e<=-1&&(t="installed",n="expired"),e>=-44&&e<=-31&&(t="installed",n="defaulted"),e<=-45&&(t="pending repossession",n="defaulted"),isNaN(e)&&(t="",n=""),U({payement:n,statut:t}),{payement:n,statut:t}},le=(0,C.v9)((e=>e.user.user)),[ae,re]=o.useState(!1),de=async()=>{re(!0);try{var e;if((null===le||void 0===le?void 0:le.nom)!==(null===t||void 0===t||null===(e=t.agentSave)||void 0===e?void 0:e.nom)&&"superUser"!==(null===le||void 0===le?void 0:le.fonction)){var n;G(`seulement ${null===t||void 0===t||null===(n=t.agentSave)||void 0===n?void 0:n.nom} peut apporter une modification \xe0 cette r\xe9ponse`),$(!0),re(!1)}else{$(!1);const e=await m.Z.put(y.V6+"/reponse",{idReponse:t._id,data:{codeclient:w,nomClient:N,codeCu:D,clientStatut:F,PayementStatut:W,consExpDays:z,idZone:c.idZone,idShop:x.idShop,adresse:_}},y.vc);200===e.status?(P(e.data),re(!1),G("Mofication effectu\xe9e"),ne(),$(!0),d()):(re(!1),G("Error"),$(!0))}}catch(i){G("Error "+i),$(!0),re(!1)}},ce=[{id:1,title:"Identifique \xe0 pulse",value:"Identique"},{id:2,title:"N'est pas identifique \xe0 pulse",value:"N'est pas identique"}];o.useEffect((()=>{if(t){let e={consExpDays:t.consExpDays,codeClient:t.codeclient,codeCu:t.codeCu,nomClient:t.nomClient};oe(t.consExpDays),A({...j,...e});let s=ce.filter((e=>e.value===(null===t||void 0===t?void 0:t.adresschange)));te(s[0].value);let o=g().filter(n,{idZone:null===t||void 0===t?void 0:t.idZone}),l=g().filter(i,{idShop:null===t||void 0===t?void 0:t.idShop});p(o[0]),h(l[0])}}),[t]);const pe=(e,t)=>{t.preventDefault(),se(e),U("inactive"===e?{payement:"terminated",statut:"inactive"}:{payement:"pending fulfliment",statut:"pending activation"})},ue=async()=>{try{let e=12===w.trim().length?w.toUpperCase().trim():8===w.length?"BDRC"+w.trim():"";if(""!==e){f(!0);const t=await m.Z.get(`${y.V6}/customer/${e}`);if(200===t.status){const{visites:i,info:s}=t.data;r(i),A({...j,codeCu:s.customer_cu,nomClient:s.nomClient,consExpDays:"",codeClient:e});let o=n.filter((e=>e._id===s.region._id));h(s.shop),p(o[0]),f(!1)}else G("Tu peux chercher ses informations dans pulse"),$(!0),f(!1),A({...j,codeCu:"",nomClient:"",consExpDays:""}),p(""),h("")}}catch(e){console.log(e)}};return(0,l.jsxs)(s.ZP,{children:[ae&&(0,l.jsx)(O.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)("p",{style:{textAlign:"center",margin:"0px",padding:"0px"},children:"Please wait..."})})}),M&&(0,l.jsx)(X.Z,{message:T,open:M,setOpen:$}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsxs)(s.ZP,{item:!0,lg:10,xs:10,children:[(0,l.jsx)(k.Z,{size:12,children:(0,l.jsx)(E.Z,{width:200,src:`${y.BP}/${t.demande.file}`,placeholder:(0,l.jsx)(E.Z,{preview:!1,src:`${y.BP}/${t.demande.file}`,width:200})})}),(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>S(e),name:"codeClient",onKeyUp:e=>(e=>{13===e.keyCode&&ue()})(e),autoComplete:"off",fullWidth:!0,value:w,label:"Code du Client"})]}),(0,l.jsx)(s.ZP,{item:!0,lg:2,xs:2,sx:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center"},children:v?(0,l.jsx)(K.Z,{size:15}):(0,l.jsx)(L.default,{onClick:e=>ue(),fontSize:"small"})})]}),(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>S(e),name:"nomClient",autoComplete:"off",fullWidth:!0,value:N,label:"Nom du Client"}),(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>S(e),value:D,name:"codeCu",autoComplete:"off",fullWidth:!0,label:"Code CU"}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px",paddingRight:"3px"},children:(0,l.jsx)(J.Z,{value:c,setValue:p,options:n,title:n&&n.length<1?"Loading...":"Regions",propr:"denomination"})}),(0,l.jsx)(s.ZP,{item:!0,lg:6,sm:6,xs:12,sx:{marginTop:"10px"},children:c&&""!==c&&null!==c&&(0,l.jsx)(J.Z,{value:x,setValue:h,options:c&&c.shop,title:"Shop",propr:"shop"})})]}),(0,l.jsx)("div",{style:{margin:"10px 0px"},children:(0,l.jsx)(ee.Z,{label:"Adresse",data:ce,value:_,setValue:te})}),(0,l.jsx)("div",{className:"expiredDate",children:(0,l.jsx)(Z.Z,{onChange:e=>oe(e.target.value),style:{marginTop:"10px"},name:"consExpDays",autoComplete:"off",fullWidth:!0,onKeyUp:e=>(e=>{13===e.keyCode&&de()})(e),value:z,label:"consExpDays"})}),(0,l.jsxs)(V.Z,{sx:{display:"flex"},children:[(0,l.jsx)(H.Z,{component:"fieldset",variant:"standard",children:(0,l.jsx)(q.Z,{children:(0,l.jsx)(Y.Z,{onClick:e=>pe("inactive",e),control:(0,l.jsx)(Q.Z,{name:"inactive",checked:"inactive"===ie}),label:"Inactive"})})}),(0,l.jsx)(H.Z,{component:"fieldset",variant:"standard",children:(0,l.jsx)(q.Z,{children:(0,l.jsx)(Y.Z,{onClick:e=>pe("pending",e),control:(0,l.jsx)(Q.Z,{name:"pending",checked:"pending"===ie}),label:"Pending activation"})})})]}),(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,lg:6,sx:{paddingRight:"3px"},children:(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),U({...R,statut:e.target.value})},disabled:!0,name:"statut",autoComplete:"off",fullWidth:!0,value:F,label:"Statut du client"})}),(0,l.jsxs)(s.ZP,{item:!0,lg:6,children:[" ",(0,l.jsx)(Z.Z,{style:{marginTop:"10px"},onChange:e=>{e.preventDefault(),U({...R,payement:e.target.value})},disabled:!0,name:"payement",autoComplete:"off",fullWidth:!0,value:W,label:"Statut Payement"})]})]}),(0,l.jsx)("div",{style:{marginTop:"10px"},children:(0,l.jsxs)(I.Z,{disabled:!t,fullWidth:!0,variant:"contained",color:"primary",onClick:()=>de(),children:[(0,l.jsx)(B.Z,{fontSize:"small"}),(0,l.jsx)("span",{style:{marginLeft:"10px"},children:" Update"})]})})]})};function ie(e){const{update:t}=e,{demande:n,reponseNow:i}=(0,o.useContext)(u.E),{changeRecent:r,lastImages:d,recentAnswerSelect:x}=(0,o.useContext)(a),m=[{id:0,component:(0,l.jsx)(te,{update:t})},{id:1,component:(0,l.jsx)(T,{demande:n,update:t})}],[h,v]=D.ZP.useMessage();function g(e){let{demandes:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"demandeJsx",style:{textAlign:"justify"},children:["undefined"!==t.codeclient&&(0,l.jsxs)(P.Z,{component:"p",className:"codeClient",onClick:()=>{return e=t.codeclient,navigator.clipboard.writeText(e),void h.open({type:"success",content:"Done "+e,duration:2});var e},style:{color:(n=t.codeclient,!n&&"red"),fontSize:"15px",fontWeight:"bolder"},children:["code client : ",t.codeclient&&t.codeclient.toUpperCase()]}),"undefined"!==t.numero&&(0,l.jsxs)("p",{children:["Num\xe9ro joignable du client: ",t.numero]}),(0,l.jsxs)("p",{children:["Statut du client : ",""+("allumer"===t.statut?"allum\xe9":"\xe9teint")," "]}),(0,l.jsxs)("p",{children:["Sector : ",null===t||void 0===t?void 0:t.sector," "]}),(0,l.jsxs)("p",{children:["Cell : ",null===t||void 0===t?void 0:t.cell," "]}),(0,l.jsxs)("p",{children:["Sat : ",null===t||void 0===t?void 0:t.sat," "]}),(0,l.jsxs)("p",{children:["Reference : ",null===t||void 0===t?void 0:t.reference," "]}),(0,l.jsxs)("p",{children:["Feedback : ",t.raison.toLowerCase()]})]}),(0,l.jsx)(A,{demandes:t.conversation})]});var n}const f=(0,w.v9)((e=>e.zone.zone)),C=e=>{var t;return null===(t=_.filter(f,{idZone:e})[0])||void 0===t?void 0:t.denomination};return(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(l.Fragment,{children:v}),(0,l.jsxs)(s.ZP,{item:!0,lg:5,children:[(n||t)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.Z,{size:12,children:(0,l.jsx)(E.Z,{width:200,src:`${y.BP}/${t?t.demande.file:n.file}`,placeholder:(0,l.jsx)(E.Z,{preview:!1,src:`${y.BP}/${t?t.demande.file:n.file}`,width:200})})}),n&&!t&&(0,l.jsx)(g,{demandes:n}),t&&(0,l.jsx)(g,{demandes:t.demande}),(0,l.jsxs)("p",{style:{textAlign:"center",fontWeight:"bolder"},children:[d&&d.length+" Recente(s) image(s)"," "]}),(0,l.jsx)(s.ZP,{container:!0,sx:{marginTop:"10px"},children:d&&d.length>0&&d.map((e=>{var t,n;return(0,l.jsxs)(s.ZP,{sx:{paddingRight:"5px"},item:!0,lg:3,children:[(0,l.jsx)(k.Z,{children:(0,l.jsx)(E.Z,{height:50,width:50,src:`${y.BP}/${null===e||void 0===e||null===(t=e.demande)||void 0===t?void 0:t.file}`,placeholder:(0,l.jsx)(E.Z,{preview:!1,src:`${y.BP}/${null===e||void 0===e||null===(n=e.demande)||void 0===n?void 0:n.file}`,width:200})})})," "]},e._id)}))})]}),!n&&i&&i.length>0&&(0,l.jsxs)("div",{style:{padding:"10px"},children:[(0,l.jsx)("p",{style:{padding:"0px",marginBottom:"15px",textAlign:"center",fontWeight:"bolder"},children:"Recent answers"}),i.map((e=>{var t;return(0,l.jsx)(c.Z,{onClick:()=>r(e),style:{cursor:"pointer",padding:"5px",marginBottom:"4px"},className:x&&e._id===(null===x||void 0===x?void 0:x._id)?"colorGreen":"",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{style:{padding:"0px",fontSize:"12px",margin:"0px"},children:[null===(t=e.agentSave)||void 0===t?void 0:t.nom,";",C(e.idZone)]}),(0,l.jsxs)("p",{style:{padding:"0px",fontSize:"12px",margin:"0px"},children:[(null===e||void 0===e?void 0:e.consExpDays)+"jr(s)",";"," "+(null===e||void 0===e?void 0:e.clientStatut),";"," "+(null===e||void 0===e?void 0:e.PayementStatut),(0,l.jsx)("span",{style:{float:"right",fontSize:"9px"},children:j()(e.createdAt).fromNow()})]})]})},e._id)}))]})]}),(0,l.jsx)(s.ZP,{item:!0,lg:7,children:x?(0,l.jsx)(ne,{update:x}):(0,l.jsx)(p.Z,{titres:[{id:0,label:"Reponse"},{id:1,label:"Feedback"}],components:m})})]})}const se=o.memo(ie);const oe=function(){return(0,l.jsx)(d,{children:(0,l.jsx)(i.Z,{sx:{padding:"5px"},children:(0,l.jsxs)(s.ZP,{container:!0,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,md:5,lg:4,sm:5,children:(0,l.jsx)(b,{})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,md:7,lg:8,sm:7,sx:{paddingLeft:"30px"},children:(0,l.jsx)(se,{})})]})})})}},371207:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(181171),s=n(346417);const o=(0,i.Z)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},808425:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(181171),s=n(346417);const o=(0,i.Z)((0,s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},799881:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(747313),s=n(683061),o=n(608007),l=n(913392),a=n(617592),r=n(577342),d=n(691615),c=n(270501),p=n(814363),u=n(601167);function x(e){return(0,u.ZP)("MuiAlert",e)}const m=(0,p.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var h=n(947131),v=n(181171),g=n(346417);const f=(0,v.Z)((0,g.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),j=(0,v.Z)((0,g.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),C=(0,v.Z)((0,g.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),y=(0,v.Z)((0,g.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var Z=n(891251);const A=(0,a.ZP)(c.Z,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,d.Z)(n.color||n.severity)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const i="light"===t.palette.mode?l._j:l.$n,s="light"===t.palette.mode?l.$n:l._j,o=n.color||n.severity;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",...o&&"standard"===n.variant&&{color:t.vars?t.vars.palette.Alert[`${o}Color`]:i(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${o}StandardBg`]:s(t.palette[o].light,.9),[`& .${m.icon}`]:t.vars?{color:t.vars.palette.Alert[`${o}IconColor`]}:{color:t.palette[o].main}},...o&&"outlined"===n.variant&&{color:t.vars?t.vars.palette.Alert[`${o}Color`]:i(t.palette[o].light,.6),border:`1px solid ${(t.vars||t).palette[o].light}`,[`& .${m.icon}`]:t.vars?{color:t.vars.palette.Alert[`${o}IconColor`]}:{color:t.palette[o].main}},...o&&"filled"===n.variant&&{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${o}FilledColor`],backgroundColor:t.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[o].dark:t.palette[o].main,color:t.palette.getContrastText(t.palette[o].main)}}}})),S=(0,a.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),b=(0,a.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),P=(0,a.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),D={success:(0,g.jsx)(f,{fontSize:"inherit"}),warning:(0,g.jsx)(j,{fontSize:"inherit"}),error:(0,g.jsx)(C,{fontSize:"inherit"}),info:(0,g.jsx)(y,{fontSize:"inherit"})},k=i.forwardRef((function(e,t){var n,i,l,a,c,p;const u=(0,r.Z)({props:e,name:"MuiAlert"}),{action:m,children:v,className:f,closeText:j="Close",color:C,components:y={},componentsProps:k={},icon:E,iconMapping:w=D,onClose:z,role:I="alert",severity:N="success",slotProps:R={},slots:U={},variant:W="standard",...F}=u,T={...u,color:C,severity:N,variant:W},B=(e=>{const{variant:t,color:n,severity:i,classes:s}=e,l={root:["root",`${t}${(0,d.Z)(n||i)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,o.Z)(l,x,s)})(T),G=null!=(n=null!=(i=U.closeButton)?i:y.CloseButton)?n:h.Z,L=null!=(l=null!=(a=U.closeIcon)?a:y.CloseIcon)?l:Z.Z,M=null!=(c=R.closeButton)?c:k.closeButton,O=null!=(p=R.closeIcon)?p:k.closeIcon;return(0,g.jsxs)(A,{role:I,elevation:0,ownerState:T,className:(0,s.Z)(B.root,f),ref:t,...F,children:[!1!==E?(0,g.jsx)(S,{ownerState:T,className:B.icon,children:E||w[N]||D[N]}):null,(0,g.jsx)(b,{ownerState:T,className:B.message,children:v}),null!=m?(0,g.jsx)(P,{ownerState:T,className:B.action,children:m}):null,null==m&&z?(0,g.jsx)(P,{ownerState:T,className:B.action,children:(0,g.jsx)(G,{size:"small","aria-label":j,title:j,color:"inherit",onClick:z,...M,children:(0,g.jsx)(L,{fontSize:"small",...O})})}):null]})}))}}]);